
\newcommand{\nomedoc}{Specifica Tecnica}
\newcommand{\versione}{0.22}
\newcommand{\versioneglossario}{2.0}
\newcommand{\versionenormeprogetto}{2.0}
\newcommand{\nomefile}{SpecificaTecnica-\versione.pdf}
\newcommand{\datacreazione}{21 Gennaio 2011}
\newcommand{\datamodifica}{30 Gennaio 2011}
\newcommand{\stato}{formale}
\newcommand{\uso}{interno}
\newcommand{\redazione}{Mandolo Andrea}
\newcommand{\verifica}{---}
\newcommand{\approvazione}{---}
\newcommand{\distribuzione}{
VT.G \\
& Prof. Vardanega Tullio\\
& Prof. Cardin Riccardo }

\input{preambolo.tex}

\begin{document}

\input{homepage.tex}

% REGISTRO MODIFICHE
\section*{Registro delle modifiche}

\begin{longtable}{|p{0.13\textwidth}|c|p{0.2\textwidth}|p{0.46\textwidth}|}
\hline
\rowcolor{orange} \bo{Data} & \bo{Versione} & \bo{Autore} & \bo{Descrizione} \\
\hline
\endhead
\hline
\endfoot 

31/01/2011 & 0.22 & Mandolo Andrea & Aggiunto capitolo Fattibilit\`a e Risorse.\\
\hline
31/01/2011 & 0.21 & Daminato Simone & Inserimento delle tabelle di
tracciamento.\\
\hline
30/01/2011 & 0.20 & Mandolo Andrea & Inserimento del diagramma di sequenza
login.\\
\hline
30/01/2011 & 0.19 & Baron Federico & Inserimento del package exception: testo
e diagramma.\\
\hline
30/01/2011 & 0.18 & Baron Federico & Inserimento dei diagrammi di attivit\`a
con relative spiegazioni.\\
\hline
30/01/2011 & 0.17 & Baron Federico & Integrazione con nuovi contenuti del
capitolo 2.1 Metodo e formalismo di specifica.\\
\hline
30/01/2011 & 0.16 & Daminato Simone & Inserite componenti del package
server.utils.\\
\hline
30/01/2011 & 0.15 & Mandolo Andrea & Inserita Applet di estrazione (3.13)\\
\hline
30/01/2011 & 0.14 & Caputo Cosimo & Inseriti contenuti LibraryService e
LibraryServiceImpl.\\
\hline
30/01/2011 & 0.13 & Baron Federico & Inserite componenti del package
server.persistent.\\
\hline
30/01/2011 & 0.12 & Mandolo Andrea & Inseriti  componenti Service lato client.\\
\hline
29/01/2011 & 0.11 & Daminato Simone & Inserite le descrizioni dei servlet.\\
\hline
29/01/2011 & 0.10 & Baron Federico & Inseriti i diagrammi delle classi e dei
package aggiornati.\\
\hline
29/01/2011 & 0.9 & Caputo Cosimo & Inseriti contenuti package ui, activity,
places e mvp.\\
\hline
29/01/2011 & 0.8 & Daminato Simone & Inserite descrizioni delle eccezioni in
shared.\\
\hline
28/01/2011 & 0.7 & Mandolo Andrea & Inseriti contenuti package client e ui.\\
\hline
28/01/2011 & 0.6 & Baron Federico & Reinserimento di tutti i grafici UML con
cambio di stile.\\
\hline
28/01/2011 & 0.5 & Daminato Simone & Inserite descrizioni delle classi *DTO
nel package shared.\\
\hline
28/01/2011 & 0.4 & Mandolo Andrea & Inserita traccia dell'intero capitolo 2.\\
\hline
27/01/2011 & 0.3 & Baron Federico & Redazione del capitolo 2.2.1 Design
patterns.\\
\hline
27/01/2011 & 0.2 & Mandolo Andrea & Inserita presentazione dell'architettura
generale del sistema.\\
\hline
21/01/2011 & 0.1 & Mandolo Andrea & Creato documento iniziale.\\

\end{longtable}

% INDICE
\tableofcontents

\chapter*{Sommario}
Il presente documento fornisce la descrizione ad alto livello dell'architettura
del sistema Netmus, riservando particolare attenzione alle motivazioni e ai
metodi utilizzati per l'identificazione delle principali componenti, alla loro
struttura, funzione e alle relazioni d'uso. Vengono infine presentati una stima
della fattibilit\`a e delle risorse necessarie e il tracciamento delle
componenti sui requisiti, descritti in dettaglio nel documento
\emph{Analisi dei requisiti (ver. 2.0)}.


\thispagestyle{fancy} % serve perche' nelle pagine di inizio Chapter esca header e footer
\pagenumbering{arabic} % INIZIO NUMERAZIONE NORMALE
\rfoot{\thepage\ di \pageref{TotPages}}
\addcontentsline{toc}{chapter}{Sommario}

\chapter{Introduzione}
\thispagestyle{fancy} % serve perche' nelle pagine di inizio Chapter esca header e footer

\section{Scopo del documento}
Lo scopo della Specifica Tecnica \`e quello di illustrare le scelte progettuali
che il gruppo ha deciso di seguire nella realizzazione del prodotto. Vengono
presentati, pur restando ad alto livello, la gerarchia dei package, le loro
interazioni e le principali classi in essi contenute.

\input{parte_comune.tex}

\chapter{Definizione del Prodotto}
\section{Metodo e formalismo di specifica}
Il processo di progettazione architetturale svolto da VT.G per la
realizzazione di NetMus verr\`a presentato per intero nel seguente documento. Per
facilitarne la comprensione si utilizzeranno diagrammi aderenti allo
standard di modellazione UML 2.x, nello specifico verranno illustrati diagrammi
dei package, delle classi, di attivit\`a e di sequenza.
In accordo con l'approccio top-down impiegato durante la progettazione, i
contenuti sono stati organizzati in modo da mostrare come prima cosa
l'architettura macroscopica del sistema per poi scendere pi\`u nel dettaglio
proseguendo nel documento.\\
Molto importante per la comprensione del documento \`e il capitolo 2.1 dedicato
ai design patterns poich\'e rappresenta, insieme all'analisi dei requisiti, la
base dell'architettura realizzata.
\\\\
Per le norme riguardanti il tracciamento delle componenti con i requisiti e le
regole generali di stesura dei documenti e tecnologie utilizzate si fa
riferimento al documento \emph{Norme di progetto (ver. 2.0)} ai capitoli 3 e 4.

\section{Presentazione dell'architettura generale del sistema.}

\subsection{Design patterns utilizzati}
Nei seguenti paragrafi sono presentati i design patterns utilizzati per
sviluppare l'architettura di NetMus. Alcuni di questi derivano dall'utilizzo
delle tecnologie GAE e GWT che forniscono dei frameworks che implementano
patterns considerati best-practices per queste particolari tecnologie.

\subsubsection{L'importanza dei design patterns in NetMus}
La via intrapresa da VT.G nello sviluppo del sistema NetMus comprende il forte
utilizzo dei design patterns al fine di produrre un software il pi\`u
possibile manutenibile ed estendibile e che quindi mantenga un ciclo di
vita equilibrato. 
I design patterns inibiscono l'ispirazione dei programmatori dove
questa non \`e necessaria e piuttosto forniscono un modo universalmente
riconosciuto di produrre software ben architettato e facilmente manutenibile.
MVP in particolare \`e il pattern pi\`u utilizzato sulla piattaforma Google Web
Toolkit ed \`e quindi sostenuto egregiamente dagli strumenti offerti da
Google.

\newpage
\subsubsection{Model View Presenter (MVP) }
La potenza di questo pattern architetturale \`e quella di separare tre
importantissime componenti riducendo l'accoppiamento e facilitando i processi di
verifica e validazione:
\begin{itemize}
  \item{\bo{View} }
  costituisce l'interfaccia utente che comprende tutte le componenti utili alla
  visualizzazione.
  \item{\bo{Model} }
  contiene i dati che dovranno essere mostrati. 
  \item{\bo{Presenter} }
  \`e la componente fondamentale, si occupa di mandare i dati del model
  all'interfaccia utente e viceversa. Pu\`o inoltre gestire gli eventi scatenati
  da altre parti del sistema o avviare i propri grazie alla comunicazione diretta
  con un event bus.

\end{itemize}    
\begin{figure}[!h]
\centering
\includegraphics[width=8.5cm]{img/ST/mvp.png}
\caption{Architettura tipica di MVP utilizzando Google Web Toolkit}
\end{figure}

Nel nostro caso questo design pattern sar\`a implementato con il framework MVP con
Activities e Places offerto da GWT 2.1 che semplifica la gestione di alcuni
aspetti consolidati di MVP. In questo framework le Activities svolgono il ruolo
di Presenter e i Places rappresentano gli stati della UI.
\begin{itemize}
  \item{\bo{Activity} }
  \`e l'analogo di presenter in MVP tradizionale. Non contiene alcun componente
  grafico ed il suo avvio e la sua terminazione sono gestite da un
  ActivityManager.
  \item{\bo{Place} }
   in GWT 2.1 rappresenta un particolare stato della UI e viene
  utilizzato anche per tenere una history degli URL che \`e fondamentale per una
  Web Application.

\end{itemize} 
\begin{figure}[h]
\centering
\includegraphics[width=7cm]{img/ST/mvpap.png}
\caption{Comparazione tra MVP tradizionale e MVP con Activities e Places}
\end{figure}

\newpage

\subsubsection{Data Access Object (DAO)  e  Data Transfer Object (DTO)}
\begin{figure}[h]
\centering
\includegraphics[width=15cm]{img/ST/DAO_DTO.png}
\caption{Diagramma UML delle classi che descrive la struttura dell'utilizzo
simultaneo dei patterns DAO e DTO}
\end{figure}
Questi patterns vengono introdotti all'interno della componente model di MVP e
riguardano gli oggetti utilizzati per l'incapsulamento dei dati nelle
comunicazioni tra client, server e database. 
Il DAO (Data Access Object) \`e un pattern semplice ma fondamentale per
stratificare ed isolare gli accessi al database dalla parte logica
dell'applicazione, nel nostro caso le Activity di MVP. L'implementazione \`e
fondamentalmente una classe che rappresenta un'entit\`a tabellare di un database.
Questi oggetti estratti dal database in alcuni casi possono essere utilizzati
per la comunicazione con i clients ma hanno pesanti restrizioni dovute alla
grande quantit\`a di informazioni e procedure che contengono, per questo motivo
abbiamo deciso di affiancare a DAO anche il pattern Data Transfer Object. Gli
oggetti DTO saranno quelli che verranno scambiati nella comunicazione tra client
e server con il vantaggio di essere pi\`u essenziali dei DAO e la possibilit\`a di
costituire dei pacchetti su misura per la comunicazione. La logica del
tracciamento tra DAO e DTO sar\`a a carico degli oggetti DAO.
\\
Per questo scopo GWT 2.1 propone un potente framework per gestire la
comunicazione tra client e server, Request Factory, che implementa i patterns
precedentemente descritti. Abbiamo deciso per\`o di non utilizzarlo, progettando
una nostra implementazione, a causa della documentazione insufficiente fornita
da Google.

\newpage
\subsubsection{Abstract factory}
Un abstract factory \`e rappresentata da un'interfaccia che permette di creare dei
prodotti senza specificare classi concrete.

\begin{figure}[h]
\centering
\includegraphics[width=16.5cm]{img/ST/AbstractFactory.png}
\caption{Diagramma UML delle classi che descrive la struttura tradizionale di
Abstract factory}
\end{figure}
Nello specifico lo utilizzeremo per rendere facilmente configurabile il nostro
sistema. L'interfaccia ClientFactory sar\`a utilizzata per ottenere le
interfacce degli elementi architetturali necessari alla nostra applicazione come
ad esempio l'event bus e le varie UI.
Per caricare le differenti implementazioni di ClientFactory a seconda delle
peculiarit\`a dell'utente che vi accede \`e molto conveniente utilizzare il GWT
deferred binding offerto dal toolkit stesso.
Il pattern in questione verr\`a utilizzato per una evidente convenienza in termini
di estendibilit\`a per il futuro anche se allo stadio attuale la factory
implementata sar\`a solamente una.

\newpage
\subsubsection{Singleton}
\begin{figure}[h]
\centering
\includegraphics[width=4cm]{img/ST/Singleton.png}
\caption{Diagramma UML delle classi che descrive l'implementazione del design
pattern Singleton}
\end{figure}
Singleton \`e un design pattern creazionale che ha lo scopo di assicurare
l'esistenza di una sola istanza di una certa classe ed avere un punto di accesso
globale a quest'ultima. 
L'implementazione di Singleton diminuisce in generale l'accoppiamento del
sistema.
Utilizzeremo questo pattern per una classe (\co{PMF}, persistent manager
factory) che si occuper\`a di creare degli speciali oggetti introdotti da JDO per la
comunicazione con il database (query). \`E molto importante che venga creata una
sola istanza di \co{PMF} e che questa sia visibile nell'intero lato server del
sistema NetMus.

\newpage
\subsection{Decomposizione architetturale}
La decomposizione architetturale, da noi individuata a partire dalla lista dei
requisiti e prodotta nel processo di analisi, si compone di tre moduli
fondamentali distribuiti su una parte client e una server. Questi tre moduli, in
accordo con il framework \emph{MVP con Activities e Places} precedentemente
presentato, sono il model, che riguarda le parti di business logic e business
data, la view, che contiene l'intera parte grafica del sistema (UI) con i
relativi stati (Places) e il presenter che costituisce il collegamento tra view
e model attraverso le Activities.
\\\\
La struttura sar\`a quindi formata dai seguenti packages:
\begin{figure}[h]
  \centering
  \includegraphics[width=16cm]{img/ST/PackageGeneric.png}
\caption{Diagramma dei package principali di Netmus.}
\end{figure}

\begin{itemize}
  \item Package \emph{client} : definisce la parte client del programma
  \begin {itemize}
    \item Package \emph{client.ui} : comprende l'insieme di viste del sistema,
    utilizzando il framework \emph{MVP con Places e Activities}. Ci sar\`a una
    interfaccia per ogni vista, per dare la possibilit\`a di creare in futuro
    pi\`u implementazioni differenti a seconda del dispositivo client;
    \item Package \emph{client.activity} : rappresenta l'insieme di classi
    controllori che formano la logica del sistema. Esse mandano dati aggiornati alle
    viste, gestiscono le loro richieste e quelle provenienti da altre componenti
    e inoltre inviano eventi propri nell'event-bus;
    \item Package \emph{client.place} : comprende l'insieme di classi Place le
    quali rappresentano un URL associato ad una vista. Gestiscono i parametri
    agganciati all'URL con un Tokenizer interno;
    \item Package \emph{client.mvp} : comprende un ActivityMapper e
    un PlaceHistoryMapper che tracciano per ogni Place la corrispondente
    Activity e gestiscono la cronologia dei Place;
    \item Package \emph{client.service} : rappresenta l'insieme di interfacce
    che offrono un servizio di comunicazione col server tramite GWT RPC;
    %----------------- TOGLIERE FORSE --------------------
    \item Package \emph{client.applet} : definisce la componente di
    ricezione dei dati estratti dall'Applet precompilata;
    %-------------------------------------------------------
  \end {itemize}
  \item Package \emph{server} : rappresenta la parte server di Netmus;
  \begin{itemize}
    \item Package \emph{server.persistent} : comprende tutte le classi che
    rappresentano un entit\`a JDO (Java Data Object), usate per lo scambio dati tra
    server e Google Datastore;
    \item Package \emph{server.servlet} : comprende tutte le servlet utilizzate
    per interfacciarsi a servizi esterni (es. Google Authentication, YouTube);
    \item Package \emph{server.utils} : comprende classi di utilit\`a per
    svolgere attivit\`a interne al server di varie tipologie;
  \end{itemize}
  \item Package \emph{shared} :  contiene classi condivise tra client e server,
  che verranno anch'esse compilate in JavaScript da GWT, come tutto il package
  client. La maggior parte saranno gli oggetti di trasferimento che
  aderiscono al pattern DTO.
\end{itemize}

\newpage
\subsubsection{Decomposizione architetturale - lato client}
Per soddisfare i requisiti funzionali del sistema NetMus sono state individuate
4 componenti che implementano altrettante UI con la relativa logica di
attivazione delle Activities. Queste sono Login, User, EditProfile e EditSongs
che, grazie all'interazione tra le loro parti view, place e activity,
garantiscono all'utente tutte le funzionalit\`a attese.\\
Le interfacce Service invece rappresentano il punto di collegamento con il model
la cui implementazione \`e sviluppata principalmente lato server. Queste
interfacce, infatti, vengono accedute dalle Activities poich\'e forniscono tutti i
metodi riguardanti la business logic. \\\\ 
L'intero schema delle classi individuate durante la progettazione \`e il
seguente: 
\begin{figure}[h]
  \centering
  \includegraphics[width=16.5cm]{img/ST/client.png}
\caption{Diagramma delle classi del package client.}
\end{figure}
\newpage
\subsubsection{Decomposizione architetturale - lato server}
Nella parte server si trovano le implementazioni dei Service che hanno
la possibilit\`a di accedere alle informazioni presenti nel database grazie alle
classi DAO presenti nel package \emph{persistent}.
Grande importanza viene data alle classi presenti nel package \emph{shared}
poich\'e rendono allo stesso tempo semplice ed efficiente il passaggio di
informazioni tra il server e i clients poich\'e incapsulano gli oggetti di
persistenza DAO rimuovendone la parte logica, rispettando il design pattern DTO.
\\\\ L'intero schema delle classi
individuate durante la progettazione \`e il seguente: 
\begin{figure}[h]
  \centering
  \includegraphics[width=16.5cm]{img/ST/Server&Shared.png}
\caption{Diagramma delle classi dei packages server e shared.}
\end{figure}

\subsubsection{Decomposizione architetturale - diagrammi delle attivit\`a}
Nella realizzazione di un'applicazione Web l'efficienza e la
qualit\`a della visualizzazione dei contenuti assumono grande importanza per cui
buona parte della struttura di NetMus lavorer\`a al fine di garantire queste
componenti. \\
Di seguito viene illustrato un diagramma UML delle attivit\`a che descrive il
procedimento di visualizzazione della pagina di profilo utente a partire
dall'accesso all'applicazione, procedimento che si ripete in modo del tutto
analogo per la visualizzazione delle altre UI previste in NetMus.
\begin{figure}[h]
  \centering
  \includegraphics[width=16.5cm]{img/ST/profile.png}
\caption{Diagramma delle classi che descrive il procedimento di
visualizzazione della pagina di profilo utente.}
\end{figure}
\\\\\\Come possiamo vedere all'avvio dell'applicazione \`e sempre necessario
effettuare il login e per visualizzare la pagina di profilo utente bisogna accedervi
richiedendo l'URL corrispondente (rappresentato dalla classe \co{ProfilePlace}),
vi sar\`a anche un reindirizzamento automatico alla fine della procedura di
login.\\ 
Una volta richiesta la pagina avverranno in sequenza le seguenti attivit\`a:
\begin{itemize}
  \item i dati di login dell'utente vengono inviati da \co{ProfileActivity},
  tramite \co{ProfileService} che li incapsula in oggetti DTO (\co{LoginDTO}),
  al server
  \item viene cercato nel database il catalogo multimediale e tutti
  gli altri dati relativi all'utente proprietario del login ricevuto
  \item le informazioni ed il catalogo dell'utente, o un nuovo catalogo vuoto se
  l'utente non lo aveva ancora creato, vengono restituito al client sempre
  incapsulate in una classe DTO (\co{UserCompleteDTO})
  \item La UI \co{ProfileView} inserisce i dati presenti in \co{UserCompleteDTO}
  nei propri moduli grafici, la pagina \`e pronta e completa di tutti i suoi
  contenuti.
\end{itemize}

La sotto-attivit\`a di login sopra citata viene dettagliata dal prossimo diagramma
delle attivit\`a.
\begin{figure}[!h]
  \centering
  \includegraphics[width=15cm]{img/ST/login.png}
\caption{Diagramma delle attivit\`a che descrive in dettaglio la
sotto-attivit\`a di login.}
\end{figure}
\\
I sistemi di login offerti sono due, quello di Google ed uno specifico
dell'applicazione NetMus e la sequenza di attivit\`a svolte durante il
procedimento di login \`e la seguente:
\begin{itemize}
  \item verifica che l'utente non sia gi\`a autenticato
  \item visualizzazione della UI \co{LoginView} che prevede la possibilit\`a di
  scegliere tra le due modalit\`a di login
  \item ricezione dei dati di login immessi dall'utente (in entrambi i casi)
  \item verifica della correttezza dei dati inserti (nel database interno per
  autenticazione NetMus e facendo una richiesta esterna tramite
  \co{LoginGoogleServlet} nel caso di autenticazione Google).
  \item Fine del login se i dati sono corretti, ritorno a \co{LoginView} con la
  possibilit\`a di effettuare la registrazione altrimenti.
\end{itemize}

\vspace{1cm}
Con il seguente diagramma di sequenza possiamo vedere in dettaglio come le
classi che fanno parte dell'architettura di NetMus si relazionano fra di loro
durante l'attivit\`a di login:

\begin{figure}[h]
  \centering
  \includegraphics[width=16.5cm]{img/ST/seq-login.png}
\caption{Diagramma di sequenza che descrive in dettaglio l'attivit\`a di login}
\end{figure}


\chapter{Descrizione dei singoli componenti}
\section{Package client}
\subsection*{Tipo, obiettivo e funzione del componente} % LASCIARE WARNING
Il package \emph{client} rappresenta la parte del sistema con la quale l'utente
pu\`o interagire. Tutte le sue classi ed i suoi sottopackage saranno compilati in
JavaScript da GWT, prima che il sistema venga depositato nel dominio
\emph{appspot.com} di Google. Contiene la classe \underline{Entry Point}
\co{Netmus}.

\subsection*{Relazioni d'uso di altre componenti}
Il package \emph{client} utilizza i DTO nel package \emph{shared}.

\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.

\subsection*{Attivit\`a svolte e dati trattati}
Le attivit\`a svolte dalle sue classi verranno qui di seguito descritte.

\subsection{Classe Netmus}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe rappresenta l'Entry Point di GWT che genera tutte le altre
componenti e rende disponibile e visibile l'intero sistema.\\
In particolare andr\`a a creare dinamicamente il ClientFactoryImpl adatto, nel
caso ce ne fossero diversi, e lo aggancia insieme all'EventBus al nostro
\co{NetmusPlaceHistoryMapper} ed al \co{NetmusActivityMapper}.
Inoltre allaccia al body Html il widget principale dell'applicazione.

\subsubsection*{Relazioni d'uso di altre componenti}
La classe \co{Netmus} utilizza le classi \co{ClientFactory},
\co{NetmusActivityMapper} e \\\co{NetmusPlaceHistoryMapper}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.

\subsubsection*{Attivit\`a svolte e dati trattati}
\co{Netmus} praticamente si occupa di avviare il sistema e portare l'utente alla
pagina iniziale di Login o, se gi\`a loggato, alla sua pagina Profilo.

\subsection{Classe ClientFactoryImpl (\emph{Abstract Factory})}
\subsubsection*{Tipo, obiettivo e funzione del componente}
In Netmus \`e disponibile un'unica implementazione dell'interfaccia
ClientFactory, poich\'e per il momento non \`e contemplato un utilizzo di
alternative all'interfaccia utente desktop.
Nella classe si definiscono le propriet\`a di un vista (desktop) del
sistema.

\subsubsection*{Relazioni d'uso di altre componenti}
La classe utilizza \co{EventBus}, \co{PlaceController}, \co{LoginView},
\co{ProfileView}, \co{EditUserView} e
\co{EditSongView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\co{Netmus} crea l'istanza della classe. L'interfaccia \co{ClientFactory} \`e
utilizzata da \co{ActivityMapper} e successivamente dalle \co{Activity} per
l'utilizzo dell'EventBus.
\subsubsection*{Attivit\`a svolte e dati trattati}
La classe si occupa di istanziare l'event bus, il place controller e le varie
view. L'event bus gestisce le comunicazioni tra componenti, il place
controller permette la navigazione tra i Place ed \`e si occupa di avvisare
l'utente prima del passaggio ad uno stato differente.


\newpage
\section{Package client.ui} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{ui} contiene le interfacce e le implementazioni delle View del
sistema. Le View generano gli ambienti grafici con cui gli utenti possono
interagire e si occupano di catturare gli eventi da essi prodotti.

\subsection*{Relazioni d'uso di altre componenti}
Questo package utilizza \emph{place} per creare istanze dei vari Place quando
richiesto.

\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzato dal package \emph{activity}.

\subsection*{Attivit\`a svolte e dati trattati}
In sostanza svolge il compito di organizzare le informazioni del model in un
interfaccia accessibile dall'utente.

\subsection{Classe LoginView}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Il sistema mette a disposizione una vista per l'autenticazione e la
registrazione degli utenti Netmus. La classe \co{LoginViewImpl}
implementa l'interfaccia \co{LoginView} che estende \co{isWidget}
(interfaccia introdotta da GWT 2.1).
\subsubsection*{Relazioni d'uso di altre componenti}
La classe istanzia oggetti di tipo \co{LoginPlace} che definiscono gli stati
attuali della vista.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La vista viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
\co{LoginActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
La classe permette all'utente di scegliere il tipo di registrazione da
effettuare (Google o Netmus), contiene una form per l'inserimento password e
nome utente e pu\`o visualizzare warning se i dati inseriti non sono corretti.

\subsection{Classe ProfileView}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Il sistema mette a disposizione una vista per la visualizzazione dei profili e
dei brani degli altri utenti registrati. La classe \co{ProfileViewImpl}
implementa l'interfaccia \co{ProfileView} che estende \co{isWidget}
(interfaccia introdotta da GWT 2.1).
\subsubsection*{Relazioni d'uso di altre componenti} 
La classe istanzia oggetti di tipo \co{ProfilePlace} che definiscono gli stati
attuali della vista.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
 La vista viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
 \co{ProfileActivity}.
 \subsubsection*{Attivit\`a svolte e dati trattati}
Contiene la lista dei profili che l'utente pu\`o visualizzare e gli strumenti
per navigare tra i cataloghi musicali.

\subsection{Classe EditUserView}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Il sistema mette a disposizione una vista per la
modifica delle informazioni personali dell'utente registrato. La classe
\co{EditUserViewImpl} implementa l'interfaccia \co{EditUserView} che estende
\co{isWidget} (interfaccia introdotta da GWT 2.1).

\subsubsection*{Relazioni d'uso di altre componenti}
La classe istanzia oggetti di tipo \co{EditUserPlace} che definiscono gli stati
attuali della vista.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La vista viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
\co{EditUserActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Mette a disposizione gli strumenti per la modifica delle informazioni personali
dell'utente registrato.

\subsection{Classe EditSongsView}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Il sistema mette a disposizione una vista per visualizzazione e la modifica del
catalogo brani utente. La classe \co{EditSongsViewImpl} implementa l'interfaccia
\co{EditSongsView} che estende \co{isWidget} (interfaccia introdotta da GWT
2.1).
\subsubsection*{Relazioni d'uso di altre componenti}
La classe istanzia oggetti di tipo \co{EditSongsPlace} che definiscono gli stati
attuali della vista.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La vista viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
\co{EditSongsActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Permette di visualizzare e aggiungere o rimuovere manualmente brani dalla
propria libreria musicale. La rimozione di informazioni non influenza i dati che
Netmus salva sul database.

\newpage
\section{Package client.activity} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Questo package contiene le classi Activity che implementano le funzionalit\`a
usabili da un certo Place. Corrisponde in pratica alla componente Presenter del
pattern MVP originale.
\subsection*{Relazioni d'uso di altre componenti}
Il package usa gli oggetti View di \emph{ui} e Place di \emph{place} per gestire
informazioni di stato o modificatori della vista, ma quando serve pu\`o
utilizzare servizi forniti da \emph{service}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti} 
Le istanze delle classi Activity vengono create dal \co{NetmusActivityMapper}
che quando, riceve una richiesta di una Activity, ritorna una corretta istanza
di tale classe, in base al Place corrente.
\subsection*{Attivit\`a svolte e dati trattati}
Il package \emph{activity} si pu\`o considerare il boss, poich\'e gestisce
l'intera logica di business del client.

\subsection{Classe LoginActivity}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe sar\`a di tipo \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{LoginView} e dovr\`a fornire i servizi destinati ad autenticare
o registrare l'utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Invoca i servizi di autenticazione forniti da \co{LoginService} e utilizza
le relative classi \co{LoginPlace} e \co{LoginView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} 
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{LoginPlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe gestir\`a, assieme a \co{LoginService}, le richieste di login,
logout, registrazione solo a Netmus, registrazione tramite Google.

\subsection{Classe ProfileActivity}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe estende \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{ProfileView} e fornir\`a i servizi
che il profilo utente dovr\`a offrire all'utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Invoca i servizi di interrogazione e modifica dei dati profilo forniti da
\co{UsersService} e utilizza le relative classi \co{ProfilePlace} e
\co{ProfileView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{ProfilePlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe gestisce, assieme a \co{UsersService}, le attivit\`a utili alla
creazione ed interazione con l'utente della pagina principale come: la
richiesta dei dati utente dettagliati, della lista dei brani, del dettaglio di
un brano, ecc.

\subsection{Classe EditUserActivity}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe estende \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{EditUserView} e fornisce i servizi per la modifica dei dati
personali.
\subsubsection*{Relazioni d'uso di altre componenti}
Invoca i servizi di interrogazione e modifica dei dati profilo forniti da
\co{UsersService} e utilizza le relative classi \co{EditUserPlace} e
\co{EditUserView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{EditUserPlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe gestisce, assieme a \co{UsersService}, le attivit\`a utili alla
modifica delle informazioni personali visualizzate nel profilo.

\subsection{Classe EditSongsActivity}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe estende \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{EditSongsView} e fornisce i servizi per la visualizzazione e la
modifica della libreria musicale.
\subsubsection*{Relazioni d'uso di altre componenti} Invoca i servizi di
interrogazione e modifica dei dati musicali forniti da \co{SongsService} e
utilizza le relative classi \co{EditSongsPlace} e \co{EditSongsView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{EditSongsPlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe gestisce, assieme a \co{songsService}, le attivit\`a utili alla
visualizzazione e modifica della libreria musicale personale.

\newpage
\section{Package client.place} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Il package contiene le classi di tipo Place. I Place sono indispensabili
per far s\`i che la corrispondente Activity sia accessibile via URL.
\subsection*{Relazioni d'uso di altre componenti}
A questo package appartengono le classi \co{LoginPlace}, \co{ProfilePlace},
\co{EditUserPlace}, \\\co{EditSongsPlace}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
 I suoi elementi vengono utilizzati dal package \emph{mvp}.
\subsection*{Attivit\`a svolte e dati trattati}
Organizza i Places.

\subsection{Classe LoginPlace}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{LoginPlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{LoginView} utilizzata da \co{LoginActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Il compito della classe \`e quello di indicizzare gli stati di
\co{LoginActivity} in modo da rendere accessibili le funzionalit\`a di history e
bookmarking del browser.

\subsection{Classe ProfilePlace}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{ProfilePlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{ProfileView} utilizzata da \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Il compito della classe \`e quello di indicizzare gli stati di
\co{ProfileActivity} in modo da rendere accessibili le funzionalit\`a di history
e bookmarking del browser.

\subsection{Classe EditUserPlace}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{EditUserPlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{EditUserView} utilizzata da \co{EditUserActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Il compito della classe \`e quello di indicizzare gli stati di
\co{EditUserActivity} in modo da rendere accessibili le funzionalit\`a di
history e bookmarking del browser.

\subsection{Classe EditSongsPlace}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{EditSongsPlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{EditSongsView} utilizzata da \co{EditSongsActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Il compito della classe \`e quello di indicizzare gli stati di
\co{EditSongsActivity} in modo da rendere accessibili le funzionalit\`a di
history e bookmarking del browser.

\newpage
\section{Package client.mvp} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Il package contiene le classi funzionali al meccanismo delle Activity e dei
Places.
\subsection*{Relazioni d'uso di altre componenti}
Fanno parte di questo package le classi \co{NetmusHistoryMapper} e
\co{NetmusActivityMapper}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.
\subsection*{Attivit\`a svolte e dati trattati}
Le attivit\`a svolte dalle sue classi verranno qui di seguito descritte.

\subsection{Classe NetmusActivityMapper}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe si occupa di mappare ogni attivit\`a con il corrispondente Place.
\subsubsection*{Relazioni d'uso di altre componenti}
La classe utilizza istanze di classi appartenenti al package
\emph{client.place} e crea istanze di classi appartenenti al package
\emph{client.activity}.
\subsubsection*{Interfacce con e relazioni d'uso da altre
componenti} Nessuna
\subsubsection*{Attivit\`a svolte e dati trattati}
Tramite un riferimento ad un Place crea e restituisce un oggetto activity.

\subsection{Classe NetmusPlaceHistoryMapper}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Dichiara e riferisce tutti i places che saranno utilizzati da Netmus.
\subsubsection*{Relazioni d'uso di altre componenti}
Utilizza i PlaceTokenizer
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Il PlaceHistoryHandler utilizza la classe per la sincronizzazione del URL.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da connessione tra i PlaceTokenizer (classe interna ad ogni Place) e il
PlaceHistoryHandler (messo a disposizione da GWT) che sincronizza l'URL del
browser con i vari Place.

\newpage
\section{Package client.service} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \co{service} \`e costituito da tutte le interfacce dei servizi remoti
offerti dal server. Le funzionalit\`a delle classi in esso contenute saranno
divise in base al tipo di servizio offerto.  Per ognuno di questi sar\`a
presente un'interfaccia normale (che estende \co{RemoteService}) e un
interfaccia \bo{asincrona}.

\subsection*{Relazioni d'uso di altre componenti}
Queste interfacce vengono implementate su \emph{server}, perci\`o non
hanno relazioni d'uso definite. Verranno sempre usati oggetti DTO (definiti in
\emph{shared}) come pacchetti di scambio nei servizi tra \emph{client} e
\emph{server}.

\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Verranno istanziati degli oggetti di \emph{service} col metodo del
\emph{deferred binding} dalla classe di Entry Point \co{Netmus}, pur avendo
visibilit\`a solamente delle interfacce. Verranno poi usati dalle varie Activity.

\subsection*{Attivit\`a svolte e dati trattati}
Vengono forniti tutti i servizi che il server sar\`a in grado di dare, i dati
trattati saranno i DTO definiti nel package \emph{shared}.

\subsection{Interfaccia SongsService (e SongServiceAsync)}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe dovr\`a consentire alle componenti Activity di \emph{client} di
inviare richieste di vario tipo a \emph{server} riguardanti informazioni sui
brani musicali. Sar\`a presente anche \co{SongServiceAsync}, che gestir\`a il ritorno
dai metodi in maniera asincrona.

\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con gli oggetti DTO
(\co{UserDTO, SongDTO}, \co{SongSummaryDTO}, \co{MusicLibraryDTO}) che verranno
utilizzati per il trasferimento client-server.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{ProfileActivity} ed \co{EditSongsActivity}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante i brani musicali e utilizzer\`a dati di tipo SongDTO
e SongSummaryDTO.

\subsection{Interfaccia UsersService (e UsersServiceAsync)}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe consentir\`a alle componenti Activity di \emph{client} di inviare
richieste di vario tipo a \emph{server} riguardanti le informazioni personali
dell'utente da mostrare  nell'interfaccia grafica. Sar\`a presente anche
\co{UsersServiceAsync}, che gestir\`a il ritorno dai metodi in maniera asincrona.

\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con gli oggetti DTO (\co{UserDTO},
\co{UserSummaryDTO}, \co{UserCompleteDTO}) che verranno utilizzati per il
trasferimento client-server.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{EditUserActivity} e \co{ProfileActivity}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante gli utenti del sistema e utilizzer\`a dati di tipo
\co{UserDTO}, \co{UserSummaryDTO} e\\\co{UserCompleteDTO}.

\subsection{Interfaccia LibraryService (e LibraryServiceAsync)}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe consentir\`a alle componenti Activity di \emph{client} di inviare
richieste di vario tipo a \emph{server} riguardanti il catalogo musicale utente
da mostrare nell'interfaccia grafica. Sar\`a presente anche
\co{LibraryServiceAsync}, che gestir\`a il ritorno dai metodi in maniera
asincrona.
\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con gli oggetti DTO
(\co{MusicLibraryDTO}) che verranno utilizzati per il trasferimento
client-server.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante la libreria musicale utente e utilizzer\`a dati di
tipo \co{MusicLibraryDTO}.


\subsection{Interfaccia LoginService (e LoginServiceAsync)}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe consentir\`a alle componenti Activity di \emph{client} di inviare
richieste di vario tipo a \emph{server} riguardanti la fase di autenticazione e
logout degli utenti. Sar\`a presente anche \co{LoginServiceAsync}, che gestir\`a
il ritorno dai metodi in maniera asincrona.

\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con oggetti \co{LoginDTO} che
vengono utilizzati per il trasferimento client-server.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata \\\co{LoginActivity} e dalle altre Activity che
permetteranno il logout dell'utente.

\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante gli utenti del sistema e utilizzer\`a dati di tipo
\co{UserDTO}, \co{UserSummaryDTO} e \bo{UserCompleteDTO}.


%--------------- FORSE -------------------------------
\section{Package client.applet} % LASCIARE WARNING
\subsection*{Obiettivo e funzione del componente}
Questo package conterr\`a le classi necessarie a gestire richieste e segnali
provenienti dalla applet precompilata, che andremo ad inserire nel programma.
Tale applet avr\`a la funzione di effettuare la scansione e l'estrazione
automatica dei tag dei file musicali Mp3, presenti nei dispositivi di
archiviazione di massa che vengono collegati alla macchina dell'utente.\\
Per comunicare con tale applet sono state valutate due possibili metodologie
d'implementazione: l'uso di una libreria che crea un sistema proxy tra la applet
e GWT; oppure l'utilizzo di \underline{JSNI} (JavaScript Native Interface) che
sostanzialmente ci permetterebbe di fare chiamate da JavaScript al codice Java e
vice versa.

\subsection*{Meccanismo di lavoro del componente}
Una volta ricevuta una richiesta da parte della applet, verr\`a gestita da un
Service che si occuper\`a di elaborare i dati col supporto del server, per poi
notificare all'utente l'avvenuta estrazione, e fargliela valutare e accettare.
Una volta accettata la lista brani, si richiede la memorizzazione nel DataStore
tramite \co{SongsService}.

%------------------------------------------------------

\newpage
\section{Package server}
\begin{figure}[h]
  \centering
  \includegraphics[width=10cm]{img/ST/Server.png}
\caption{Diagramma delle classi del package server.}
\end{figure}

\subsection*{Tipo, obiettivo e funzione del componente} % LASCIARE WARNING
Questo package racchiude tutte le classi che collaborano al fine di gestire la
business logic del sistema, ovvero tutte quelle operazioni che potranno essere
compiute sui dati raccolti. Contiene inoltre delle classi di interfacciamento
con il DataStore stesso che consentono il controllo sulla persistenza dei dati.

\subsection*{Relazioni d'uso di altre componenti}
Si fa utilizzo delle classi presenti nel package \emph{shared} in cui vengono
incapsulati tutti i dati in uscita del server.

\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Il package \emph{server} si interfaccia direttamente con \emph{shared} e tramite
questo e con la presenza del package \emph{service} si interfaccia anche con
\emph{client}.

\subsection*{Attivit\`a svolte e dati trattati}
Le attivit\`a svolte dalle sue classi verranno qui di seguito descritte.

\subsection{Classe SongsServiceImpl}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{SongsService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}.

\subsubsection*{Relazioni d'uso di altre componenti}
Oltre ad utilizzare ovviamente i DTO in \emph{shared}, verranno creati,
immagazzinati oppure usati i relativi oggetti \emph{persistent}.
Potranno essere usati opportuni servizi \emph{servlet} per andare a prelevare
informazioni sui brani da servizi esterni oppure per cercare il corrispettivo
link di streaming audio-video (tipo YouTube).

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata dal \emph{client} che ne genera un istanza tramite deferred binding,
utilizzando l'interfaccia \co{SongsService}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Descritte nell'interfaccia lato \emph{client}.

\subsection{Classe UsersServiceImpl}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{UsersService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}.

\subsubsection*{Relazioni d'uso di altre componenti}
Oltre ad utilizzare ovviamente i DTO in \emph{shared}, verranno creati,
immagazzinati oppure usati i relativi oggetti \emph{persistent}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata dal \emph{client} che ne genera un istanza tramite deferred binding,
utilizzando l'interfaccia \co{UsersService}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Descritte nell'interfaccia lato \emph{client}.

\subsection{Classe LoginServiceImpl}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{LoginService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}.

\subsubsection*{Relazioni d'uso di altre componenti}
Utilizzer\`a i DTO in \emph{shared} e utilizzer\`a le \co{HttpSession} per
gestire le sessioni dell'utente e dargli o meno i diritti d'accesso.
Verranno utilizzate funzionalit\`a interne di gestione login definite in
\co{LoginHelper}. Potranno essere usate opportune classi \emph{servlet} per
andare ad utilizzare servizi di login e reperimento informazioni utente esterni
(Google Account).

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata dal \emph{client} che ne genera un istanza tramite deferred binding,
utilizzando l'interfaccia \co{LoginService}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Descritte nell'interfaccia lato \emph{client}.

\subsection{Classe LibraryServiceImpl}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{LibraryService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}.

\subsubsection*{Relazioni d'uso di altre componenti}
Oltre ad utilizzare ovviamente i DTO in \emph{shared}, verranno creati,
immagazzinati oppure usati i relativi oggetti \emph{persistent}.
Potranno essere usate opportune classi in \emph{servlet} per andare ad
utilizzare servizi di login e reperimento informazioni utente esterni (Google
Account).

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata dal \emph{client} che ne genera un istanza tramite deferred binding,
utilizzando l'interfaccia \co{LibraryService}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Descritte nell'interfaccia lato \emph{client}.

\subsection{Classe LoginHelper}
\subsubsection*{Tipo, obiettivo e funzione del componente}
La classe \co{LoginHelper} \`e stata pensata per offrire funzionalit\`a statiche
per gestire le sessioni HTML, utili a \co{LoginServiceImpl} ed a \emph{servlet}.

\subsubsection*{Relazioni d'uso di altre componenti}
User\`a al suo interno le classi di utilit\`a per i servlet definite in
\emph{utils} e l'oggetto di persistenza \co{UserAccount}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa classe viene utilizzata da \co{LoginServiceImpl} e nel package
\emph{servlet} dalle classi dedicate al Login.

\subsubsection*{Attivit\`a svolte e dati trattati}
Le funzionalit\`a che metter\`a a disposizione sono quelle di individuare se
l'utente corrente \`e gi\`a loggato o meno, e di riprendere la
sessione restituendo un \emph{persistent} \co{UserAccount} nel caso esso sia
gi\`a loggato.

\subsection{Classe PMF (Singleton)}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{PMF} \`e una classe final che segue il pattern Singleton, illustrato
nell'introduzione. Ha la funzione di creare un'unica istanza del
\co{PersistentManagerFactory} (\emph{javax.jdo})e di restituirla a qualunque
oggetto la richieda. Quest'ultimo da la possibilit\`a di interagire con il DataStore, inviando
query, memorizzando oggetti \emph{persistent} o richiedendo liste di oggetti
tramite semplici metodi.

\subsubsection*{Relazioni d'uso di altre componenti}
Vengono usate le classi di \emph{javax.jdo} \co{PersistentManager},
\co{PersistentManagerFactory}\\ e \co{JDOHelper}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa classe pu\`o essere utilizzata da qualunque classe di \emph{server}, ogni
qualvolta ci sia bisogno di avere il \co{PersistentManager} per interagire col
DataStore.

\subsubsection*{Attivit\`a svolte e dati trattati}
Crea un'unica istanza del \co{PersistentManagerFactory} e tramite un metodo
statico \emph{get()} la passa alle classi, in maniera da dargli la possibilit\`a
di usare il database.


\section{Package server.persistent} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{server.persistent} contiene le classi di persistenza che
implementano il design pattern \emph{Data Access Object (DAO)} che hanno lo
scopo di interfacciare il sistema con il database nascondendo cos\`i ogni
dettaglio sulla struttura del database all'esterno. 
\subsection*{Relazioni d'uso di altre componenti}
Vengono utilizzate le classi DTO presenti nel package \emph{shared} per
impacchettare i dati in uscita dal database. 
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Questo package \`e di fondamentale importanza per il resto del sistema poich\'e
rappresenta l'unica via di accesso ai dati persistenti, le classi contenute
vengono quindi utilizzate in modo massiccio dalle classi logiche Service nel
package \emph{server}.
\subsection*{Attivit\`a svolte e dati trattati}
Le classi DAO gestiscono i dati del sistema garantendone la persistenza e si
occupano anche di implementare la parte logica di salvataggio, recupero e
relazione dei dati. Nel caso di NetMus \`e un'attivit\`a molto delicata poich\'e il
database utilizzato \`e non relazionale.

\subsection{Classe UserAccount}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{UserAccount} contiene le informazioni relative ad un utente.
\subsubsection*{Relazioni d'uso di altre componenti}
La classe DAO \co{MusicLibrary} \`e necessaria per gestire la relazione uno-a-uno
che la lega a questa classe. Vengono inoltre utilizzate le classi
\co{UserSummaryDTO}, \co{UserDTO} e \co{UserCompleteDTO} come input ed
output in gran parte dei metodi. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Tutte le classi logiche Service presenti nel package \emph{server} ne fanno uso
qual'ora abbiano bisogno di informazioni riguardanti un utente del sistema.
\subsubsection*{Attivit\`a svolte e dati trattati}
Gestisce la logica di persistenza di tutti i dati relativi ad un utente del
sistema NetMus.

\subsection{Classe MusicLibrary}
\subsubsection*{Tipo, obiettivo e funzione del componente} \co{MusicLibrary}
contiene tutte le informazioni relative ad un catalogo multimediale.
\subsubsection*{Relazioni d'uso di altre componenti} Alla luce della relazione
di tipo uno-a-molti che la lega a \co{Song} e quella uno-a-uno con
\co{UserAccount} queste due classi DAO sono necessarie. Viene utilizzata la
classe \co{MusicLibraryDTO} come input ed output in gran parte dei metodi.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} Tutte le
classi logiche Service presenti nel package \emph{server} ne fanno uso qual'ora
abbiano bisogno di informazioni riguardanti un catalogo multimediale.
\subsubsection*{Attivit\`a svolte e dati trattati} Gestisce la logica di
persistenza di tutti i dati relativi ad un catalogo multimediale del sistema
NetMus.

\subsection{Classe Song}
\subsubsection*{Tipo, obiettivo e funzione del componente} Contiene le
informazioni relative ad un brano musicale. 
\subsubsection*{Relazioni d'uso di
altre componenti} Essendo in relazione con \co{MusicLibrary} ne fa uso. Vengono
utilizzate le classi \co{SongDTO} e \co{SongSummaryDTO} come input ed output
in gran parte dei metodi. 
\subsubsection*{Interfacce con e relazioni d'uso da
altre componenti} Tutte le classi logiche Service presenti nel package
\emph{server} ne fanno uso qual'ora abbiano bisogno di informazioni riguardanti
un brano musicale. 
\subsubsection*{Attivit\`a svolte e dati trattati} Gestisce
la logica di persistenza di tutti i dati relativi ad un brano musicale del
sistema NetMus.

\section{Package server.servlet}
\subsection*{Tipo, obiettivo e funzione del componente}
Package del server che contiene le classi utilizzate per interfacciarsi a
servizi esterni, come il login utilizzando l'account Google, o come YouTube.

\subsection*{Relazioni d'uso di altre componenti}
Verranno utilizzati alcuni \emph{persistent} e classi di \emph{utils}, ma
si vedr\`a pi\`u in dettaglio nelle classi.

\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Queste classi vengono usati da \emph{server} per integrare al suo interno
altri servizi esterni.
\subsection*{Attivit\`a svolte e dati trattati}
Gestisce lo scambio di dati con servizi esterni.

\subsection{Classe LoginSuperServlet}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\`E una classe astratta che estende \co{HttpServlet} ed ha lo scopo di
implementare il metodo di creazione dell'indirizzo di ritorno del richiedente.

\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a concretizzata da \co{LoginGoogleServlet}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Crea semplicemente l'URL di Callback per far tornare una risposta HTTP al
client in seguito ad una sua richiesta di login.

\subsection{Classe LoginGoogleServlet}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Utilizzata per il login tramite l'account Google.

\subsubsection*{Relazioni d'uso di altre componenti}
Concretizza il \co{LoginSuperServlet} ed implementa il metodo \emph{doGet} il
quale utilizza \\\co{HttpSerletRequest} e \co{HttpSerletResponse}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Predispone il servizio e reindirizza l'utente al servizio di login di Google.
Google, dopo che l'utente avr\`a effettuato l'accesso, lo reindizzer\`a nuovamente
al nostro programma, trasmettendo a \co{LoginGoogleCallbackServlet} tutte le
informazioni del caso.


\subsection{Classe LoginGoogleCallbackServlet}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Utilizzata per il login tramite l'account Google.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Riceve i dati dell'account dell'utente dopo che quest'ultimo ha effettuato
l'accesso tramite il Google account.

\subsection{YouTubeServlet} % <-- resta per LINK VIDEO
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe si occuper\`a di dialogare con il servizio di ricerca offerto
dalle API di YouTube e sar\`a di tipo \co{HttpServlet}.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a utilizzato da un \co{SongService} al momento della memorizzazione nel
DataStore di un nuovo brano.
\subsubsection*{Attivit\`a svolte e dati trattati}
Lo scopo sar\`a quello di fornire ad un nuovo brano
da memorizzare anche un link al relativo streaming audio/video.

\subsection{TaggingServlet} % <-- resta per completamento TAG
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe si occuper\`a di dialogare con un servizio web che possa fornirci
un Tag Mp3 completo, passandogli solo qualche informazione del brano (es.
solo titolo e artista, titolo e album).
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a utilizzata questa classe da \co{SongService} quando dovr\`a memorizzare
un nuovo brano e non avr\`a sufficienti informazioni.
\subsubsection*{Attivit\`a svolte e dati trattati}
Cercare di fornire pi\`u informazioni ad un brano, il cui Tag al momento
dell'estrazione risultava scarso di dati, prima di memorizzarlo sul
DataStore.

\section{Package server.utils} % LASCIARE WARNING
\subsection*{Tipo, obiettivo e funzione del componente}
Contiene le classi che forniscono funzioni di utilit\`a comunemente utilizzate
dalle altre classi del package \emph{server}.
\subsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzato dalle classi del package \emph{server}.
\subsection*{Attivit\`a svolte e dati trattati}
Varie.

\subsection{Classe AuthenticationProvider}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Funzioni utili alla gestione dell'autenticazione.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Usata dalle classi \co{LoginHelper} e \co{LoginServiceImpl}. 
\subsubsection*{Attivit\`a svolte e dati trattati}
Funzioni utili e comuni per la gestione del login e dei relativi dati, in
particolare per tracciare il servizio esterno di login a cui appoggiarsi.

\subsection{Classe ServletUtils}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Funzioni utili per l'utilizzo dei servizi esterni.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Usata dal package \emph{Servlet}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funzioni utili e comuni per la gestione e l'interfacciamento con i servizi
esterni.

\subsection{Classe Utils}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Varie funzioni utili e generiche, utilizzate da svariati package all'interno di
\emph{server}.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzato dalle classi del package \emph{server}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Varie.

\newpage
\section{Package shared} % LASCIARE WARNING
\begin{figure}[h]
  \centering
  \includegraphics[width=7cm]{img/ST/Shared.png}
\caption{Diagramma delle classi del package shared.}
\end{figure}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{shared} contiene le classi degli oggetti che vengono
scambiati tra client e server; in particolare, troviamo presenti le classi che
aderiscono al pattern DTO.
\subsection*{Relazioni d'uso di altre componenti}
Tutte le classi di questo package implementano l'interfaccia
\co{java.io.Serializable} per poter essere serializzate e quindi inviate
attraverso la rete. 
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzata dalle classi dei package \emph{client} e \emph{server} per
lo scambio di dati e/o informazioni.
\subsection*{Attivit\`a svolte e dati trattati}
In generale, le classi di questo package si occupano di inglobare e trasportare
le informazioni attraverso la rete, per le comunicazioni tra server e client.
Vengono qui di seguito descritte pi\`u in dettaglio.

\subsection{Interfaccia GenericDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Interfaccia comune per le classi DTO. Definisce una generica classe che potr\`a
essere usata come contenitore dei dati di una DAO.
\subsubsection*{Relazioni d'uso di altre componenti}
Vedere la descrizione del package.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene implementata dalle classi del package \emph{shared}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna. 

\subsection{Classe UserSummaryDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta i dati pi\`u comunemente utilizzati di un utente, ovvero
quelli che vengono visualizzati in un profilo.
\subsubsection*{Relazioni d'uso di altre componenti}
Implementa l'interfaccia \co{GenericDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per i dati pi\`u comunemente utilizzati dell'utente, come
per esempio nick ed email.

\subsection{Classe UserDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta la maggior parte dei dati di un utente, pi\`u
precisamente quelli richiesti alla registrazione.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{UserSummaryDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per i dati dettagliati di un utente.

\subsection{Classe UserCompleteDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta tutti i dati di un utente, a partire da quelli
visualizzati sul profilo, a quelli interni del sistema.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{UserDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per tutti dati dell'utente, dal nick al numero di
registrazione.

\subsection{Classe SongSummaryDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta i dati pi\`u comunemente utilizzati di un brano, ovvero
quelli che vengono visualizzati in una playlist all'interno di un profilo.
\subsubsection*{Relazioni d'uso di altre componenti}
Implementa l'interfaccia \co{GenericDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per i dati pi\`u comunemente utilizzati di un brano, come
per esempio titolo ed autore.

\subsection{Classe SongDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta tutti i dati di un brano, compresi quelli interni del
sistema. 
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{SongSummaryDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per tutti dati del brano, dal titolo al numero
identificativo del brano. 

\subsection{Classe LoginDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta i dati di login di un utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Implementa l'interfaccia \co{GenericDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Trasporta nome utente e password dal client al server per l'autenticazione.

\subsection{Classe MusicLibraryDTO}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene le informazioni relative ad un catalogo multimediali compresa la lista
di canzoni di cui \`e composto. 
\subsubsection*{Relazioni d'uso di altre componenti} 
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Fa da contenitore per tutti dati di un catalogo multimediale.

\section{Package shared.exception}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{shared.exception} raccoglie le classi che trattano
le eccezioni che posso essere lanciate dal sistema NetMus. Le classi eccezione
sono opportunamente gerarchizzate. 
\subsection*{Relazioni d'uso di altre componenti}
Tutte le classi qui contenute estendono la classe \co{Exception}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Questo package \`e visibile all'intero sistema e all'occorrenza le classi al suo
interno posso essere utilizzate da qualsiasi altro componente.
\subsection*{Attivit\`a svolte e dati trattati}
Fornisce tutte le possibili eccezioni che possono essere lanciate dal sistema
NetMus.

\subsection{Classe NetMusException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Generica eccezione del nostro programma.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{Exception}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Rappresenta una generica eccezione usata all'interno del sistema NetMus.
Tutte le altre eccezioni estendono questa.

\subsection{Classe LoginException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica un generico errore rilevato durante il tentativo di login.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{NetMusException}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna.

\subsection{Classe WrongLoginException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica dei dati errati di login.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{LoginException}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Indica che username e/o password sono errati.

\subsection{Classe RegistrationException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica un generico errore rilevato durante la registrazione di un nuovo utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{NetMusException}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna.

\subsection{Classe NickNotFreeException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica che il login richiesto durante la registrazione \`e gi\`a in uso.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{RegistrationException}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Eccezione sollevata quando si rileva che il nome utente richiesto dal nuovo
utente \`e gi\`a utilizzato.

\subsection{Classe DuplicateEmailException}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica che l'email inserita durante la registrazione \`e gi\`a in uso.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{RegistrationException}
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Eccezione sollevata quando si rileva che l'email inserita durante la
registrazione \`e gi\`a in uso, e quindi non pu\`o essere utilizzata per la
registrazione di un nuovo utente.

\section{Applet di estrazione brani}
\begin{figure}[h]
  \centering
  \includegraphics[width=16.5cm]{img/ST/recupero.png}
\caption{Diagramma delle attivit\`a che descrive il procedimento di estrazione
ed elaborazione dei brani recuperati dall'utente}
\end{figure}
Verr\`a creata una semplice applet che avr\`a lo scopo di catturare eventi
provocati dall'inserimento di una periferica USB. Questa applet verr\`a inserita
nella pagina web in maniera dinamica dalle nostre View, e sar\`a l'utente a
decidere se tenerla attiva o meno tramite un piccolo tasto on/off presente nella
pagina. Di default questa applet sar\`a integrata e attiva nella
\co{ProfileView} ed \co{EditSongsView}.\\
L'applet verr\`a pre-compilata come una componente indipendente ed utilizzata
mediante l'inserimento di uno script HTML all'interno della pagina.\\
\\
Quando viene rilevato un dispositivo di archiviazione di massa USB, come una
pen drive, un telefono o lettore Mp3, vengono estratti tutti i Tag dagli Mp3
trovati tramite la libreria Java MP3 ID3 Tag Library, dai quali viene creata una
lista di \co{SongDTO} che verr\`a inviata al server tramite \co{SongsService}.\\
\\
La scansione del dispositivo riguarda solamente i file Mp3 e se un Tag dovesse
risultare corrotto o vuoto, verr\`a ignorato il brano.\\
\\
Una volta inviate al server tali informazioni, verranno cercate le
corrispondenze con eventuali brani gi\`a presenti nel nostro DataStore: se un
brano risulta presente verr\`a semplicemente associato all'utente aggiornando la
sua MusicLibrary; se non \`e ancora presente allora verr\`a integrato e corretto
tramite un servizio esterno. Verr\`a per questo implementato un algoritmo
decisionale per stabilire che livello di corrispondenza deve avere il brano per
essere considerato attendibile o meno.\\
\\
Il client, come risposta dell'invio dei brani, avr\`a un reindirizzamento alla
\co{EditSongsView}, la quale mostrer\`a a video la sua lista dei brani
aggiornata e modificabile.

\chapter{Tracciamento della relazione componenti - requisiti}

\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|l|}
\hline
\rowcolor{orange}                         
\sca{Componente} & \sca{Codice}\\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
client & Ccl0\\\hline
client.Netmus & Ccl1\\\hline
client.ClientFactory & Ccl2\\\hline
client.ClientFactoryImpl & Ccl3\\\hline
client.mvp & Cclmv0\\\hline
client.mvp.NetmusActivityMapper & Cclmv1\\\hline
client.mvp.NetmusPlaceHistoryMapper & Cclmv2\\\hline
client.activity & Cclac0\\\hline
client.activity.LoginActivity & Cclac1\\\hline
client.activity.ProfileActivity & Cclac2\\\hline
client.activity.EditUserActivity & Cclac3\\\hline
client.activity.EditSongsActivity & Cclac4\\\hline
client.service & Cclse0\\\hline
client.service.LoginService & Cclse1\\\hline
client.service.UsersService & Cclse2\\\hline
client.service.SongsService & Cclse3\\\hline
client.service.LibraryService & Cclse4\\\hline
client.place & Cclpl0\\\hline
client.place.LoginPlace & Cclpl1\\\hline
client.place.ProfilePlace & Cclpl2\\\hline
client.place.EditUserPlace & Cclpl3\\\hline
client.place.EditSongsPlace & Cclpl4\\\hline
client.ui & Cclui0\\\hline
client.ui.LoginView & Cclui1\\\hline
client.ui.ProfileView & Cclui2\\\hline
client.ui.EditUserView & Cclui3\\\hline
client.ui.EditSongsView & Cclui4\\\hline
client.applet & Cclap0\\\hline
shared & Csh0\\\hline
shared.GenericDTO & Csh1\\\hline
shared.SongSummaryDTO & Csh2\\\hline
shared.SongDTO & Csh3\\\hline
shared.LoginDTO & Csh4\\\hline
shared.MusicLibraryDTO & Csh5\\\hline
shared.UserSummaryDTO & Csh6\\\hline
shared.UserDTO & Csh7\\\hline
shared.UserCompleteDTO & Csh8\\\hline
shared.exception & Cshex0\\\hline
shared.exception.NetMusException & Cshex1\\\hline
shared.exception.LoginException & Cshex2\\\hline
shared.exception.WrongLoginException & Cshex3\\\hline
shared.exception.RegistrationException & Cshex4\\\hline
shared.exception.NickNotFreeException & Cshex5\\\hline
shared.exception.DuplicateEmailException & Cshex6\\\hline
server & Cse0\\\hline
server.PMF & Cse1\\\hline
server.LoginHelper & Cse2\\\hline
server.SongsServiceImpl & Cse3\\\hline
server.LoginServiceImpl & Cse4\\\hline
server.UserServiceImpl & Cse5\\\hline
server.LibraryServiceImpl & Cse6\\\hline
server.utils & Cseut0\\\hline
server.utils.AuthenticationProvider & Cseut1\\\hline
server.utils.Utils & Cseut2\\\hline
server.utils.ServletUtils & Cseut3\\\hline
server.servlet & Csese0\\\hline
server.servlet.LoginSuperServlet & Csese1\\\hline
server.servlet.LoginGoogleServlet & Csese2\\\hline
server.servlet.LoginGoogleCallbackServlet & Csese3\\\hline
server.servlet.YouTubeServlet & Csese4\\\hline
server.persistent & Csepe0\\\hline
server.persistent.UserAccount & Csepe1\\\hline
server.persistent.MusicLibrary & Csepe2\\\hline
server.persistent.Song & Csepe3\\\hline
\caption{Componenti e relativi codici.}
\end{longtable}
\end{footnotesize}

\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|l|}
\hline
\rowcolor{orange}                         
\sca{Requisiti} & \sca{Componenti}\\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1FN-1.1 Grafica simile ad iTunes & Cclui0\\ \hline
C1FN-1.1.1 Brani elencati opportunamente & Cclac2\\
 & Cclui2\\\hline
C1FN-1.1.2 Menu laterali & Cclui0\\ \hline
C1FN-1.1.3 Visualiz. info dettagliate dei brani & Cclui2\\
 & Cclac2\\
 & Cclpl2\\
 & Cclse3\\
 & Cse3\\
 & Csepe3\\ \hline
C1FD-1.1.4 Visualizza player YouTube & Cclui2\\ \hline
C1FN-1.2 Registrazione & Cclui1\\
 & Cclac1\\
 & Cclse1\\
 & Cclpl1\\
 & Cse2\\
 & Cse4\\ \hline
C1FO-1.2.1 Pagina login indipendente & Cclui1\\ \hline
C1FD-1.3 Personalizzazione del catalogo & Cclui4\\
 & Cclpl4\\
 & Cclac4\\\hline 
C1FD-1.3.1 Cancellazione brano &  Cclui4\\
 & Cclpl4\\
 & Cclac4\\\hline 
C1FD-1.3.2 Modifica informazioni brano & Cclui4\\
 & Cclpl4\\
 & Cclac4\\\hline 
C1FO-1.3.3 Creazione playlist & Cclui4\\
 & Cclpl4\\
 & Cclac4\\\hline 
C1FO-1.3.4 Ranking brani & Cclui2\\
 & Cclpl2\\
 & Cclac2\\\hline 
C1FN-1.4 Gestione profilo personale & Cclui3\\
 & Cclpl3\\
 & Cclac3\\\hline 
C1FN-1.4.1 Modifica informazioni personali & Cclui3\\
 & Cclpl3\\
 & Cclac3\\\hline 
C1FN-1.4.2 Cambio password & Cclui3\\
 & Cclpl3\\
 & Cclac3\\\hline 
C1FN-1.4.3 Cancellazione del proprio account & Cclui3\\
 & Cclpl3\\
 & Cclac3\\\hline 
C1FD-1.4.4 Pubblicazione & Cclui3\\
 & Cclpl3\\
 & Cclac3\\\hline 
C1FD-1.5 Riproduzione tracce in streaming & Cclui2\\
 & Cclpl2\\
 & Cclac2\\
 & Csese4\\\hline 
C1FD-1.7 Interazione con altri utenti & Cclui0\\
 & Cclac0\\\hline 
C1FD-1.7.1 Visualizzazione altri profili & Cclui2\\
 & Cclpl2\\
 & Cclac2\\\hline
C1FO-1.7.2 Lasciare commenti su profilo & Cclui2\\
 & Cclpl2\\
 & Cclac2\\\hline
C1FO-1.8.1 Esportazione PDF & Cclui0\\
 & Cclac0\\\hline
C1FD-1.10 Invio nuove informazioni a C2 & Ccl0\\\hline
%requisiti c2
C2FN-1 Recupero delle informazioni & Cclap0\\\hline
C2FN-1.1 Recupero automatico & Cclap0\\\hline
C2FN-1.2 Recupero manuale & Cclap0\\\hline
C2FD-1.4 Informazioni dall'hard disk & Cclap0\\\hline
C2FN-1.5 File ignorati & Cclap0\\\hline
C2FD-2 Aggiornamento e completamento informazioni & Cclap0\\
 & Cclse3\\
 & Cse3\\\hline 
C2FN-3 Comunicazione con C1 & Ccl0\\ \hline 
C2FN-3.1 Invio delle informazioni & Cclap0\\
 & Cclse3\\
 & Cse3\\\hline 

%''extra''
C1QN-1.5.1 Ottimizzazione della ricerca su YouTube & Csese4 \\ \hline
C1VD-1.5.2 Quote YouTube & Csese4\\ \hline
C1FD-1.8 Elaborazione dati utente & Cse0\\ \hline
C1FN-1.9 Ricezione ed elaborazione dei brani & Cse3\\ \hline
C1FN-1.9.1 Controllo di validit\`a dei dati & Cse3\\ \hline
C1FN-1.9.2 Completamento info da database interno & Cseut2\\
 & Cse3\\
 & Csepe0\\\hline
C1FO-1.9.3 Completamento info da servizio esterno & Csese0\\ \hline
C1FN-1.9.4 Identificazione dati ridondanti & Cseut2\\ \hline
C1FN-1.9.5 Inserimento nel Database & Cse3\\
 & Csepe0\\\hline
C1QN-2 Utilizzo & Cclui0\\ \hline
C1QO-2.1 Accessibilit\`a &Cclui0\\ \hline
C1QD-2.4 Supporto multi-lingua & Ccl2\\
 & Ccl3\\\hline
C1QN-2.7 Gestione errori & Cshex0\\ \hline
%c2
C2FO-1.3 Informazioni senza connessione & Cclap0\\ \hline
C2FO-1.6 Indicazioni file ignorati & Cclap0\\ \hline
C2QD-1.7 Ottimizzazione memoria cache & Cclap0\\ \hline 
C2QN-3.2 Utilizzo della connessione & Cclse0\\ \hline 
C2QD-4.3 Supporto multi-lingua & Cclap0\\ \hline
\caption{Tracciamento requisiti - componenti}
\end{longtable}
\end{footnotesize}

I seguenti componenti non sono risultati tracciabili, in quanto appartengono ad
una delle seguenti categorie:
\begin{itemize}
  \item vincoli;
  \item requisiti di qualit\`a generici;
  \item requisiti intrinsecamente legati alla piattaforma.
\end{itemize}
%non tracciati
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|}
\hline
\rowcolor{orange}                         
\sca{Requisiti non tracciati} \\
\hline
\endhead
\hline
\multicolumn{1}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1VD-1.5.3 YouTube Terms of Services \\ \hline
C1QN-1.6 Scalabilit\`a \\ \hline
C1QN-1.6.1 Scalabilit\`a interfaccia grafica \\ \hline
C1QN-1.6.2 Scalabilit\`a massa di utenza \\ \hline
C1QN-1.9.6 Gestione concorrenza \\ \hline
C1VN-1.11 Deve utilizzare il cloud computing \\ \hline
C1VN-1.12 Tecnologie GAE e GWT \\ \hline
C1FN-1.13 Gestione Database \\ \hline
C1VN-1.13.1 Deve utilizzare Google Data Store \\ \hline
C1VN-2.2 Open source \\ \hline
C1QN-2.3 Portabilit\`a \\ \hline
C1VN-2.5 Semplicit\`a di utilizzo \\ \hline
C1QN-2.6 Manutenibilit\`a \\ \hline
C1QN-3.1 Manuale utente \\ \hline
C2QD-4.1 Portabilit\`a \\ \hline
C2QD-4.2 Semplicit\`a di utilizzo \\ \hline
C2QN-4.4 Manutenibilit\`a \\ \hline
C2VD-4.5 Meno disturbo possibile \\ \hline
C2VN-4.6 Norme legali \\ \hline
C2VN-4.7 Open source \\ \hline
\caption{Requisiti non tracciati}
\end{longtable}
\end{footnotesize}

\chapter{Stime di fattibilit\`a e di bisogno di risorse}
Successivamente alla prima revisione e con l'avanzamento del processo di
progettazione, il gruppo ritiene di utilizzare gli strumenti e le procedure
adeguate a soddisfare tutti i requisiti individuati.
\\\\
Per quanto riguarda la piattaforma offerta da Google composta dalla
collaborazione di GWT e GAE abbiamo riscontrato un elevato consumo di risorse in
termini di tempo speso per l'apprendimento, compensato per\`o da un'evidente
vantaggio nella qualit\`a del prodotto. Per sostenere lo studio della tecnologia
succitata, non rientrante nel piano di progetto, abbiamo potuto seguire un corso
ad-hoc tenuto da Miriade S.P.A. presso le sedi dell'Universit\`a di Padova,
integrato da un approfondimento personale sulle sue varie componenti. I servizi
offerti da GWT e GAE analizzati garantiscono un'adeguata copertura dei
requisiti individuati durante il processo di analisi ed allo stesso tempo favoriscono
l'implementazione di alcuni design patterns che assicurano la qualit\`a
dell'architettura.
\\\\
Un'altro fattore emerso in questa fase di progettazione riguarda lo sviluppo
della componente di estrazione dei brani da dispositivi USB dell'utente. La
difficolt\`a incontrata riguarda il metodo di comunicazione tra la Web
Application e tale Applet se implementata con JavaFX. Sono state per\`o gi\`a
individuate alcune soluzioni possibili, tra le quali
l'implementazione come Java Applet firmata, i cui dettagli implementativi saranno definiti durante la
progettazione di dettaglio. Tale variazione non andr\`a ad interferire con la
nostra progettazione architetturale.
\\\\
Va segnalato un imprevisto consumo di risorse dovuto al cambio di strumento di
modellazione UML poich\'e ArgoUML non garantiva, diversamente dalle attese, un
ambiente di sviluppo robusto. Le tecnologie attualmente impiegate per la stesura
dei documenti e la composizione di diagrammi UML (Papyrus plugin per Eclipse)
vengono utilizzate con discreta dimestichezza dal VT.G nella copertura dei
rispettivi ruoli e garantiscono quindi una notevole agevolazione in termini di
risorse, tempo e costi.
\\\\
Tutti gli elementi analizzati finora, ci trovano in accordo sul fatto che i
requisiti ed il piano di progetto verranno rispettati.

\listoftables
\addcontentsline{toc}{chapter}{Indice Tabelle}
\listoffigures
\addcontentsline{toc}{chapter}{Indice Figure}
\end{document}
