\newcommand{\nomedoc}{Definizione Del Prodotto}
\newcommand{\versione}{0.16}
\newcommand{\versioneglossario}{3.0}
\newcommand{\versionenormeprogetto}{3.0}
\newcommand{\versionespecifica}{2.0}
\newcommand{\nomefile}{DefinizioneDelProdotto-\versione.pdf}
\newcommand{\datacreazione}{3 Febbraio 2011}
\newcommand{\datamodifica}{23 Febbraio 2011}
\newcommand{\stato}{formale}
\newcommand{\uso}{esterno}
\newcommand{\redazione}{---}
\newcommand{\verifica}{---}
\newcommand{\approvazione}{---}
\newcommand{\distribuzione}{
VT.G \\
& Prof. Vardanega Tullio\\
& Prof. Cardin Riccardo }

\input{preambolo.tex}
\usepackage{amsfonts}

\begin{document}

\input{homepage.tex}

\chapter*{Sommario}
\thispagestyle{fancy}
In questo documento verr\`a definito l'intero prodotto nel dettaglio, andando a
descrivere i metodi e i campi dati di ogni classe che verr\`a implementata nel
sistema. Le componenti definite durante la progettazione di dettaglio 1 e quelle
da integrare durante la progettazione di dettaglio 2 saranno unite all'interno
del documento per rendere pi\`u comprensibile l'archiettura completa del sistema
NetMus. Il tracciamento con i requisiti invece sar\`a separato in progettazione
di dettaglio 1 e progettazione di dettaglio 2 mappati rispettivamente con
requisiti obbligatori e requisiti desiderabili ed opzionali.\\
Dopo ogni attivit\`adi progettazione di dettaglio verr\`a effettuata la relativa
codifica, delle quali verr\`a allegato il codice sorgente.

\newpage
% REGISTRO MODIFICHE
\section*{Registro delle modifiche}

\begin{longtable}{|p{0.13\textwidth}|c|p{0.2\textwidth}|p{0.46\textwidth}|}
\hline
\rowcolor{orange} \bo{Data} & \bo{Versione} & \bo{Autore} & \bo{Descrizione} \\
\hline
\endhead
\hline
\endfoot

22/02/2011 & 0.18 & Mandolo Andrea & Aggiunto package server.utils.\\
\hline
21/02/2011 & 0.17 & Caputo Cosimo & Aggiunti diagrammi delle classi per applet
e client.applet e riformattati diagrammi nel documento.\\
\hline
21/02/2011 & 0.16 & Caputo Cosimo & Agginti diagrammi delle classi per il
package server e i relativi sotto-package.\\
\hline
21/02/2011 & 0.15 & Palazzin Alberto & Aggiunti i capitoli ralitivi al package
\emph{client.mvp}.\\
\hline
19/02/2011 & 0.14 & Baron Federico & Assegnazione nuovi codici per le componenti
dell'applet in capitolo 2.\\
\hline
18/02/2011 & 0.13 & Baron Federico & Aggiornamento finale del capitolo 2 in
seguito a fine progettazione di dettaglio.\\
\hline
18/02/2011 & 0.12 & Baron Federico & Aggiunta la definizione delle componenti
\co{Song}, \co{UserAccount}, \co{MusicLibrary} e \co{ODF}.\\
\hline
17/02/2011 & 0.11 & Palazzin Alberto & Redatti i capitoli sulle componenti
\co{PrifleView}, \co{ProfilePlace} e \co{ProfileActivity}.\\
\hline
16/02/2011 & 0.10 & Palazzin Alberto & Redatti i capitoli sulle componenti
del package \emph{server.shared}.\\
\hline
13/02/2011 & 0.9 & Baron Federico & Aggiunto il package \emph{client.event}
\\\hline 
13/02/2011 & 0.8 & Palazzin Alberto & Agginto il package
\emph{server.youtube}.\\
\hline
08/02/2011 & 0.7 & Daminato Simone & Inseriti capitolo su client.applet.\\
\hline
08/02/2011 & 0.6 & Mandolo Andrea & Inseriti capitolo su applet di estrazione.\\
\hline
07/02/2011 & 0.5 & Mandolo Andrea & Inseriti scopo del documento, sommario e
standard di progetto.\\
\hline
05/02/2011 & 0.4 & Baron Federico & Aggiunta la definizione della componente
\co{LoginActivity}.\\
\hline
05/02/2011 & 0.3 & Baron Federico & Aggiunta la definizione delle componenti
\co{LoginView} e \co{LoginPlace}.\\
\hline
04/02/2011 & 0.2 & Baron Federico & Inserita la struttura di base del
documento con divisione tra progettazione di dettaglio 1 e progettazione di
dettaglio 2.\\
\hline
03/02/2011 & 0.1 & Mandolo Andrea & Creazione documento iniziale.\\

\end{longtable}

% INDICE
\tableofcontents

\chapter{Introduzione}
\thispagestyle{fancy} % serve perche' nelle pagine di inizio Chapter esca header e footer
\pagenumbering{arabic} % INIZIO NUMERAZIONE NORMALE
\rfoot{\thepage\ di \pageref{TotPages}}

\section{Scopo del documento}
Lo scopo della Definizione Di Prodotto \`e quello di descrivere nel dettaglio i
componenti funzionali presentati nel documento
\emph{SpecificaTecnica-\versionespecifica.pdf} illustrando a basso livello i
metodi e i campi dati che costituiscono le varie entit\`a, andando a definire
cos\`\i\ il prodotto finale.

\input{parte_comune.tex}

\chapter{Standard di progetto}
\thispagestyle{fancy} %  header e footer in CHAPTER PAGE
Durante lo sviluppo del sistema NetMus verranno adottati standard,
tecniche e strumenti descritti nel seguente capitolo.

\section{Standard di progettazione architetturale}
Come decritto dettagliatamente nel documento di Specifica Tecnica, la
progettazione architetturale del sistema si basa sui seguenti principi:

\begin{itemize}
  \item \emph{utilizzo di pattern:} tale approccio ci permette di adottare
  strategie per la risoluzione di problemi noti, considerate efficenti e affidabili;
  \item \emph{utilizzo di framework:} questo ci permette di avere infrastrutture
  gi\`a consolidate per gestire determinati problemi di basso livello, dandoci
  la possibilit\`a di avere una visione pi\`u ad alto livello del problema,
  quindi di poter concentrarci maggiormente sugli aspetti funzionali del nostro
  sistema.
  \item \emph{divisione in package:} cos\`\i\ facendo daremo un'organizzazione
  logica alle classi, accorpandole a seconda del loro utilizzo ed del loro
  scopo.
  \item \emph{basso accoppiamento:} rendere il pi\`u possibile indipendenti le
  varie componenti logiche \`e essenziale per un buon riuso ed una facile
  manutenzione del codice.
\end{itemize}

\section{Standard di documentazione del codice}
Per le regole di documentazione del codice si faccia riferimento al documento
interno \emph{NormeDiProgetto-\versionenormeprogetto.pdf} in allegato.

\section{Standard di denominazione di entit\`a e relazioni}
Per quanto riguarda le norme per la nomenclatura delle varie entit\`a e delle
loro relazioni si faccia riferimento al documento interno
\emph{NormeDiProgetto-\versionenormeprogetto.pdf} in allegato.

\section{Standard di programmazione}
Le regole che seguiremo per la codifica del sistema sono esplicitate nel
documento interno \emph{NormeDiProgetto-\versionenormeprogetto.pdf} in allegato.

\section{Strumenti di lavoro}
Gli strumenti di lavoro che verranno adottati per lo sviluppo sono descritti in
dettaglio nel documento interno \emph{NormeDiProgetto-\versionenormeprogetto.pdf} in
allegato.


\chapter{Dettagli architetturali non introdotti nella Specifica tecnica}
\thispagestyle{fancy} %  header e footer in CHAPTER PAGE Durante l'attivit\`a di
progettazione di dettaglio sono stati definiti alcuni aspetti dell'architettura
di NetMus che nella Specifica Tecnica non sono trattati o lo sono solo in
parte.\\ Per una maggiore comprensione del documento, in particolare della
specifica delle componenti, elenchiamo di seguito queste importanti decisioni
architetturali con una breve descrizione.
\begin{itemize}
  \item \bo{Applet} : la componente di recupero delle informazioni (C2) risiede
  in una applet \\Java precompilata indipendente da GWT ed \`e integrata con
  quest'ultimo grazie ai metodi nativi JSNI. L'applet \`e inoltre visibile
  (indirettamente) all'utente con una piccola interfaccia grafica di GWT
  presente quando l'utente e' loggato, da cui \`e possibile
  attivarla e disattivarla, e dare altri comandi relativi la scansione.\\ Le
  informazioni reperite nel file system sono trasferite a GWT tramite file XML.
  
  \item \bo{Twig-Persist} : Per la gestione della persistenza e quindi del
  Datastore abbiamo deciso di utilizzate il framework Twig-Persist poich\'e
  fornisce una libreria molto efficace e facilmente configurabile
  rispetto a JDO. Un altro vantaggio acquisito dall'utilizzo di questa
  tecnologia \`e quello di poter gestire in modo asincrono (parallelo) le
  operazioni sul Datastore. Questo framework si interfaccia al sistema NetMus
  nelle componenti di persistenza DAO \co{UserAccount}, \co{Song} e
  \co{MusicLibrary} e nella classe singleton \co{ODF} (Object Datastore
  Factory). Quest'ultima \`e stata inserita nel package \emph{server.persistent}
  per garantire un migliore information hiding. \\
  La versione utilizzata del framework \`e l'ultima rilasciata: Twig-Persist 2.0
  Beta 4.
  
  \item \bo{Internazionalizzazione} : GWT mette a disposizione un insieme di
  strumenti molto flessibili per la gestione dell'internazionalizzazione di
  un'applicazione.\\ Per soddisfare il requisito di avere un sistema
  multi-lingua utilizziamo lo strumento \emph{Static String
  Internationalization} che grazie al deferred binding ci permette di avere la
  massima efficienza a runtime poich\'e le lingue sono mappate durante la
  compilazione. Questa componente con le impostazioni relative alle
  diverse lingue risiede nella classe \co{MyConstants} e nei file
  \emph{MyConstants.properties} e \emph{MyConstants\_it.properties}. Per
  permettere anche lo sviluppo multilingua dell'applet, ci sar\`a la classe
  \co{AppletConstants} ed i relativi file \emph{AppletConstants.properties} e
  \emph{AppletConstants\_it.properties}.
\end{itemize}

\newpage
\section{Lista delle componenti in progettazione di dettaglio}
In relazione alle modifiche apportate all'architettura del sistema ed al
maggiore dettaglio della progettazione sono state individuate delle aggiunte e
delle rimozioni alle componenti individuate in Specifica Tecnica. In seguito
sono elencate le componenti con l'assegnamento dei nuovi codici
identificativi.\\
Le modifiche apportate sono dovute principalmente al maggior dettaglio
dell'attivit\`a di progettazione, per quanto riguarda i package
\emph{client.applet} e \emph{server.persistent} invece si \`e reso necessario
l'adattamento alle nuove scelte architetturali introdotte nel paragrafo
precedente. Infine la struttura dell'applet di estrazione dei brani \`e definita
in questo documento per la prima volta.\\
Per ulteriori chiarimenti sulle scelte progettuali operate si rimanda
alla descrizione specifica delle componenti presentata in questo capitolo.
\begin{footnotesize}
\begin{longtable}[h]{|l|l|l|}
\hline
\rowcolor{orange}                         
 & \sca{Componente} & \sca{Codice}\\
\hline
\endhead
\hline
\multicolumn{3}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot 
\endlastfoot
& client &  Ccl0 \\\hline 
& client.Netmus  &  Ccl1 \\\hline 
& client.ClientFactory  &  Ccl2 \\\hline 
& client.ClientFactoryImpl  &  Ccl3 \\\hline 
& client.mvp  &  Cclmv0 \\\hline 
& client.mvp.NetmusActivityMapper  &  Cclmv1 \\\hline 
& client.mvp.NetmusPlaceHistoryMapper  &  Cclmv2 \\\hline 
\bo{+} & client.event  &  Cclev0 \\\hline
\bo{+} & client.event.DeviceScannedEvent  &  Cclev1 \\\hline 
\bo{+} & client.event.DeviceScannedEventHandler  &  Cclev2 \\\hline 
& client.activity  &  Cclac0 \\\hline 
& client.activity.LoginActivity  &  Cclac1 \\\hline 
& client.activity.ProfileActivity  &  Cclac2 \\\hline 
\bo{--} & client.activity.EditUserActivity  &  ex Cclac3 \\\hline
\bo{--} & client.activity.EditSongsActivity  &  ex Cclac4 \\\hline 
& client.service  &  Cclse0 \\\hline 
& client.service.LoginService  &  Cclse1 \\\hline 
& client.service.UsersService  &  Cclse2 \\\hline 
& client.service.SongsService  &  Cclse3 \\\hline 
& client.service.LibraryService  &  Cclse4 \\\hline 
& client.place  &  Cclpl0 \\\hline 
& client.place.LoginPlace  &  Cclpl1 \\\hline 
& client.place.ProfilePlace  &  Cclpl2 \\\hline 
\bo{--} & client.place.EditUserPlace  &  ex Cclpl3 \\\hline 
\bo{--} & client.place.EditSongsPlace  &  ex Cclpl4 \\\hline 
& client.ui  &  Cclui0 \\\hline 
& client.ui.LoginView  &  Cclui1 \\\hline 
& client.ui.ProfileView  &  Cclui2 \\\hline 
\bo{--} & client.ui.EditUserView  &  ex Cclui3 \\\hline 
\bo{--} & client.ui.EditSongsView  &  ex Cclui4 \\\hline 
\bo{+} & client.ui.MyConstants  &  Cclui5 \\\hline  
& client.applet  &  Cclap0  \\\hline 
\bo{+} & client.applet.AppletConstants  &  Cclap1 \\\hline 
\bo{+} & client.applet.TranslateDTOXML  &  Cclap2  \\\hline 
\bo{+} & client.applet.AppletBar  &  Cclap3  \\\hline 
\bo{+} & client.applet.AppletBarView  &  Cclap4  \\\hline 
\bo{+} & client.applet.AppletBarConnector  &  Cclap5  \\\hline 
& shared  &  Csh0 \\\hline 
\bo{--} & shared.GenericDTO  &  ex Csh1 \\\hline 
& shared.SongSummaryDTO  &  Csh2 \\\hline 
& shared.SongDTO  &  Csh3 \\\hline 
& shared.LoginDTO  &  Csh4 \\\hline 
& shared.MusicLibraryDTO  &  Csh5 \\\hline 
\bo{--} & shared.UserSummaryDTO  &  ex Csh6 \\\hline 
& shared.UserDTO  &  Csh7 \\\hline 
& shared.UserCompleteDTO  &  Csh8 \\\hline 
\bo{+} & shared.MusicLibrarySummaryDTO  &  Csh9 \\\hline 
\bo{+} & shared.FieldVerifier  &  Csh10 \\\hline 
& shared.exception  &  Cshex0 \\\hline 
& shared.exception.NetMusException  &  Cshex1 \\\hline 
& shared.exception.LoginException  &  Cshex2 \\\hline 
\bo{--} & shared.exception.WrongLoginException  &  ex Cshex3 \\\hline 
& shared.exception.RegistrationException  &  Cshex4 \\\hline 
\bo{--} & shared.exception.NickNotFreeException  &  ex Cshex5 \\\hline 
\bo{--} & shared.exception.DuplicateEmailException  &  ex Cshex6 \\\hline 
& server  &  Cse0 \\\hline 
\bo{--} & server.PMF  &  ex Cse1 \\\hline 
& server.LoginHelper  &  Cse2 \\\hline 
& server.SongsServiceImpl  &  Cse3 \\\hline 
& server.LoginServiceImpl  &  Cse4 \\\hline 
& server.UserServiceImpl  &  Cse5 \\\hline 
& server.LibraryServiceImpl  &  Cse6 \\\hline 
& server.utils  &  Cseut0 \\\hline 
\bo{--} & server.utils.AuthenticationProvider  &  ex Cseut1 \\\hline 
& server.utils.Utils  &  Cseut2 \\\hline 
& server.utils.ServletUtils  &  Cseut3 \\\hline  
\bo{+} & server.utils.AppEngineCache  &  Cseut4 \\\hline
\bo{+} & server.utils.BCrypt  &  Cseut5 \\\hline
\bo{+} & server.youtube  &  Cseyo0 \\\hline
\bo{+} & server.youtube.YouTubeManager  &  Cseyo1 \\\hline
\bo{+} & server.youtube.YouTubeMedia  &  Cseyo2 \\\hline
\bo{+} & server.youtube.YouTubeVideo  &  Cseyo3 \\\hline
& server.servlet  &  Csese0 \\\hline 
& server.servlet.LoginSuperServlet  &  Csese1 \\\hline 
& server.servlet.LoginGoogleServlet  &  Csese2 \\\hline 
& server.servlet.LoginGoogleCallbackServlet  &  Csese3 \\\hline 
\bo{--} & server.servlet.YouTubeServlet  &  ex Csese4 \\\hline 
& server.persistent  &  Csepe0 \\\hline 
& server.persistent.UserAccount  &  Csepe1 \\\hline 
& server.persistent.MusicLibrary  &  Csepe2 \\\hline 
& server.persistent.Song  &  Csepe3 \\\hline 
\bo{+} & server.persistent.ODF  &  Csepe4 \\\hline 
&&\\\hline
\bo{+} & applet  &  C2ap0 \\\hline
\bo{+} & applet.DeviceScanner  &  C2ap1 \\\hline
\bo{+} & applet.NetmusApplet  &  C2ap2 \\\hline
\bo{+} & applet.TranslateXML  &  C2ap3 \\\hline
\caption{Componenti e relativi codici.}
\centering
\end{longtable}
\end{footnotesize}

\chapter{Specifica delle componenti}
\thispagestyle{fancy} %  header e footer in CHAPTER PAGE
Il ciclo di vita da noi impiegato prevede due diverse attivit\`a di
progettazione di dettaglio, come meglio specificato nel capitolo 3 del Piano di progetto (v 3.0). La specifica
delle componenti individuate nel primo incremento ha l'obiettivo di soddisfare i
requisiti obbligatori dell'analisi e la codifica di
queste fornisce una prima versione funzionante e stabile di NetMus. \\
La progettazione di dettaglio 2 si occupa invece di definire a basso livello le
componenti, o parti di esse, che servono a soddisfare i requisiti desiderabili e
quelli opzionali.\\\\
Le componenti presentate di seguito sono complete delle due diverse attivit\`a
di progettazione di dettaglio e contengono quindi l'architettura completa del
progetto NetMus.

\section*{Requisiti obbligatori}
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|}
\hline
\rowcolor{orange}                   
\sca{Requisiti obbligatori}\\
\hline
\endhead
\hline
\multicolumn{1}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1FN-1 Web Application NetMus \\ \hline
C1FN-1.1 Grafica simile ad iTunes \\ \hline
C1FN-1.1.1 Brani elencati opportunamente \\ \hline
C1FN-1.1.2 Menu laterali \\ \hline
C1FN-1.1.3 Visualiz. info dettagliate dei brani \\ \hline  
C1FN-1.4 Gestione profilo personale \\ \hline
C1FN-1.4.1 Modifica informazioni personali \\ \hline     
C1FN-1.4.2 Cambio password  \\ \hline 
C1FN-1.4.3 Cancellazione del proprio account \\ \hline                   
C1FN-1.9 Ricezione ed elaborazione dei brani \\ \hline            
C1FN-1.9.1 Controllo di validit\`a dei dati \\ \hline              
C1FN-1.9.2 Completamento info da database interno \\ \hline                                                        
C1FN-1.9.5 Inserimento nel Database \\ \hline                            
C1FN-1.13 Gestione Database \\ \hline
C1QN-1.6 Scalabilit\`a \\ \hline 
C1QN-1.6.1 Scalabilit\`a interfaccia grafica \\ \hline
C1QN-1.6.2 Scalabilit\`a massa di utenza \\ \hline
C1QN-1.9.4 Identificazione dati ridondanti \\ \hline                         
C1QN-1.9.6 Gestione concorrenza \\ \hline
C1VN-1.11 Deve utilizzare il cloud computing \\ \hline
C1VN-1.12 Tecnologie GAE e GWT \\ \hline
C1VN-1.13.1 Deve utilizzare Google Data Store \\ \hline  
C1QN-2 Utilizzo \\\hline  
C1VN-2.2 \underline{Open source} \\ \hline                 
C1QN-2.3 Portabilit\`a \\ \hline
C1VN-2.5 Semplicit\`a di utilizzo \\ \hline
C1QN-2.6 Manutenibilit\`a \\ \hline             
C1QN-2.7 Gestione errori \\ \hline      
C1QN-3.1 Manuale utente \\ \hline
C2FN-1 Recupero delle informazioni \\ \hline
C2FN-1.1 Recupero automatico \\ \hline
C2FN-1.2 Recupero manuale \\ \hline
C2FN-1.5 File ignorati \\ \hline
C2FN-3.1 Invio delle informazioni \\ \hline
C2QN-4 Utilizzo \\ \hline
C2QN-4.4 Manutenibilit\`a \\ \hline
C2VN-4.6 Norme legali \\ \hline
C2VN-4.7 Open source \\ \hline
\caption{Tabella riassuntiva dei requisiti coinvolti in progettazione di
dettaglio 1}
\end{longtable}
\end{footnotesize}

\newpage
\section*{Requisiti desiderabili ed opzionali}
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|}
\hline
\rowcolor{orange}
\sca{Requisiti desiderabili ed opzionali}\\
\hline
\endhead
\hline
\multicolumn{1}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1FD-1.1.4 Visualizza player YouTube\\\hline
C1FO-1.2.1 Pagina login indipendente\\\hline
C1FD-1.3 Personalizzazione del catalogo\\\hline
C1FD-1.3.1 Cancellazione brano\\\hline
C1FD-1.3.2 Modifica informazioni brano\\\hline  
C1FO-1.3.3 Creazione playlist\\\hline
C1FO-1.3.4 Ranking brani\\\hline
C1FD-1.4.4 Pubblicazione\\\hline
C1FD-1.5 Riproduzione tracce in streaming\\\hline
C1VD-1.5.2 Quote YouTube\\\hline
C1VD-1.5.3 YouTube Terms of Services \\ \hline
C1FD-1.7 Interazione con altri utenti\\\hline
C1FD-1.7.1 Visualizzazione altri profili\\\hline
C1FO-1.7.2 Lasciare commenti su profilo\\\hline
C1FD-1.8 Elaborazione dati utente\\\hline
C1FO-1.8.1 Esportazione \underline{PDF}\\\hline
C1FO-1.9.3 Completamento info da servizio esterno\\\hline
C1FD-1.10 Invio nuove informazioni a C2\\\hline
C1QO-2.1 Accessibilit\`a\\\hline
C1QD-2.4 Supporto multi-lingua\\\hline
C1QD-3.1.1 Manuale utente inglese \\\hline
C2FO-1.3 Informazioni senza connessione\\ \hline
C2FD-1.4 Informazioni dall'hard disk\\\hline
C2FO-1.6 Indicazioni file ignorati\\ \hline
C2QD-1.7 Ottimizzazione memoria cache\\ \hline 
C2FD-2 Aggiornamento e completamento informazioni\\\hline
C2QD-4.1 Portabilit\`a \\ \hline
C2QD-4.2 Semplicit\`a di utilizzo \\ \hline
C2QD-4.3 Supporto multi-lingua\\\hline
C2VD-4.5 Meno disturbo possibile \\ \hline
\caption{Tabella riassuntiva dei requisiti coinvolti in progettazione di
dettaglio 2}
\end{longtable}
\end{footnotesize}

\newpage
\section{Package client}

\begin{figure}[!h]
  \centering
  \includegraphics[width=14cm]{img/DP/package.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package client.}
\end{figure}

\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1 Web Application Netmus
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno.
\end{itemize}
\subsection*{Schema delle dipendenze architetturali}
Utilizzeremo le classi impegnate nelle procedure di autenticazione per spiegare
nel dettaglio le dipendenze presenti tra le componenti del package
\emph{client}. 
Queste dipendenze aderiscono al pattern MVP ed in particolare sono introdotte
dal framework MVP con Place e Activity.\\
Questo schema si ripete anche per gli altri gruppi funzionali di componenti:
profile e edit user.


Come possiamo vedere dal diagramma delle classi, la dichiarazione dei metodi
necessari alla comunicazione tra view e model viene fatta nell'interfaccia 
\co{Presenter} innestata nell'interfaccia \co{LoginView}. Cos\`i \co{LoginView}
si prende carico della definizione del presenter, anche se l'implementazione sta
nella classe \co{LoginActivity}, creando una forte dipendenza tra le componenti view e
presenter ma con il vantaggio di rimuovere qualsiasi tipo di collegamento
diretto dell'interfaccia grafica con il model.\\
La parte di visualizzazione vera e propria dei dati risiede in
\co{LoginViewImpl} che viene caricata con il deferred binding all'avvio
dell'applicazione garantendo buona separazione tra parte grafica e parte logica
e di conseguenza buona estendibilit\`a.\\
Questo schema di classi gestisce
anche la funzione di mantenimento dello stato lato client grazie a
\co{LoginPlace}. La classe Place mantiene alcune informazioni per definire lo
stato corrente e le rende disponibili, fornendo metodi \emph{get}, ad ogni
Activity che fa avviare. L'Activity a sua volta pu\`o inviarle, chiamando i
metodi \emph{set}, alla View che completa cos\`i il ciclo necessario al
mantenimento dello stato in ogni componente impiegata per la costruzione delle pagine.

\subsection*{Tipo, obiettivo e funzione del componente} % LASCIARE WARNING
Il package \emph{client} rappresenta la parte del sistema con la quale l'utente
pu\`o interagire. Tutte le sue classi ed i suoi sottopackage saranno compilati in
JavaScript da GWT, prima che il sistema venga depositato nel dominio
\emph{appspot.com} di Google. Contiene la classe \underline{Entry Point}
\co{Netmus}.
\subsection*{Relazioni d'uso di altre componenti}
Il package \emph{client} utilizza i DTO nel package \emph{shared}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.
\subsection*{Attivit\`a svolte e dati trattati}
Le attivit\`a svolte dalle sue classi verranno qui di seguito descritte.

\subsection{Classe Netmus}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1 Web Application Netmus
	\item C1VN-1.12 Deve utilizzare tecnologie GAE e GWT
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
  \item Nessuno.
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe rappresenta l'Entry Point di GWT che genera tutte le altre
componenti e rende disponibile e visibile l'intero sistema.\\
In particolare andr\`a a creare dinamicamente il \co{ClientFactoryImpl} adatto,
nel caso ce ne fossero diversi, e lo aggancia insieme all'EventBus al nostro
\co{NetmusPlaceHistoryMapper} ed al \co{NetmusActivityMapper}.
Inoltre allaccia al body Html il widget principale dell'applicazione.
\subsubsection*{Relazioni d'uso di altre componenti}
La classe \co{Netmus} utilizza le classi \co{ClientFactory},
\co{NetmusActivityMapper} e \\\co{NetmusPlaceHistoryMapper}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.
\subsubsection*{Attivit\`a svolte e dati trattati}
\co{Netmus} praticamente si occupa di avviare il sistema e portare l'utente alla
pagina iniziale di Login o, se gi\`a loggato, alla sua pagina Profilo.


\subsection{Classe ClientFactoryImpl (\emph{Abstract Factory})}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1 Web Application Netmus
    \item C1QO-2.1 Accessibilit\`a
    \item C1QN-2.3 Portabilit\`a
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
	\item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
In Netmus \`e disponibile un'unica implementazione dell'interfaccia
\co{ClientFactory}, poich\'e per il momento la portabilit\`a richiesta per i
pricipali browser in circolazione \`e gia soddisfatta e non verranno
implementate interfacce alternative. Nella classe si definiscono
le propriet\`a di un vista (desktop) del sistema.
\subsubsection*{Relazioni d'uso di altre componenti}
La classe utilizza \co{EventBus}, \co{PlaceController}, \co{LoginView},
\co{ProfileView}, \co{EditUserView} e
\co{EditSongView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\co{Netmus} crea l'istanza della classe. L'interfaccia \co{ClientFactory} \`e
utilizzata da \co{ActivityMapper} e successivamente dalle \co{Activity} per
l'utilizzo dell'EventBus.
\subsubsection*{Attivit\`a svolte e dati trattati}
La classe si occupa di istanziare l'event bus, il place controller e le varie
view. L'event bus gestisce le comunicazioni tra componenti, il place
controller permette la navigazione tra i Place e si occupa di avvisare
l'utente prima del passaggio ad uno stato differente.


\newpage
\section{Package client.ui} % LASCIARE WARNING
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1 Web Application Netmus
	\item C1FN-1.1 Grafica simile ad iTunes
	\item C1QN-2.3 Portabilit\`a
	\item C1QN-2 Utilizzo
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1QD-1.6.1 Scalabilit\`a interfaccia grafica
    \item C1QD-2.4 Supporto multi-lingua
    \item C1QO-2.1 Accessibilit\`a
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{ui} contiene le interfacce e le implementazioni delle View del
sistema. Le View generano gli ambienti grafici (assimilabili all'interfaccia
utente di iTunes) con cui gli utenti possono interagire e si occupano di
catturare gli eventi da essi prodotti. \\
L'implementazione della grafica sar\`a eseguita con l'utilizzo del framework
UiBinder ed il conseguente utilizzo del linguaggio CSS3 per la formattazione
che garantir\`a dei buoni livelli di accessibilit\`a.
Le annotazioni utilizzate all'interno del codice Java per interagire con i file
xml previsti da UiBinder saranno:
\begin{itemize}
  \item \bo{@UiField}: gli attributi marcati in questo modo hanno lo stesso nome
  di un elemento del file .xml a cui possono accedere successivamente alla
  chiamata \emph{uiBinder.createAndBindUi (this)} che associa all'attributo Java
  l'istanza appropriata di \co{SpanElement}. Questi attributi avranno
  visibilit\`a \emph{package}.
  \item \bo{@UiHandler("name\_of\_uifield")}: permette di scrivere dei metodi
  che gestiscono gli eventi scatenati dal parametro UiField senza
  dover dichiarare le classi handler previste da Java.
\end{itemize}  
\subsection*{Relazioni
d'uso di altre componenti} Questo package utilizza \emph{place} per creare istanze dei vari Place quando richiesto.
Tutte le classi qui contenute inoltre fanno uso della classe \co{MyConstants}
per la gestione del multi-lingua. 
\subsection*{Interfacce con e relazioni d'uso
da altre componenti} Viene utilizzato dal package \emph{activity}.
\subsection*{Attivit\`a svolte e dati trattati}
In sostanza svolge il compito di organizzare le informazioni del model in un
interfaccia accessibile dall'utente.


\subsection{Interfaccia LoginView / Classe LoginViewImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.1 Grafica simile ad iTunes
	\item C1FN-1.2 Registrazione
	\item C1QN-2 Utilizzo
	\item C1QN-2.3 Portabilit\`a
	\item C1VN-2.5 Semplicit\`a di utilizzo
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1QD-1.6.1 Scalabilit\`a interfaccia grafica
    \item C1FO-1.2.1 Pagina login indipendente
    \item C1QO-2.1 Accessibilit\`a
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
La classe \co{LoginView} rappresenta la finestra di login fornita all'utente
ogni qualvolta questo accede al sistema senza essersi gi\`a autenticato
precedentemente. \`E possibile effettuare la registrazione a NetMus
selezionando l'apposita sezione ed inserendo un nuovo username ed una password
con le relative conferme. La classe \co{LoginViewImpl} implementa l'interfaccia
\co{LoginView} che estende \co{isWidget} (interfaccia introdotta da GWT 2.1)
permettendo l'utilizzo di UiBinder per la disposizione dei widget e la gestione
degli handler. \\
Le azioni invocabili
sono tutte definite nell'interfaccia interna
\co{Presenter} e saranno utilizzate all'interno dei metodi handler. Viene
definito un \emph{enum} riguardante la tipologia di login che viene utilizzato
anche da \co{LoginActivity} e \co{LoginPlace}. \\ I contratti dei metodi (che vengono
implementati in \co{LoginActivity}) e l'\emph{enum} in questione sono:
\begin{itemize}
  \item public void goTo(in Place) : permette di spostarsi in un
  place differente anche relativo ad un'altra view. Ad esempio per aprire la pagina di
  \co{ProfileView} una volta verificato il login.
  \item public void sendLogin(in String, in String) throws  LoginException
  : invia al server i dati di login inseriti
  dall'utente. Viene inviata la richiesta di verifica del login con i dati
  presenti nel Datastore tramite una chiamata asincrona ad un metodo di
  \co{LoginService}. La chiamata RPC pu\`o lanciare eventi di tipo
  \co{LoginException}.
  \item public void sendGoogleLogin(in String, in String)
  throws LoginException : apre una pagina del sistema che richiama la servlet
  \co{LoginGoogleServlet}.
  \item public void sendRegistration(in String, in String, in String)
  throws RegistrationException : invia al server i dati di registrazione inseriti
  dall'utente. Viene fatto un primo controllo sulla validit\`a dei dati e de
  positivo viene inviata la richiesta di inserimento dell'utente nel database
  tramite una chiamata asincrona ad un metodo di \co{LoginService}. La chiamata
  RPC pu\`o lanciare eventi di tipo \co{RegistrationException}.
  \item public enum LoginType \{NETMUSLOGIN, NETMUSREGISTRATION,
  GOOGLELOGIN\} : Definisce le tipologie di login e registrazione possibili.
\end{itemize}
\subsubsection*{Relazioni d'uso di altre componenti}
Per permettere all'utente di cambiare pagina o stato della finestra la classe
pu\`o istanziare oggetti di tipo \co{LoginPlace}. Il form di login e quello di
registrazione appartengono ad uno stesso stato quindi i \co{LoginPlace}
istanziati saranno relativi a situazioni di errore o di login effettuato con successo. 
Tutte le classi qui contenute inoltre fanno uso della classe \co{MyConstants}
per la gestione del multi-lingua. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} La vista
viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
\co{LoginActivity}. 
\subsubsection*{Attivit\`a svolte e dati trattati} La classe permette all'utente
di scegliere se effettuare il login tramite Netmus o Google oppure la
registrazione attraverso un'interfaccia grafica accattivante e di semplice utilizzo, contiene una form
per l'inserimento password e nome utente e pu\`o visualizzare warning se i dati
inseriti non sono corretti. \\
La pagina \`e disponibile in due lingue: italiano ed inglese.\\
Tra gli attributi ed i metodi presentati vi sono anche i widget e gli handler
implementati con UiBinder in LoginViewImpl.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ myConstants: MyConstants & Gestore dell'internazionalizzazione associato a
questa pagina.\\\hline 
- listener: Presenter & Presenter associato a questa
pagina.\\\hline 
- type: LoginType & Tipologia di accesso che si sta effettuando.\\\hline
@UiField container: HTMLPanel & Finestra che contiene l'intera pagina.\\\hline
@UiField login: Label & Etichetta che se cliccata invia i dati e avvia
la procedura di login o di registrazione.\\\hline 
@UiField register: Label & Etichetta che se cliccata apre la
visualizzazione del form di registrazione.\\\hline 
@UiField account: Label &
Etichetta che descrive i campi di inserimento login e password.\\\hline
@UiField user: TextBox & Campo per l'inserimento del login.\\\hline
@UiField password: TextBox & Campo per l'inserimento della password.\\\hline
@UiField c\_password: TextBox & Campo per l'inserimento della
password di conferma.\\\hline 
@UiField error: Label & Etichetta che contiene il testo di eventuali
errori avvenuti durante il login o la registrazione.\\\hline 
@UiField check\_google: RadioButton & Bottone di selezione del tipo di
login.\\\hline 
@UiField check\_netmus: RadioButton & Bottone di selezione del tipo di
login.\\\hline
\caption{Campi dati di LoginView}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ setPresenter(in Presenter) & Questo metodo viene usato da
\co{LoginActivity} per impostare una sua istanza come implementazione
del presenter di \co{LoginView}.\\\hline 
+ setUser(in String) & Questo metodo viene usato da
\co{LoginActivity} per impostare l'username inserito nel precedente
tentativo di login o registrazione.\\\hline 
+ setPassword(in String) & Questo metodo viene usato da
\co{LoginActivity} per impostare la password inserita nel precedente
tentativo di login o registrazione.\\\hline 
+ setError(in String) & Questo metodo viene usato da
\co{LoginActivity} per impostare il testo di un errore occorso nel
precedente tentativo di login o registrazione.\\\hline
+ setLoginType(in LoginType) & Serve ad impostare il tipo di login o
registrazione che si sta effettuando.\\\hline 
+ setLayout() & Aggiunta il layout all'avvio.\\\hline
@UiHandler(``login'') handleClickLogin(in ClickEvent) & Quando viene
premuto il bottone di login invia all'activity associata la richiesta di login o
registrazione.\\\hline @UiHandler(value=\{``user'', ``password'', ``c\_password''\})
handlePressEnterPassword(in KeyPressEvent) & Quando viene premuto in tasto
``enter" invia all'activity associata la richiesta di login o
registrazione.\\\hline @UiHandler(``register'') handleClickRegister(in ClickEvent) & Se la pagina si
trova nello stato \co{LoginType.LOGINNETMUS} ridispone gli elementi in
modo da visualizzare il form intero per la registrazione, altrimenti
nasconde i campi per registrazione lasciando solamente quelli per il
login.\\\hline
@UiHandler(``check\_google'') handleClickGoogle(in ClickEvent) & Viene
avviato quando l'utente seleziona Google come tipologia di login e
aggiorna l'attributo \co{type}. \\\hline @UiHandler(``check\_netmus'')
handleClickNetmus(in ClickEvent) & Viene
avviato quando l'utente seleziona Netmus come tipologia di login e
aggiorna l'attributo \co{type}.\\\hline
\caption{Metodi di LoginView}
\end{longtable}

\subsection{Interfaccia ProfileView / Classe ProfileViewImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.1 Grafica simile ad iTunes
	\item C1FN-1.1.1 Brani elencati opportunamente
	\item C1FN-1.1.2 Menu laterali
	\item C1FN-1.1.3 Visualiz. info dettagliate dei brani
    \item C1FN-1.4 Gestione profilo personale
    \item C1FN-1.4.1 Modifica informazioni personali
    \item C1FN-1.4.2 Cambio password
    \item C1FN-1.4.3 Cancellazione del proprio account
    \item C1QN-2 Utilizzo
    \item C1QN-2.3 Portabilit\`a
    \item C1VN-2.5 Semplicit\`a di utilizzo
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo 
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.3 Creazione playlist  
    \item C1FO-1.3.4 Ranking brani  
    \item C1FD-1.4.4 Pubblicazione
    \item C1QD-1.6.1 Scalabilit\`a interfaccia grafica
    \item C1FD-1.7 Interazione con altri utenti
    \item C1FD-1.7.1 Visualizzazione altri profili
    \item C1FO-1.8.1 Esportazione PDF
    \item C1QO-2.1 Accessibilit\`a
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Il sistema mette a disposizione una vista per la visualizzazione del profilo e
dei brani di un generico utente registrato e per la riproduzione dalla musica
tramite un player streaming. La classe \co{ProfileViewImpl} implementa
l'interfaccia \co{ProfileView} che estende \co{isWidget} (interfaccia introdotta
da GWT 2.1). \\
Le azioni invocabili dai metodi handler sono tutte definite nell'interfaccia
interna \co{Presenter} ma l'implementazione risieder\`a in \co{ProfileActivity}
e comprender\`a chiamate asincrone al server attraverso i metodi di
\co{LoginService}, \co{LibraryService}, \co{SongsService} e \co{UsersService}.\\
I metodi in questione sono:
\begin{itemize}
    \item void logout(): effettua la deautenticazione dell'utente chiudendo la
    sessione HTTP corrente e rimuovendo il cookie relativo. Una volta effettuate
    queste operazioni viene aperta la pagina di \co{LoginView}.
    \item void goTo(Place place) : permette di spostarsi in un place differente
    anche relativo ad un'altra view. Ad esempio per aprire la pagina di
    \co{LoginView} dopo aver effettuato il logout.
    \item void setUser(): ricerca ed imposta l'username dell'utente del quale
    si vuole visualizzare il profilo, lo stato di default prevede la
    visualizzazione del profilo dell'utente che ha richiesto la
    pagina.
    \item void setPlaylistList(): imposta la lista dei
    titoli delle singole playlist dell'utente impostato precedentemente.
    \item void setFriendList(): imposta la lista degli
    utenti affini su Netmus all'utente impostato precedentemente.
    \item void setSongInfo(): imposta il titolo della canzone in
    ascolto.
    \item void setPlaylistSongs(String titoloPlaylist): imposta le canzoni
    con i relativi album dato il nome di una playlist in input.
    \item void setSongs(): fornisce tutte le canzoni legate alla libraria
    musicale dell'utente sotto forma di \co{SongDTO}.
    \item void playYouTube(): dopo aver effettuato una ricerca su YouTube grazie
    alle classi del package \emph{server.youtube} fornisce il link youtube della
    canzone selezionata.
    \item void addPlaylist(String title): crea una nuova playlist a
    disposizione dell'utente che sta visualizzando la propria pagina.
    \item void addToPLaylist(String playlist, String autore, String titolo,
    String album): aggiunge la canzone in input alla playlist desiderata e
    restituisce \emph{true} in caso di successo.
    \item void removeFromPLaylist(String playlist, String autore, String titolo,
    String album): rimuove la canzone in input dalla playlist desiderata e
    restituisce \emph{true} in caso di successo.
\end{itemize}
\subsubsection*{Relazioni d'uso di altre componenti}
La classe istanzia oggetti di tipo \co{ProfilePlace} che definiscono gli stati
attuali della vista.
Tutte le classi qui contenute inoltre fanno uso della classe \co{MyConstants}
per la gestione del multi-lingua. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
 La vista viene creata da \co{ClientFactory} ed \`e settata ed utilizzata dalla
 \co{ProfileActivity}.
 \subsubsection*{Attivit\`a svolte e dati trattati}
Contiene la lista dei profili che l'utente pu\`o visualizzare e gli strumenti
per navigare tra i cataloghi musicali.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ myConstants: MyConstants & Gestore dell'internazionalizzazione associato a
questa pagina.\\\hline 
- listener: Presenter & \\\hline
- name: String & \\\hline
- vertical\_offset: int \emph{degault = 65} & \\\hline
- vertical\_semioffset: int \emph{default = 275} & \\\hline
- lista\_canzoni: CellTable\textless Song\textgreater & \\\hline;
@UiField logout: Anchor & \\\hline
@UiField utente, numero\_brani, titolo\_playlist, info\_youtube\_link,
brano\_aggiungere, brano\_rimuovere: Label & \\\hline
@UiField(provided=true) catalogo: CellTable\textless Song\textgreater & \\\hline 
@UiField container, catalogo\_container,
playlist\_container, playlist\_contenuto, playlist\_songs, song\_container,
song\_contenuto, main\_panel, left\_panel, playlists, friends,
friends\_titolo, info, search, youtube, classifica,
info\_youtube, youtube\_appendice: HTMLPanel & \\\hline
@UiField play, play\_youtube, forward, rewind, cover,
edit\_button, account\_button, social\_button, star1, star2, star3, star4,
star5, chiudi\_playlist, chiudi\_song, logo\_youtube,
chiudi\_youtube, aggiungi\_branoplaylist, rimuovi\_branoplaylist,
aggiungi\_playlist: Image & \\\hline 
- playlist\_opened: boolean & \\\hline 
- song\_opened: Image & \\\hline 
- selected\_song: Song & \\\hline 
- selected\_song\_playlist: Song & \\\hline
- canzoni\_catalogo: List\textless Song\textgreater & \\\hline 
- canzoni\_playlist: List\textless Song\textgreater & \\\hline
- dataProvider\_playlist: ListDataProvider\textless Song\textgreater & \\\hline 
- dataProvider\_catalogo: ListDataProvider\textless Song\textgreater & \\\hline
\caption{Campi dati di ProfileView}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ setPresenter(in Presenter) & Questo metodo viene usato da
\co{ProfileActivity} per impostare una sua istanza come implementazione
del presenter di \co{ProfileView}.\\\hline 
+ setName(in String): & Questo metodo viene usato da
\co{ProfileActivity} per fornire il nome del profilo alla crezione della
\co{ProfileView}. \\\hline 
+ setNumeroBrani(in int) & Questo metodo viene usato da
\co{ProfileActivity} per fornire il numero di brani alla crezione della
\co{ProfileView}.\\\hline 
+ setUser(in String) & Questo metodo viene usato da
\co{ProfileActivity} per fornire l'username dell'utente alla crezione della
\co{ProfileView}.\\\hline
+ paintCatalogo(in List\textless String\textgreater) & Riempie il
catalogo\\\hline 
+ paintPlaylist(in String[]) & Riempie la lista delle playlist.\\\hline
+ paintPlaylistSongs(List\textless String\textgreater) &
Riempie la singola playlist delle sue canzoni.\\\hline 
+ paintFriendlist(in String[]) & Riempie la lista dei contatti.\\\hline
+ setInfo(in String) & Imposta la finestra informativa.\\\hline
+ viewPlaylist(in String) & Visualizza la playlist scelta.\\\hline
+ closePlaylist() & Chiude il gestore della playlist.\\\hline
+ playYouTube(in String) & Apre il player youtube sulla relativa
canzone.\\\hline 
+ closeYouTube() & Chiude il player youtube.\\\hline
+ setBranoCatalogo(in Song) & Imposta il brano selezionato sul catalogo.\\\hline
+ setBranoPlaylist(in Song) & Imposta il brano selezionato sulla
playlist.\\\hline 
+ addToPLaylist(in String, in String, in String) & Aggiungi il brano del
catalogo alla playlist .\\\hline 
+ removeFromPlaylist(in String, in String, in String) & Rimuovi il brano dalla
playlist.\\\hline 
+ setLayout() & Inizializza il layout.\\\hline
+ addToPlaylists(in String) & Aggiunge una nuova playlist.\\\hline 
+ viewSong(in Song) & Visulaizza la scheda della canzone.\\\hline
+ closeSong() & Chiude la scheda della canzone.\\\hline
@UiHandlers handler(in Event) & \\\hline
\caption{Metodi di ProfileView}
\end{longtable}

\subsection{Interfaccia MyConstants}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1QO-2.1 Accessibilit\`a
    \item C1QD-2.4 Supporto multi-lingua
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe contiene molti metodi senza implementazione che ritornano una
stringa. Le stringhe ritornate da questi metodi insieme comprendono l'intero
testo presente nelle interfacce grafiche e che deve essere presentato in italiano ed in inglese secondo le
preferenze dell'utente. \\
Le implementazioni delle due lingue vengono predisposte durante la compilazione
e caricate tramite deferred binding rendendo il cambio di lingua molto efficente
a run-time. 
\subsubsection*{Relazioni d'uso di altre componenti}
I testi sono prelevati dai file \emph{MyConstants.properties} e
\emph{MyConstants\_it.properties}. 
\subsubsection*{Interfacce con e relazioni
d'uso da altre componenti}
Tutte le classi del package \emph{ui} ne fanno uso.
\subsubsection*{Attivit\`a svolte e dati trattati}
Permette il caricamento dei testi in diverse lingue tramite deferred binding
configurabile nel file di progetto \emph{Netmus.gwt.xml}.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
\# testi\_vari: String & Tutti i metodi presenti in questa classe sono di
questo tipo e vengono invocati al posto dell'inserimento di un normale
testo statico nelle classi view.\\\hline
\caption{Metodi di MyConstants}
\end{longtable}

\newpage
\section{Package client.activity} % LASCIARE WARNING
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Questo package contiene le classi Activity che corrispondono in pratica alla
componente Presenter del pattern MVP originale. la Activity sono avviate e
terminate da un ActivityManager associato con un contenitore Widget. Un activity
pu\`o inoltre visualizzare automaticamente un avviso quando sta per essere
terminata (in pi\`u l'ActivityManager ci avvisa quando la finestra sta per
essere chiusa).
\subsection*{Relazioni d'uso di altre componenti} Il package usa gli oggetti
View di \emph{ui} e Place di \emph{place} per gestire informazioni di stato o
modificatori della vista, ma quando serve pu\`o utilizzare servizi forniti da
\emph{service} (per passare i dati alla view).
\subsection*{Interfacce con e relazioni d'uso da altre componenti} Le istanze
delle classi Activity vengono create dal \co{NetmusActivityMapper} che quando,
riceve una richiesta di una Activity, ritorna una corretta istanza di tale
classe, in base al Place corrente.
\subsection*{Attivit\`a svolte e dati trattati} Il package \emph{activity} si
pu\`o considerare il boss, poich\'e gestisce l'intera logica di business del
client.

\subsection{Classe LoginActivity}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.2 Registrazione
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe \`e di tipo \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{LoginView} rappresentando quindi il collegamento tra la parte
grafica presente nel client ed il modello che risiede nel server.
\subsubsection*{Relazioni d'uso di altre componenti} Invoca i servizi
asincroni di autenticazione forniti da \co{LoginService}.\\ Si occupa di
recuperare i dati da \co{LoginPLace} e trasferirli alla \co{LoginView}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} 
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{LoginPlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe ha il compito di settare gli attributi della pagina di login
adeguatamente allo stato rappresentato dal \co{LoginPlace} che l'ha originata e
deve fornire inoltre l'implementazione dei metodi dichiarati dalla view
all'interno dell'interfaccia \co{Presenter}.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- user: String & Username inserito dall'utente nello stato corrente, sar\`a
inizializzato con il valore ricevuto dal \co{LoginPlace} nel
costruttore.\\\hline 
- password: String & Password inserita dall'utente nello stato corrente, sar\`a
inizializzata con il valore ricevuto dal \co{LoginPlace} nel
costruttore.\\\hline 
- error: String & Errore pi\`u rilevante occorso nello stato
corrente, sar\`a inizializzato con il valore ricevuto dal \co{LoginPlace} nel
costruttore.\\\hline
- loginType: LoginType & Tipologia di login o registrazione che si sta
effettuando nello stato corrente, sar\`a
inizializzato con il valore ricevuto dal \co{LoginPlace} nel
costruttore.\\\hline
+ LoginType NETMUSLOGIN, NETMUSREGISTRATION: enum & attributo ereditato
da \co{LoginView.Presenter}\\\hline
\caption{Campi dati di LoginActivity}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ start(AcceptsOneWidget, EventBus) & Invocato da \co{ActivityManager}
per avviare una nuova \co{LoginActivity}\\\hline 
+ goTo(in Place) & Permette di
spostarsi in un place differente anche relativo ad un'altra view. Ad esempio per aprire la pagina di
\co{ProfileView} una volta verificato il login. Verr\`a quindi
richiamato sempre al termine dei metodi \co{sendLogin} e
\co{sendRegistration}\\\hline 
+ sendLogin(in LoginDTO) & Invia al
server il login inserito dall'utente dopo averne controllato la validit\`a
(e-mail valida, password sufficientemente lunga). Se la richiesta di
autenticazione al server ha successo il metodo avvia la sessione HTTP ed apre la
pagina principale \co{ProfileView}, se invece la comunicazione col
server fallisce o non sono stati superati i controlli di validit\`a del
login il metodo apre un'altra finestra di login con il messaggio di
errore adeguato. Gli errori lato server vengono gestiti con eccezioni di
tipo \co{LoginException}.\\\hline 
+ sendRegistration(in LoginDTO) & Invia al
server i dati di registrazione inseriti dall'utente dopo averne controllato la
correttezza (e-mail valida, password sufficientemente lunga). Se la
risposta del server è affermativa ed i dati sono stati inseriti con
successo l'utente viene indirizzato alla pagina di \co{ProfileView},
altrimenti il metodo apre un'altra finestra di login con il messaggio di
errore adeguato. Gli errori lato server vengono gestiti con eccezioni di
tipo \co{RegistrationException}.\\\hline
\caption{Metodi di LoginActivity}
\end{longtable}


\subsection{Classe ProfileActivity}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.1.3 Visualiz. info dettagliate dei brani
	\item C1FN-1.4 Gestione profilo personale
	\item C1FN-1.4.1 Modifica informazioni personali
	\item C1FN-1.4.2 Cambio password
	\item C1FN-1.4.3 Cancellazione del proprio account
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo 
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.3 Creazione playlist
    \item C1FO-1.3.4 Ranking brani
    \item C1FD-1.5 Riproduzione tracce in streaming
    \item C1FD-1.7 Interazione con altri utenti
    \item C1FD-1.7.1 Visualizzazione altri profili
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe estende \co{AbstractActivity}, implementa il \co{Presenter}
interno alla \co{ProfileView} e richiede al \co{clientFactory} di
implementarela.
\subsubsection*{Relazioni d'uso di altre componenti}
Invoca i servizi di interrogazione e modifica dei dati profilo forniti da
\co{UsersService} e utilizza le relative classi \co{ProfilePlace} e
\co{ProfileView}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene creata da \co{NetmusActivityMapper} quando viene richiesta la Activity da
un Place di tipo \co{ProfilePlace}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe gestisce, assieme a \co{UsersService}, le attivit\`a utili alla
creazione ed interazione con l'utente della pagina principale come la
richiesta dei dati utente dettagliati, della lista dei brani, del dettaglio di
un brano, ecc.

\newpage
\section{Package client.place} % LASCIARE WARNING
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
	\item C1QN-2 Utilizzo
	\item C1VN-2.5 Semplicit\`a di utilizzo
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package contiene le classi di tipo Place. I Place sono indispensabili
per far s\`i che la corrispondente Activity sia accessibile via URL e per
memorizzare i dati relativi allo stato corrente del sistema in modo che siano
rapidamente recuperabili. 
\subsection*{Relazioni d'uso di altre componenti} A
questo package appartengono le classi \co{LoginPlace}, \co{ProfilePlace},
\co{EditUserPlace}, \\\co{EditSongsPlace}.\\
In ognuna di queste classi \`e presente una sottoclasse \co{Tokenizer} che
permette di serializzare lo stato del Place in un simbolo (token) URL e che non
\`e implementata da noi ma dal framework che utilizziamo, per questo non sar\`a
specificata nelle liste di attributi delle classi di questo package.
\subsection*{Interfacce con
e relazioni d'uso da altre componenti} I suoi elementi vengono utilizzati dal package \emph{mvp}. 
\subsection*{Attivit\`a svolte e dati trattati} Organizza i Places.

\subsection{Classe LoginPlace}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
	\item C1QN-2 Utilizzo
	\item C1VN-2.5 Semplicit\`a di utilizzo
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{LoginPlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
Ha la funzione di contenere i dati dello stato corrente della pagina di login.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{LoginView} quando viene effettuato un qualsiasi
tentativo di login o registrazione ed \`e utilizzata nella creazione della
conseguente \co{LoginActivity}. 
\subsubsection*{Attivit\`a svolte e dati trattati} Il compito della classe \`e
quello di indicizzare gli stati della pagina di login e mantenerne i dati
finch\'e l'applicazione \`e attiva. Questo permette inoltre di rendere
accessibili le funzionalit\`a di history e bookmarking del browser.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- user: String & Username inserito dall'utente nello stato corrente, sar\`a
diverso da \emph{null} solo nel caso vi si acceda in seguito ad un errore o
dalla history.\\\hline 
- password: String & Password inserita dall'utente nello stato corrente, sar\`a
diversa da \emph{null} solo nel caso vi si acceda in seguito ad un errore o
dalla history.\\\hline 
- error: String & Errore pi\`u rilevante occorso nello stato
corrente, sar\`a diverso da \emph{null} solo nel caso sia avvenuto un
errore nel tentativo di login/registrazione precedente.\\\hline
- loginType: LoginType & Tipologia di login o registrazione che si sta
effettuando nello stato corrente, di default \`e NETMUSLOGIN.\\\hline
\caption{Campi dati di LoginPlace}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ getUser() : String & Getter dell'attributo \co{user}\\\hline
+ getPassword() : String & Getter dell'attributo \co{password}\\\hline
+ getError() : String & Getter dell'attributo \co{error}\\\hline
+ getLoginType() : LoginType & Getter dell'attributo \co{loginType}\\\hline
\caption{Metodi di LoginPlace}
\end{longtable}

\subsection{Classe ProfilePlace}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6.2 Scalabilit\`a massa di utenza
    \item C1QN-2 Utilizzo
    \item C1VN-2.5 Semplicit\`a di utilizzo
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{ProfilePlace} estende la classe \co{Place} messa a disposizione da GWT. La
classe \`e associata alla classe interna \co{Tokenizer} che permette di
serializzare lo stato del Place in un simbolo (token) URL.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe \`e creata da \co{ProfileView} utilizzata da \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Il compito della classe \`e quello di indicizzare gli stati di
\co{ProfileActivity} in modo da rendere accessibili le funzionalit\`a di history
e bookmarking del browser.



\newpage
\section{Package client.mvp}
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
\subsection*{Relazioni d'uso di altre componenti}
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsection*{Attivit\`a svolte e dati trattati}

\subsection{Classe NetmusActivityMapper}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-2 Utilizzo
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe si occupa di mappare ogni attivit\`a con il corrispondente Place.
\subsubsection*{Relazioni d'uso di altre componenti}
La classe utilizza istanze di classi appartenenti al package
\emph{client.place} e crea istanze di classi appartenenti al package
\emph{client.activity}.
\subsubsection*{Interfacce con e relazioni d'uso da altre
componenti} Nessuna.
\subsubsection*{Attivit\`a svolte e dati trattati}
Tramite un riferimento ad un Place crea e restituisce un oggetto activity.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- clientFactory: ClientFactory & Factory che deve essere passata a tutte
le attivit\`a instanziate in questa classe. \\\hline
\caption{Campi dati di NetmusActivityMapper}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ getActivity(in Place): Activity & Mappa e istanzia l'activity adeguata
in base al tipo del place dato in input.\\
& \co{LoginPlace}-\co{LoginActivity}\\ 
& \co{ProfilePlace}-\co{ProfileActivity}\\
& \co{EditSongsPlace}-\co{EditSongsActivity}\\
& \co{EditProfilePlace}-\co{EditProfileActivity}\\\hline
\caption{Metodi di NetmusActivityMapper}
\end{longtable}


\subsection{Classe NetmusPlaceHistoryMapper}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-2 Utilizzo
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Dichiara e riferisce tutti i places che saranno utilizzati da Netmus.
\subsubsection*{Relazioni d'uso di altre componenti}
Utilizza i PlaceTokenizer.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Il PlaceHistoryHandler utilizza la classe per la sincronizzazione del URL.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da connessione tra i PlaceTokenizer (classe interna ad ogni Place) e il
PlaceHistoryHandler (messo a disposizione da GWT) che sincronizza l'URL del
browser con i vari Place.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
@WithTokenizers \begin{verbatim}(LoginPlace.Tokenizer.class,
ProfilePlace.Tokenizer.class,
EditUserPlace.Tokenizer.class,
EditSongsPlace.Tokenizer.class)\end{verbatim} & Questa annotazione che precede
la definizione dell'interfaccia permette di associare ogni place al \co{PlaceHistoryHandler} e quindi risparmia
la dichiarazione esplicita di attributi e metodi per l'implementazione
di un \co{TokenizerFactory} separato.\\\hline
\caption{Metodi di NetmusPlaceHistoryMapper}
\end{longtable}


\newpage
\section{Package client.service} % LASCIARE WARNING
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1 Web Application Netmus
    \item C1VN-1.11 Deve utilizzare il cloud computing
    \item C1VN-1.12 Deve utilizzare tecnologie GAE e GWT
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Il contenuto di questo package \`e di fondamentale importanza poich\'e
rappresenta la parte client del framework RPC che viene utilizzato per scambio
di oggetti tra client e server. \co{client.service} \`e costituito da tutte
le interfacce dei servizi remoti offerti dal server. Le funzionalit\`a delle
classi in esso contenute saranno divise in base al tipo di servizio offerto. Per
ognuno di questi sar\`a presente un'interfaccia normale (che estende
\co{RemoteService}) e un'interfaccia \bo{asincrona}.
\subsection*{Relazioni d'uso
di altre componenti} Queste interfacce vengono implementate su \emph{server}, perci\`o non
hanno relazioni d'uso definite. Verranno sempre usati oggetti DTO (definiti in
\emph{shared}) come pacchetti di scambio nei servizi tra \emph{client} e
\emph{server}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Verranno istanziati degli oggetti di \emph{service} col metodo del
\emph{deferred binding} dalla classe di Entry Point \co{Netmus}, pur avendo
visibilit\`a solamente delle interfacce. Verranno poi usati dalle varie Activity.
\co{LibraryService} viene utilizzara anche dalla classe di collegamento con la
componente 2 \co{client.AppletBar}. 
\subsection*{Attivit\`a svolte e dati trattati}
Vengono forniti tutti i servizi che il server sar\`a in grado di dare, i dati
trattati saranno i DTO definiti nel package \emph{shared}.\\\\
\underline{I metodi sono presentati nelle rispettive classi implementazione
descritte nel paragrafo 4.9.}

\subsection{Interfaccia SongService (e SongServiceAsync)}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.4 Ranking brani
    \item C1QD-1.5.1 Ottimizzazione della ricerca su YouTube
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe dovr\`a consentire alle componenti Activity di \emph{client} di
inviare richieste di vario tipo a \emph{server} riguardanti informazioni sui
brani musicali. Le richieste in questione dovranno tenere in considerazione il
fatto che ogni brano pu\`o essere condiviso da molti utenti e la modifica di
qest'ultimo \`e molto delicata da gestire, per questo motivo si far\`a ricorso a
questi servizi solo se strettamente necessario. Sar\`a presente anche
\co{SongServiceAsync}, che gestir\`a il ritorno dai metodi in maniera asincrona. \subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con gli oggetti DTO
(\co{UserDTO, SongDTO}, \co{SongSummaryDTO}, \co{MusicLibraryDTO} e
\co{MusicLibrarySummaryDTO}) che verranno utilizzati per il trasferimento
client-server. \subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per interagire con i brani
salvati nel Datastore e condivisi da pi\`u utenti. Utilizzer\`a dati di tipo
SongDTO e SongSummaryDTO.\\\\ \underline{I metodi sono presentati nella
rispettiva classe implementazione descritta nel paragrafo 4.9.1.}

\subsection{Interfaccia UserService (e UsersServiceAsync)}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.4 Gestione profilo personale
	\item C1FN-1.4.1 Modifica informazioni personali
	\item C1FN-1.4.2 Cambio password
	\item C1FN-1.4.3 Cancellazione del proprio account
    \item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.7 Interazione con altri utenti
    \item C1FD-1.7.1 Visualizzazione altri profili
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe consentir\`a alle componenti Activity di \emph{client} di inviare
richieste di vario tipo a \emph{server} riguardanti le informazioni personali
dell'utente da mostrare nell'interfaccia grafica. Le funzionalit\`a comprese in
questi servizi saranno solamente quelle basilari ovvero l'inserimento, la
modifica e la cancellazione di un utente. Sar\`a presente
anche \co{UsersServiceAsync}, che gestir\`a il ritorno dai metodi in maniera
asincrona. 
\subsubsection*{Relazioni d'uso di altre componenti} Queste interfacce verranno
implementate su \emph{server}, perci\`o non avranno relazioni d'uso definite, se
non con gli oggetti DTO (\co{UserDTO} e \co{UserCompleteDTO}) che verranno
utilizzati per il trasferimento client-server. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{EditUserActivity} e \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere o
modificare (quando possibile) qualsiasi tipo di informazione riguardante gli
utenti del sistema e utilizzer\`a dati di tipo \co{UserDTO}
e \co{UserCompleteDTO}.\\\\
\underline{I metodi sono presentati nella rispettiva classe implementazione
descritta nel paragrafo 4.9.2.}

\subsection{Interfaccia LibraryService (e LibraryServiceAsync)}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6 Scalabilia\`a
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C1FN-1.9.1 Controllo di validit`a dei dati
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FO-1.3.3 Creazione playlist
    \item C1FO-1.3.4 Ranking brani
    \item C1FD-1.8 Elaborazione dati utente
    \item C1FO-1.8.1 Esportazione PDF
    \item C1FO-1.9.3 Completamento info da servizio esterno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe consentir\`a alle componenti Activity di \emph{client} di inviare
richieste di vario tipo a \emph{server} riguardanti il catalogo musicale utente
da mostrare nell'interfaccia grafica. Qui vengono definiti molti dei servizi
principali offerti da Netmus, in particolare l'inserimento di nuove canzoni nel
Datastore con la chiamata asincrona \emph{sendUserNewMusic}. Le
funzionalit\`a di gestione delle playlist e delle statistiche del
catalogo sono interamente racchiuse in qeusta classe. Sar\`a presente anche
\co{LibraryServiceAsync}, che gestir\`a il ritorno dai metodi in maniera asincrona. 
\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce verranno implementate su \emph{server}, perci\`o non
avranno relazioni d'uso definite, se non con gli oggetti DTO
(\co{MusicLibraryDTO} e \co{MusicLibrarySummaryDTO}) che verranno utilizzati per
il trasferimento client-server.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e verr\`a utilizzata da \co{ProfileActivity}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornir\`a l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante la libreria musicale utente e utilizzer\`a dati di
tipo \co{MusicLibraryDTO}.\\\\
\underline{I metodi sono presentati nella rispettiva classe implementazione
descritta nel paragrafo 4.9.3.}


\subsection{Interfaccia LoginService (e LoginServiceAsync)}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.2 Registrazione
	\item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{LoginService} mette a disposizione metodi
che soddisfano le possibili richieste verso la parte model riguardanti l'autenticazione degli utenti.
Questi metodi si occupano inoltre di gestire la parte relativa alle sessioni HTTP. 
\`E presente anche \co{LoginServiceAsync}, che gestisce il ritorno dai
metodi in maniera asincrona.
\subsubsection*{Relazioni d'uso di altre componenti}
Queste interfacce vengono implementate su \emph{server}, perci\`o non
hanno relazioni d'uso definite, se non con oggetti \co{LoginDTO} che
vengono utilizzati per il trasferimento client-server.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa interfaccia verr\`a istanziata da \co{Netmus} tramite deferred
binding e viene utilizzata \\\co{LoginActivity} e dalle altre Activity che
permetteranno il login ed il logout dell'utente.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa interfaccia fornisce l'accesso a servizi per richiedere qualsiasi tipo
di informazione riguardante l'autenticazione dell'utente al sistema
e utilizza dati di tipo \co{LoginDTO}.
Gli attributi e i metodi di questa interfaccia verranno descritti nel
dettaglio nella classe \co{LoginServiceImpl} che li implementa. \\\\
\underline{I metodi sono presentati nella rispettiva classe implementazione
descritta nel paragrafo 4.9.4.}


\newpage
\section{Package client.applet} % LASCIARE WARNING

\begin{figure}[h]
  \centering
  \includegraphics[width=13cm]{img/DP/netmus_client_applet.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.client.applet.}}
\end{figure}


\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C2FN-3 Comunicazione con C1
    \item C2QN-4.4 Utilizzo
    \item C2VN-4.6 Norme legali
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Obiettivo e funzione del componente}
Questo package conterr\`a le classi necessarie a gestire richieste e segnali
provenienti dalla applet precompilata, che andremo ad inserire nel programma.
Tale applet avr\`a la funzione di effettuare la scansione e l'estrazione
automatica dei tag dei file musicali Mp3, presenti nei dispositivi di
archiviazione di massa che vengono collegati alla macchina dell'utente.\\
Per comunicare con tale applet sono state valutate due possibili metodologie
d'implementazione: l'uso di una libreria che crea un sistema proxy tra la applet
e GWT oppure l'utilizzo di \underline{JSNI} (JavaScript Native Interface) che
sostanzialmente ci permette di effettuare chiamate di metodi da JavaScript al
codice \underline{Java} e viceversa: abbiamo utilizzato quest'ultima opzione.
\subsection*{Meccanismo di lavoro del componente}
Una volta ricevuta una richiesta da parte della applet, verr\`a gestita da un
Service che si occuper\`a di elaborare i dati col supporto del server, per poi
notificare all'utente l'avvenuta estrazione e fargliela valutare e accettare.
Una volta accettata la lista brani, si richiede la memorizzazione nel DataStore
tramite \co{SongsService}.\\
In particolare, lo scambio delle informazioni dei brani tra applet e questo
package avviene utilizzando \underline{XML}, permettendo quindi di contenere
tutte le informazioni necessarie all'interno di un'unica stringa, in maniera da
aggirare molte difficolt\`a e limiti derivanti dall'utilizzo di JSNI.
\subsection*{Relazioni d'uso di altre componenti}
Si fa utilizzo dei servizi offerti dalle classi presenti nel package
\emph{server}.

\subsection{Classe TranslateDTOXML}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C1FN-1.9.5 Inserimento nel Database
    \item C2FN-3 Comunicazione con C1
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Si occupa di interpretare le informazioni in formato XML ricevute dall'applet,
generando i relativi DTO contenenti le informazioni. Pu\`o effettuare anche
l'operazione inversa, ovvero generare una stringa in formato XML che rappresenta
le informazioni contenute nei DTO.
\subsubsection*{Relazioni d'uso di altre componenti}
Utilizza \co{SongDTO} contenuta in \emph{shared}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata da \co{AppletBar} per interpretare le informazioni provenienti
dall'applet.
\subsubsection*{Attivit\`a svolte e dati trattati}
Interpretazione e traduzione delle informarzioni dei brani da XML a DTO e
viceversa.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- ROOT\_NAME: String \emph{final static default = ``Library''} & \\\hline
- SONG\_NAME: String \emph{final static default = ``Song''} & \\\hline
- ALBUMTITLE\_NAME: String \emph{final static default = ``AlbumTitle''} &
\\\hline - AUTHORCOMPOSER\_NAME: String \emph{final static default =
``AuthorComposer''} & \\\hline 
- LEADARTIST\_NAME: String \emph{final static default = ``LeadArtist''} &
\\\hline 
- SONGGENRE\_NAME: String \emph{final static default = ``SongGenre''} &
\\\hline 
- SONGTITLE\_NAME: String \emph{final static default = ``SongTitle''} & \\\hline
- TRACKNUMBER\_NAME: String \emph{final static default = ``Year''} & \\\hline
- YEAR\_NAME: String \emph{final static default = ``Year''} & \\\hline
- FILE\_NAME: String \emph{final static default = ``File''} & \\\hline
- document: Document & \\\hline
- root: Element & \\\hline
\caption{Campi dati di TranslateDTOXML}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ reset() & \\\hline
+ DTOtoXML(in SongDTO) & \\\hline
+ generateXML(): String & \\\hline
+ generateDTO(in Element): SongDTO & \\\hline
+ XMLToDTO(in String): List\textless SongDTO\textgreater & \\\hline
\caption{Metodi di TranslateDTOXML}
\end{longtable}

\subsection{Classe AppletConstants}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C2QN-4 Utilizzo
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1QD-2.4 Supporto multi-lingua
    \item C2QD-4.3 Supporto multi-lingua
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Gestisce la traduzione delle frasi e/o avvisi da mostrare all'utente, a seconda
della lingua correntemente selezionata, utilizzando un meccanismo proprio di
GWT.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene usata da \co{AppletBar} e da \co{AppletBarView} per visualizzare in
maniera corretta lo stato dell'applet all'utente.
\subsubsection*{Attivit\`a svolte e dati trattati}
Utilizza i file \co{.properties} presenti in questo package, ognuno dei quali
definisce la traduzione corretta di ogni termine e/o frase in una determinata
lingua.
Una volta definita globalmente la lingua utilizzata, viene caricato
automaticamente il file contenente le definizioni di quella lingua.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
\# testi\_vari: String & Tutti i metodi presenti in questa classe sono di
questo tipo e vengono invocati al posto dell'inserimento di un normale
testo statico nelle classi di \emph{applet}.\\\hline
\caption{Metodi di AppletConstants}
\end{longtable}

\subsection{Classe AppletBar}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C1FN-1.9.1 Controllo di validit`a dei dati
    \item C1QN-2 Utilizzo
    \item C2FN-1.2 Recupero manuale
    \item C2FN-3 Comunicazione con C1
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Si occupa di interfacciare utente, servizi ed applet tra loro: in particolare,
comunica visivamente all'utente lo stato dell'applet tramite \co{AppletBarView},
e utilizza i servizi del server per salvare le informazioni estratte da quest'ultima.
Definisce i metodi JSNI per la comunicazione con l'applet utilizzando
\co{AppletConnector}. Utilizza il pattern Singleton.
\subsubsection*{Relazioni d'uso di altre componenti}
Utilizza \co{AppletConstrants} per la traduzione di alcuni messaggi,
\co{TranslateDTOXML} per la ricezione dei brani dall'applet, e \emph{server} per
salvare le informazioni.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzata da \co{ProfileActivity} per l'inserimento e la rimozione
dell'applet dalla pagina web.
\subsubsection*{Attivit\`a svolte e dati trattati}
Si occupa di gestire l'applet all'interno del programma: questo prevede il
caricamento del suo codice e la sua inizializzazione, la ricezione delle
informazioni dei brani e l'invio degli stessi a \emph{server} una volta
costruiti i relativi DTO, la visualizzazione dello stato all'utente e i
controlli necessari ad influenzarne il comportamento.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
\# APPLET\_BAR: AppletBar \emph{static} & Istanza corrente di AppletBar.\\\hline
- visible: boolean & Indica se l'applet \`e caricata o no.\\\hline
- user: String & Identificativo dell'utente.\\\hline
- state: boolean & Indica se la scansione automatica \`e attiva o no.\\\hline
- client\_factory: ClientFactory & Istanza di ClientFactory usata per accedere
all'EventBus.\\\hline
- libraryService: LibraryServiceAsync & Servizio del server utilizzato per
caricare i nuovi brani.\\\hline 
- constants: AppletConstants \emph{static} & Utilizzato per la
traduzione in pi\`u lingue.\\\hline
- translator: TranslateDTOXML & Utilizzato per tradurre un documento XML
in una lista di SongDTO.\\\hline
\caption{Campi dati di AppletBar}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ get(in String): AppletBar \emph{static} & Se non esiste gi\`a, crea una nuova
istanza di AppletBar e la salva nel relativo campo statico. Restituisce
l'istanza dopo aver aggiornato l'utente.\\\hline 
- AppletBar(in String) & Costruttore di AppletBar, inizializza view e
funzioni.\\\hline 
- setUser(in String) & Aggiorna l'attributo user.\\\hline
+ appletBarON() & Crea il men\`u laterale.\\\hline 
+ appletBarOFF() & Elimina il men\`u laterale.\\\hline
\# changeState() & Attiva/disattiva la scansione automatica, e aggiorna
view e applet di conseguenza.\\\hline 
\# reScanAll() & Indica all'applet di riscansionare l'ultimo device.\\\hline
\# showChooser() & Indica all'applet di effettuare una scansione
manuale.\\\hline 
\# sendStarts() & Inizializza l'applet.\\\hline 
\# translateXML(in String) & Dall'XML ricevuto dall'applet estrae le
canzoni e le invia al server.\\\hline
\caption{Metodi di AppletBar}
\end{longtable}

\subsection{Classe AppletBarView}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize} 
    \item C1FN-1.1.2 Menu laterali
    \item C1QN-2 Utilizzo
    \item C1QN-2.3 Portabilit\`a
    \item C1VN-2.5 Semplicit\`a di utilizzo
    \item C2FN-1.2 Recupero manuale
    \item C2QN-4 Utilizzo
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Interfaccia grafica: si occupa dell'interazione con l'utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Utilizza \co{AppletBar} e \co{AppletConstants}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Utilizzata da \co{AppletBar}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Mostra all'utente lo stato dell'applet, e gli fornisce gli elementi per
interagire con essa.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- constants: AppletConstants \emph{static} & Oggetto utilizzato per la
traduzione nella lingua corretta.\\\hline 
- title: Label \emph{static} & Visualizza il nome del men\`u laterale.\\\hline 
- on\_off: Label \emph{static} & Visualizza se la scansione automatica
\`e attivata o no, e di cambiare questa opzione.\\\hline 
- rescan: Button \emph{static} & Permette di far riscansionare l'ultimo
device: \`e visibile solo dopo una scansione.\\\hline 
- button\_container: HTMLPanel \emph{static} & Contenitore per i pulsanti
.\\\hline 
- chooser: Button \emph{static} & Permette all'utente di far
scansionare una cartella specifica.\\\hline
- status: TextBox \emph{static} & Mostra visivamente lo stato
dell'applet.\\\hline
- applet: HTML \emph{static} & Contiene l'applet.\\\hline
- main: HTMLPanel \emph{static} & Contiene tutta questa view.\\\hline

\caption{Campi dati di AppletBarView}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
\# createView() \emph{static} & Inizializza e crea la view.\\\hline
\# showBar() \emph{static} & Rende visibile la view e carica il codice
dell'applet.\\\hline 
\# hideBar() \emph{static} & Rende non visibile la view e toglie il codice
dell'applet.\\\hline 
\# setOnOffButton(in boolean) \emph{static} & Cambia lo stato del pulsante
on\_off.\\\hline 
\# rescanNotVisible() \emph{static} & Nasconde il pulsante rescan.\\\hline 
\# rescanVisible() \emph{static} & Visualizza il pulsante rescan.\\\hline 
\# showStatus(in String) \emph{static} & Visualizza lo stato
dell'applet.\\\hline 
\# scanningStatus(in int,in int) \emph{static} & Visualizza lo stato
della scansione: scansionati m su n.\\\hline
\caption{Metodi di AppletBarViews}
\end{longtable}

\subsection{Classe AppletBarConnector}

\begin{figure}[h]
  \centering
  \includegraphics[width=11cm]{img/DP/applet_gwt.png}
\caption{Diagramma UML che descrive le dipendenze e i meccanismi di
connessione tra l'applet e le classi Netmus.}
\end{figure}


\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize} 
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Effettua l'interfacciamento tra l'applet e AppletBar, utilizzando JSNI.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Utilizzata da \co{AppletBar}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Dichiara dei metodi globali in JavaScript che hanno il compito di reindirizzare
le chiamate dell'applet all'istanza di \co{AppletBar}.
D'altro canto, implementa anche i metodi nativi per permettere ad \co{AppletBar}
di richiamare metodi sull'applet.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
\# sendStartsJSNI(in String, in boolean) \emph{static native} &
Inizializza l'applet.\\\hline 
\# setState(in boolean) \emph{static native} & Attiva/disattiva la scansione
automatica\\\hline 
\# sendRescan() \emph{static native} & Indica all'applet di fare una
scansione completa dell'ultimo device utilizato.\\\hline 
\# showChooser() \emph{static native} & Indica all'applet di fare una
scansione manuale di una cartella indicata dall'utente. Si occupa
l'applet di chiedere quale.\\\hline 
\# makeNativeFunction(in AppletBar) \emph{static native} & Crea delle
funzioni JavaScript utilizzabili dall'applet, che richiamano i metodi
relativi di AppletBar.\\\hline
\caption{Metodi di AppletConnector}
\end{longtable}

\newpage
\section{Package client.event}
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.1 Web Application Netmus
    \item C1FN-1.1.1 Brani elencati opportunamente
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Questo package conterr\`a le classi che rappresenteranno i nostri eventi
personalizzati, utilizzabili potenzailmente in tutto il \co{client}.
Questi eventi potranno essere lanciati sull'EventBus ed essere catturati e
gestiti in ogni classe avente accesso all'EventBus tramite \co{ClientFactory}.
\subsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Potranno essere usati questi eventi da ogni classe del client che ne ha la
necessit\`a.
\subsection*{Attivit\`a svolte e dati trattati}
Glie eventi svolgono la funzione di segnale, per dare l'input d'inizio ad un
qualche procedimento.

\subsection{Classe DeviceScannedEvent}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.1 Web Application Netmus
    \item C1FN-1.1.1 Brani elencati opportunamente
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item 
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe rappresenta l'evento GWT che andremo a lanciare sull'Event Bus
quando termina un processo di scansione di un dipositivo ed \`e terminata
anche la memorizzazione nel DataStore e l'associazione dei brani all'utente che
li ha caricati. 
\subsubsection*{Relazioni d'uso di altre componenti}
\`E associato alla classe \co{DeviceScannedEventHandler} che permetter\`a di
controllare e gestire l'evento nelle altre classi.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a lanciato in specifico da \co{AppletBar} quando avr\`a conferma dal
server dell'avvenuto processo di memorizzazione dei nuovi Mp3 scansionati. Questo
evento verr\`a poi catturato nella \co{ProfileActivity} che andr\`a ad
aggiornare la lista canzoni presenti nel catalogo utente.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna. La classe \`e costruita basandosi su convenzioni GWT comuni a tutti gli
eventi grafici.

\begin{longtable}{|p{0.45\textwidth}|p{0.45\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ TYPE: Type \textless DeviceScanned EventHandler\textgreater  \emph{static} &
Oggetto Type GWT tipizzato per andare a definire il tipo di handler che
andr\`a a catturare questo tipo di eventi.\\\hline
\caption{Campi dati di DeviceScannedEvent}
\end{longtable}

\begin{longtable}{|p{0.45\textwidth}|p{0.45\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ getAssociatedType() & Restituisce il Type associato all'evento.\\\hline
\# dispatch(in DeviceScannedEventHandler) & Metodo interno per gestire
l'evento.\\\hline
\caption{Metodi di DeviceScannedEvent}
\end{longtable}

\subsection{Interfaccia DeviceScannedEventHandler}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.1 Web Application Netmus
    \item C1FN-1.1.1 Brani elencati opportunamente
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Rappresenta l'interfaccia dell'handler che andr\`a a gestire gli eventi di tipo
\co{DeviceScannedEvent}.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende l'interfaccia EventHandler di GWT per automatizzare il meccanismo di
gestione degli eventi personali.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Nessuna.
\subsubsection*{Attivit\`a svolte e dati trattati}
Serve per dichiarare i metodi da implementare quando si costruisce un
\co{EventHandler} per eventi di tipo \co{DeviceScannedEvent}.
Il questo caso ci sar\`a solamente il metodo \co{onScanDevice(DeviceScannedEvent
event)}.

\begin{longtable}{|p{0.45\textwidth}|p{0.45\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ onScanDevice(in DeviceScannedEvent) & Gestisce l'evento della fine
della scansione di un dispositivo da parte dell'applet.\\\hline
\caption{Metodi di DeviceScannedEventHandler}
\end{longtable}

\newpage
\section{Package server}

\begin{figure}[!h]
  \centering
  \includegraphics[width=15cm]{img/DP/classes_server.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.server}.}
\end{figure}


\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1 WEB Application NetMus
	\item C1VN-1.11 Deve utilizzare il cloud computing
	\item C1VN-1.12 Deve utilizzare tecnologie GAE e GWT
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente} % LASCIARE WARNING
Questo package racchiude tutte le classi che collaborano al fine di gestire la
business logic del sistema, ovvero tutte quelle operazioni che potranno essere
compiute sui dati raccolti e che quindi interagiscono pesantemente con il
Datastore. 
\subsection*{Relazioni d'uso di altre componenti}
Per quanto riguarda l'interfacciamento con il database vengono utilizzati i
servizi offerti dalle classi DAO presenti in \emph{persistent}. Si fa utilizzo
inoltre delle classi presenti nel package \emph{shared} in cui vengono
incapsulati tutti i dati in uscita del server.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Il package \emph{server} tramite il deferred binding viene utilizzato
indirettamente nelle classi del package \emph{client.activity} e
\emph{client.applet}. 
\subsection*{Attivit\`a svolte e dati trattati}
Le attivit\`a svolte dalle sue classi verranno qui di seguito descritte.

\subsection{Classe SongsServiceImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.4 Ranking brani
    \item C1QD-1.5.1 Ottimizzazione della ricerca su YouTube
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{SongsService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}. I metodi statici
qui definiti permettono le operazioni basilari sulle canzoni presenti nel
datastore. Le uniche eccezioni che possono causare il fallimento di queste
operazioni sono gli errori di stato del Datastore \co{IllegalStateException} che
verranno gestire tramite il callback nei metodi di \co{ProfileActivity}.
\subsubsection*{Relazioni d'uso di altre componenti} Oltre ad utilizzare i DTO
\co{SongDTO} e \co{SongSummaryDTO}, verranno creati, immagazzinati oppure usati
gli oggetti \emph{persistent}: \co{Song}, \co{MusicLibrary} e \co{UserAccount}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} Viene
usata da \co{ProfileActivity} che ne ottiene un'istanza tramite deferred
binding utilizzando l'interfaccia \co{SongsService}. 
\subsubsection*{Attivit\`a svolte e
dati trattati} Implementa le funzionalit\`a di modifica e
cancellazione di un brano presente nel Datastore. Queste
operazioni agiscono su canzoni condivise da molti utenti e saranno
quindi utilizzate solo dove strettamente necessario. Ogni metodo ha tra gli
input l'username dell'utente che richiede l'operazione.
\begin{longtable}{|p{0.45\textwidth}|p{0.45\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ rateSong(in String,in SongSummaryDTO,in int): double & Assegna la
votazione compresa tra 1 e 5 alla canzone spedicicata dal
\co{SongSummaryDTO}. Dopo aver aggiornato i campi raltivi di \co{Song} nel
Datastore ritorna il valore \emph{double} che rappresenta la nuova media
tra tutte le votazione effettuate su quella canzone.\\\hline 
+ editSong(in String,in String,in String,in String): boolean & Questo
metodo permette di assegnare una nuova chiave primaria ad una canzone
variando almeno uno tra gli attributi \emph{title}, \emph{artist} e
\emph{album} trasformandola di fatto in un altro brano nel Datastore.
Sar\`a possibile invocare questo metodo solamente su canzone le cui
infromazioni che formano la chiave primaria sono incomplete.\\\hline 
+ deleteSong(in String,in String,in String,in String): boolean & Rimuove
la canzone dalla libreria dell'utente. Le canzoni rimosse rimangono nel
Datastore poich\'e potrebbero contenere informazioni utili per
inserimenti futuri.\\\hline
\caption{Metodi di SongServiceImpl}
\end{longtable}

\subsection{Classe UsersServiceImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.4 Gestione profilo personale
    \item C1FN-1.4.1 Modifica informazioni personali
    \item C1FN-1.4.2 Cambio password
    \item C1FN-1.4.3 Cancellazione del proprio account
    \item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.7 Interazione con altri utenti
    \item C1FD-1.7.1 Visualizzazione altri profili
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{UsersService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}. Fornisce i metodi
statici che implmentano le funzionalit\`a relative alla gestione del proprio
profilo utente.  
\subsubsection*{Relazioni d'uso di altre componenti} Oltre ad
utilizzare i DTO \co{UserDTO} e \co{UserCompleteDTO}, verranno creati,
immagazzinati oppure usati i relativi oggetti \emph{UserAccount}. Per gestire la
funzionalit\`a di cambio password si fa uso della classe \co{BCrypt}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} Viene
usata da \co{ProfileActivity} che ne ottiene un'istanza tramite deferred
binding utilizzando l'interfaccia \co{SongsService}.
\subsubsection*{Attivit\`a svolte e dati trattati} I metodi qui implementati
forniscono le funzionalit\`a di base quali la ricerca, la modifica e la
cancellazione di un utente di Netmus ma anche la ricerca di utenti affini.
\begin{longtable}{|p{0.45\textwidth}|p{0.45\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ loadProfile(in String): UserCompleteDTO  & Trova nel Datastore
l'utente a cui corrisponde l'username dato in input e ne ritorna le
informazioni incapsulate in un DTO. Gli utenti di cui viene richiesto il
caricamento devono essere presenti nel Datastore.\\\hline 
+ editProfile(in String,in UserCompleteDTO): boolean & Salva nell'
\co{UserAccount} del Datastore i dati presenti nell' \co{UserCompleteDTO} dato
in input sovrascrivendo le informazioni precedenti. \`E previsto qui anche il
cambio della password. \\\hline
+ deleteProfile(in String): boolean & Cancella irreversibilmente l'utente e
tutte le sue informazioni dal Datastore e conseguentemente lo reindirizza alla
pagina iniziale di login. Le canzoni che facevano parte del catalogo non
vengono cancellate. \\\hline
+ findSimilarUser(in String): List\textless UserDTO\textgreater & Cerca
nel Datastore i nomi degli utenti il cui catalogo ha propriet\`a simili
a quello dato in input. I criteri di somiglianza sono dati dall'artista
pi\`u ricorrente ed il genere pi\`u ascoltato. \\\hline
\caption{Metodi di UserServiceImpl}
\end{longtable}

\subsection{Classe LoginServiceImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.2 Registrazione
    \item C1QN-1.6 Scalabilia\`a
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{LoginService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}. Comprende i
servizi di autenticazione del sistema quali l'inserimento di una nuova
registrazione e la verifica dei dati di login. Una parte cospiqua e molto
importante di questa classe \`e rappresentata dalla gestione delle sessioni e
dei cookie. 
\subsubsection*{Relazioni d'uso di altre componenti} Utilizzer\`a \co{LoginDTO}
per l'incapsulazione dei dati in entrata ed in uscita. Le
\co{HttpSession} verranno
usate per gestire le sessioni dell'utente e dargli o meno i diritti d'accesso.
Verranno utilizzate funzionalit\`a interne di gestione login definite in
\co{LoginHelper}. \\ La comunicazione con il Datastore avviene tramite
\co{UserAccount}. Per la gestione degli hash delle password utilizza la classe
\co{BCrypt}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre
componenti} Viene usata da \co{LoginActivity} e \co{ProfileActivity} che ne ottiene un'istanza
tramite deferred binding utilizzando l'interfaccia \co{SongsService}.
\subsubsection*{Attivit\`a svolte e dati trattati} Implementa la parte server
delle procedure di login come la verifica della correttezza della password e
l'adeguata impostazione delle sessioni HTTP.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ insertRegistration(LoginDTO) & Inserisce i dati di login
relativi alla registrazione di un nuovo utente nel database. Pu\`o
lanciare eccezioni di tipo \textless= \co{RegistrationException} in caso vi
siano problemi nell'inserimento.\\\hline 
+ verifyLogin(LoginDTO) & Metodo
fondamentale per l'autenticazione che confronta i dati in input con quelli
presenti nel database per verificare se il login \`e valido. Pu\`o
lanciare eccezioni di tipo \textless= \co{LoginException} in caso il controllo
non vada a buon fine.\\\hline 
+ startLogin(LoginDTO) & Racchiude tutte i passi di autenticazione
dell'utente. Utilizza \co{verifyLogin} e si occupa di iniziare la sessione
dell'utente che si \`e autenticato aggiornando anche l'attributo
\co{lastLogin} in \co{UserAccount}.\\\hline 
+ getLoggedInUserDTO():
UserSummaryDTO & Esegue una ricerca della sessione corrente utilizzando i metodi
di \co{LoginHelper} e ritorna, se presenti, le informazioni di base
(\co{UserSummaryDTO}) dell'utente loggato\\\hline 
+ logout() & Invalida l'autenticazione dell'utente che viene rimandato alla pagina di login.\\\hline
+ restartSession(in String,in String): String & Recupera un eventuale
sessione salvata nei cookie controllandone la validit\`a per l'utente
dato in input. Questa funzionalit\`a non \`e valida per gli utenti
Google dei quali non viene gestito un cookie.\\\hline
\caption{Metodi di LoginServiceImpl}
\end{longtable}


\subsection{Classe LibraryServiceImpl}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6 Scalabilia\`a
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
    \item C1FN-1.9.1 Controllo di validit`a dei dati
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FO-1.3.3 Creazione playlist
    \item C1FO-1.3.4 Ranking brani
    \item C1FD-1.8 Elaborazione dati utente
    \item C1FO-1.8.1 Esportazione PDF
    \item C1FO-1.9.3 Completamento info da servizio esterno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe corrisponde all'implementazione del \co{LibraryService} (di
\emph{client}) ed estende la classe \co{RemoteServiceServlet}. Si occupa di
fornire tutti i metodi necessari all'inserimento, lettura e modifica dei dati
nel Datastore realivi ad un catalogo musicale. Un
metodo di fondamentale importanza \`e
\emph{sendUserNewMusic} che gestisce l'inserimento di
una lista di canzoni singolarmente nel Datastore e nella
libreria.
\subsubsection*{Relazioni d'uso di altre componenti} Oltre ad utilizzare
\co{SongDTO} e \co{SongSummaryDTO}, verranno creati, immagazzinati oppure usati
i relativi oggetti \emph{persistent}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre
componenti} Viene usata da \co{ProfileActivity} che ne ottiene un'istanza
tramite deferred binding utilizzando l'interfaccia \co{SongsService}.
\subsubsection*{Attivit\`a svolte e dati trattati} Implementa tutte le
attivit\`a necessarie alla gestione del catalogo musicale. Vengono qui definiti
i metodi di interazione con le Playlist e con il sistema di rating dei brani.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ sendUserNewMusic(in String,in List\textless SongDTO\textgreater) &
Salva o aggiorna nel Datastore tutte le canzoni passate in input e se
possiedono sufficenti informazioni le inserisce nella libreria
dell'utente.\\\hline 
+ addPlaylist(in String,in String): boolean & Aggiunge una nuova
playlist vuota al catalogo dell'utente con il nome dato in input.
Ritorna \emph{true} se l'operazione ha successo.\\\hline 
+ removePlaylist(in String,in String): boolean & Cancella la playlist il
cui nome \`e dato in input dal catalogo. Ritorna \emph{true} se l'operazione ha
successo.\\\hline
+ getPlaylist(in String,in String): List\textless SongSummaryDTO\textgreater &
Ritorna la lista ordinate delle canzoni in forma di \co{SongSummaryDTO} che
appartengono alla playlist.Ritorna \emph{true} se l'operazione ha
successo.\\\hline
+ addSongToPlaylist(in String,in String,in String): boolean & Aggiunge
la canzone con l'id dato in input in coda alla playlist specificata.Ritorna \emph{true} se l'operazione ha
successo.\\\hline
+ moveSongInPlaylist(in String,in String,in int, in int): boolean &
Sposta la canzone all'indice dato in input nel prima attributo interger
all'indice specificato nel secondo, se questi indici sono validi
relativamente alla dimensione della playlist. Ritorna \emph{true} se l'operazione ha
successo.\\\hline 
+ removeSongFromPlaylist(in String,in String,in String): boolean & Rimuove
la canzone con l'id dato in input dalla playlist specificata.Ritorna \emph{true}
se l'operazione ha successo.\\\hline
+ loadPreferredArtists(in String): List\textless String\textgreater &
Calcola e ritorna l'artista pi\`u ricorrente all'interno delle canzoni
del catalogo dell'utente specificato. \\\hline
+ loadPreferredGenres(in String): List\textless String\textgreater & Calcola e
ritorna il genere pi\`u ricorrente all'interno delle canzoni del catalogo
dell'utente specificato. \\\hline
+ loadMostPopularSong(in String): String & Ritorna l'id della canzone condivisa
dal maggior numero di utenti che fa parte del catalogo.\\\hline
\caption{Metodi di LibraryServiceImpl}
\end{longtable}

\subsection{Classe LoginHelper}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.2 Registrazione
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
La classe \co{LoginHelper} offre funzionalit\`a statiche
per gestire le sessioni HTML, utili a \co{LoginServiceImpl} ed a
\emph{servlet}.
\subsubsection*{Relazioni d'uso di altre componenti}
User\`a al suo interno le classi di utilit\`a per i servlet definite in
\emph{utils} e l'oggetto di persistenza \co{UserAccount}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa classe viene utilizzata da \co{LoginServiceImpl} nei metodi \co{logout},
\co{getLoggedInUserDTO} e \co{startLogin} poich\'e agiscono sulle sessioni HTML.
Viene utilizzata anche da \co{LoginFilter}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Questa classe ha il compito esclusivo di interagire con le
sessioni HTML, deve quindi occuparsi di reperire i dati utili
dalla sessione corrente e di impostarne una nuova. Fornisce inoltre il
controllo necessario al filtro \co{LoginFilter} per verificare se
l'utente che accede ad una pagina \`e gi\`a loggato oppure no.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ getLoggedInUser(HttpSession session): String \emph{static} & Legge dal
database le informazioni relative all'utente specificato nella \co{HttpSession}
e ne restituisce l'username.\\\hline
+ getApplicationURL(in HttpServletRequest): String \emph{static} &
Restituisce l'URL attuale dell'applicazione, anche nel caso sia
eseguendo in development mode.\\\hline
+ setSession(in HttpSession,in String)
\emph{static} & Imposta una nuova sessione per l'utente in input.\\\hline
+ isDevelopment(in HttpServletRequest): boolean \emph{static} & Ritorna
\emph{true} solamente se l'applicazione sta eseguendo in development
mode altrimenti ritorna \emph{false}.\\\hline
\caption{Metodi di LoginHelper}
\end{longtable}


\newpage
\section{Package server.persistent} % LASCIARE WARNING

\begin{figure}[!h]
  \centering
  \includegraphics[width=17cm]{img/DP/classes_server_persistent.jpg}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.server.persistent}.}
\end{figure}


\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1 Web Application Netmus
    \item C1QN-1.6 Scalabilia\`a
    \item C1QN-1.6.2 Scalabilit\`a massa di utenza
    \item C1FN-1.9.1 Controllo di validit`a dei dati
	\item C1FN-1.9.5 Inserimento nel Database
	\item C1QN-1.9.6 Gestione concorrenza
	\item C1VN-1.11 Deve utilizzare il cloud computing
	\item C1VN-1.12 Deve utilizzare tecnologie GAE e GWT
	\item C1FN-1.13 Gestione Database
	\item C1VN-1.13.1 Deve utilizzare Google Data Store
	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
\begin{figure}[!h]
  \centering
  \includegraphics[width=17cm]{img/DP/sequences.png}
\caption{Diagramma UML di sequenza che descrive il dettaglio delle chiamate
che concorrono nel caricamento di nuove conzoni nel Datastore da parte di un
utente.}
\end{figure}
Il package \emph{server.persistent} contiene le classi di persistenza che
implementano il design pattern \emph{Data Access Object (DAO)} che hanno lo
scopo di interfacciare il sistema con il database nascondendo cos\`i ogni
dettaglio sulla struttura del database all'esterno.\
I DAO sono implementati con l'utilizzo del framework \emph{Twig-persist}
introdotto nel capitolo 3, la notazione utilizzata contiene alcuni elementi
introdotti dal framework per gestirne la configurazione: 
\begin{itemize}
  \item \bo{@Id}: L'attributo definito con questa annotazione rappresenta la
  chiave identificativa dell'entit\`a che deve essere unica all'interno del
  Datastore. Definirla nel DAO ci permette di gestire questa chiave a nostro
  piacimento.
  \item \bo{@Index}: Serve ad indicizzare un particolare attributo poich\'e di
  default il datastore che viene utilizzato indicizza solo la chiave. Questa
  annotazione deve essere utilizzata su tutti gli attributi che sono soggetti a
  ricerca o ordinamento.
  \item \bo{@Child}: Assegna la relazione di ``figlio'' ad un attributo
  che ha come tipo un'altra entit\`a del Datastore, in particolare nella chiave
  dell'entit\`a figlia sar\`a presente anche quella del padre in modo che sia
  associata a nessun'altro oggetto.
  \item \bo{@Parent}: Come descritto sopra viene utilizzata per convenienza
  insieme all'annotazione @Child per avere un riferimento all'entit\`a padre
  nell'entit\`a filgia.
  \item \bo{@Type(Type.class)}: Questa annotazione dice esplicitamente alla
  classe di twig-persist \co{ObjectFieldTraslator} come tradurre il tipo dell'attributo
  nel tipo effettivo nel Datastore.
\end{itemize}
Per avere l'istanza del Datastore su cui lavorare si
utilizza la classe con visibilit\`a \emph{package} \co{ODF}. \\\\
Il diagramma UML di sequenza sopra presentato evidenzia l'insieme delle chiamate
che concorrono in un'attivit\`a che coinvolge tutte le classi del package
persistent. L'inserimento di una nuova canzone nel database, che ha inizio
dall'applet di estrazione dei brani dal file system, avviene all'interno di una
chiamata asincrona al metodo statico \emph{sendUserNewMusic} implmentato in
\co{LibraryServiceImpl}.
\subsection*{Relazioni d'uso di altre componenti} Vengono utilizzate le classi
DTO presenti nel package \emph{shared} per impacchettare i dati in uscita dal
database o per gestire i dati in entrata. 
\subsection*{Interfacce con e relazioni d'uso da altre
componenti} Questo package \`e di fondamentale importanza per il resto del sistema poich\'e rappresenta l'unica via di accesso ai dati persistenti, le classi contenute vengono quindi utilizzate in modo massiccio dalle classi logiche Service nel package \emph{server}.
\subsection*{Attivit\`a svolte e dati trattati}
Le classi DAO gestiscono i dati del sistema garantendone la persistenza e si
occupano anche di implementare la parte logica di salvataggio, recupero e
relazione dei dati. Nel caso di NetMus \`e un'attivit\`a molto delicata poich\'e il
\underline{database} utilizzato \`e \underline{non-relazionale}.

\subsection{Classe ODF (Singleton)}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6 Scalabilia\`a
    \item C1QN-1.6.2 Scalabilit\`a massa di utenza
    \item C1QN-1.9.6 Gestione concorrenza
    \item C1FN-1.13 Gestione Database
    \item C1VN-1.13.1 Deve utilizzare Google Data Store
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{ODF} (Object Datastore Factory) \`e una classe \emph{final} che segue il
pattern Singleton illustrato in \emph{SpecificaTecnica v3.0}. Ha la funzione di creare un'unica istanza del
\co{ObjectDatastore} fornito dal framework twig-persist e di restituirla a
qualunque oggetto la richieda. Quest'ultimo da la possibilit\`a di interagire con il DataStore, inviando query, memorizzando oggetti \emph{persistent} o richiedendo liste di oggetti
tramite semplici metodi. L'oggetto datastore restituito \`e di tipo
\co{AnnotationObjectDatastore} che di default salva gli attributi degli oggetti
persistenti in modo non indicizzato rendendo il datastore pi\`u rapido.\\
Questa classe \`e visibile solamente all'interno del package \emph{persistent}.
\subsubsection*{Relazioni d'uso di altre componenti}
Vengono usate le classi della libreria twig-persist2.0 per la creazione di
\co{AnnotationObjectDatastore}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa classe pu\`o essere utilizzata da qualunque classe di \emph{persistent},
ogni qualvolta ci sia bisogno di avere l' \co{ObjectDatastore} per interagire col
Datastore.
\subsubsection*{Attivit\`a svolte e dati trattati}
Crea un'unica istanza di \co{ObjectDatastore} e tramite un metodo
statico \emph{get()} la passa alle classi, in maniera di dargli la possibilit\`a
di usare il database.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- datastoreIstance: DatastoreObject \emph{static, final} & Unica istanza dell'
\co{ObjectDatastore} che viene inizializzata alla creazione della classe
con un \co{AnnotationObjectDatastore}.\\\hline
\caption{Campi dati di ODF}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ get(): ObjectDatastore \emph{static} & Ritorna l'istanza
dell' \co{ObjectDatastore}.\\\hline
\caption{Metodi dati di ODF}
\end{longtable}


\subsection{Classe UserAccount}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.2 Registrazione a Netmus
    \item C1FN-1.4 Gestione profilo personale
    \item C1FN-1.4.1 Modifica informazioni personali
    \item C1FN-1.4.2 Cambio password
    \item C1FN-1.4.3 Cancellazione del proprio account
    \item C1QN-1.6 Scalabilia\`a
    \item C1QN-1.6.2 Scalabilit\`a massa di utenza
    \item C1FN-1.9.1 Controllo di validit`a dei dati
    \item C1FN-1.13 Gestione Database
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.7 Interazione con altri utenti
    \item C1FD-1.7.1 Visualizzazione altri profili
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\co{UserAccount} utilizza il design pattern DAO poich\'e contiene tutte le
informazioni relative ad un utente cos\`i come viene salvato all'interno del
Datastore. La classe \`e implementata come POJO poich\'e twig-persist lo
supporta senza bisogno di configurazioni aggiuntive. Vengono usate solamente
le annotazioni \emph{@Key} e \emph{@Index} per gestire l'indicizzazione
deigli oggetti nel datastore.\\
\subsubsection*{Relazioni d'uso di altre componenti} La classe DAO \co{MusicLibrary} \`e necessaria per gestire la relazione
uno-a-uno che la lega a questa entit\`a. Vengono inoltre utilizzate le classi
\co{LoginDTO}, \co{UserDTO} e \co{UserCompleteDTO} come
input ed output in gran parte dei metodi.\\
Per interfacciarsi al database utilizza \co{ODF}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\co{UserAccount} \`e una classe molto utilizzata nel sistema, tutte le classi
Service presenti nel package \emph{server} ne fanno uso qual'ora abbiano bisogno
di informazioni riguardanti un utente. 
\subsubsection*{Attivit\`a svolte e dati
trattati} Gestisce la logica di persistenza di tutti i dati relativi ad un
utente del sistema NetMus.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - user: String \emph{@Key} & Rappresenta il nome di login unico
 dell'utente e nello stesso tempo la sua e-mail (valida). Viene
 impiegato come chiave dell'entit\`a nel Datastore.\\\hline
 - password\_hash: String & Contiene l'hash della password dell'utente ottenuto
  utilizzando l'algoritmo BCrypt.\\\hline
 - nick\_name: String & Nickname di un utente visibile anche agli
 altri.\\\hline - first\_name: String & Nome proprio dell'utente.\\\hline
 - last\_name: String & Cognome dell'utente.\\\hline
 - gender: char & Sesso, sono validi i valori 'F' (femmina) e 'M'
 (maschio).\\\hline
 - nationality: String & Nazione di provenienza dell'utente.\\\hline
 - about\_me: String \emph{@Type(Text.class)} & Informazioni aggiuntive su
 di se inserite dall'utente.\\\hline
 - birth\_date: Date & Data di nascita dell'utente. \\\hline
 - last\_session\_id: String \emph{@Index} & Codice identificativo dell'ultima
 sessione di autenticazione dell'utente. Campo necessario per l'utilizzo dei
 cookies per mantenere la sessione anche quando viene chiuso il browser.\\\hline
 - is\_google\_user: boolean & Flag che indica se l'utente accede al sistema
 tramite l'autenticazione di Google. \\\hline
 - is\_public\_profile: boolean & Flag che
 indica se il profilo dell'utente \`e visibile ad altri utenti oppure no.\\\hline 
 - allowed\_users: List\textless String\textgreater & Lista deggli username
 degli utenti che possono visualizzare questo profilo ed il relativo catalogo.\\\hline
 - music\_library:
 MusicLibrary \emph{@Child} & Intera libreria musicale dell'utente, non sempre verr\`a caricata dal Datastore insieme alle informazioni dell'utente.\\\hline
\caption{Campi dati di UserAccount}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + store() & Inserisce nel database per la prima volta l'utente. Se
 esiste gi\`a un utente con lo stesso id lancia un'eccezione di tipo
 \co{IllegalStateException} \\\hline
 + update() & Aggiorna o inserisce i dati dell'utente nel datastore.\\\hline
 + load(in String): UserAccount
 \emph{static}& Cerca nel database e restituisce tutti i dati relativi ad un username/e-mail dato come input. \\\hline
 + deleteUser(in UserAccount) \emph{static} & Rimuove completamente dal database
 l'utente dato in input. Le cazoni realtive a quell'utente vengono per\`o
 mantenute per non perdere infromazioni importanti. \\\hline
 + toLoginDTO(): LoginDTO &
 Genera un oggetto LoginDTO contenente le informazioni di autenticazione dell'utente.\\\hline
 + toUserDTO(): UserDTO & Genera un oggetto UserSummaryDTO
contenente buona parte delle informazioni riguardanti l'utente.\\\hline
 + toUserCompleteDTO(): UserCompleteDTO & Genera un oggetto UserSummaryDTO
contenente tutte le informazioni riguardanti l'utente.\\\hline
 + findSessionUser(in String): UserAccount \emph{static} & Cerca nel database e
 ritorna i dati realivi ad un utente che come lastSessionId ha l'id si sessione
 HTTP dato in input.\\\hline
 + getters() & Tutti gli attributi privati di questa
 classe hanno i relativi metodi \emph{get}.\\\hline 
 + setters() & Tutti gli attributi privati di questa classe hanno i relativi
 metodi \emph{set}. Tutti questi metodi si occupano anche di chiamare
 \co{update()} per aggiornare i dati del Datastore.\\\hline
 \caption{Metodi di UserAccount}
\end{longtable}


\subsection{Classe MusicLibrary}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-1.6 Scalabilia\`a
	\item C1QN-1.6.2 Scalabilit\`a massa di utenza
	\item C1FN-1.9.1 Controllo di validit`a dei dati
	\item C1FN-1.9.5 Inserimento nel Database
	\item C1FN-1.13 Gestione Database
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FO-1.3.3 Creazione playlist 
    \item C1FO-1.3.4 Ranking brani
    \item C1FD-1.8 Elaborazione dati utente
    \item C1FO-1.8.1 Esportazione PDF
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente} \co{MusicLibrary}
contiene tutte le informazioni relative ad un catalogo multimediale, ovvero
il proprietario e la lista delle canzoni. La funzione principale per\`o \`e
quella di fornire dei servizi comodi ed efficenti per la gestione del catalogo
stesso e le entit\`a interne ad esso associate.\\
La lista di brani \`e mantenuta
come lista di codici identificativi (strighe) per una questione di efficenza con twig-persist. 
\subsubsection*{Relazioni d'uso di altre componenti}
Alla luce della relazione di tipo molti-a-molti che la lega a \co{Song} e quella
uno-a-uno con \co{UserAccount} queste due classi DAO sono necessarie. Vengono
utilizzate le classi \co{MusicLibrarySummaryDTO}, \co{MusicLibraryDTO},
\co{SongSummaryDTO} e \co{SongDTO} come input ed output in alcuni metodi.\\ Per
interfacciarsi al database utilizza \co{ODF}.\\ 
Al suo interno vengono definite le classi \co{Playlist} per la gestione delle
playlist e \co{SongWithRating} per la gestione dei voti assegnati alle canzoni.
\subsubsection*{Interfacce con e
relazioni d'uso da altre componenti} Tutte le classi logiche Service presenti nel package
\emph{server} ne fanno uso qual'ora abbiano bisogno di informazioni riguardanti
un catalogo multimediale. Chiaramente anche \co{UserAccount} ne fa utilizzo.
\subsubsection*{Attivit\`a svolte e dati trattati}
Gestisce la logica di persistenza e le procedure di reperimento delle
informazioni di tutti i dati relativi ad un catalogo multimediale del sistema
NetMus.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - owner: UserAccount \emph{@Id @Parent} & L'utente a cui \`e associata
 questa libreria. \\\hline
 - song\_list: List\textless SongWithRating\textgreater \emph{@Index} & Lista
 ordinata delle canzoni con punteggio che fanno parte del catalogo.\\\hline
 - num\_songs: int & Numero delle canzoni presenti nel catalogo, viene
 incrementato e decrementato nei metodi di inserimento e rimozione delle
 canzoni.\\\hline 
 - preferred\_artist: String & Nome dell'artista pi\`u ricorrente nelle
 canzoni del catalogo.\\\hline 
 - preferred\_genre: String & Genere pi\`u ricorrente nelle
 canzoni del catalogo.\\\hline
 - playlists: List\textless Playlist\textgreater  \emph{@Index} & Lista
 contenente tutte le playlist create per questo catalogo musicale.\\\hline
 - classe Playlist \emph{static} & Classe interna che rappresenta una sequenza
 di canzoni ordinate e fornisce i metodi per le operazioni basilari come
 la crezione, l'aggiornamento e la cancellazione di una playlist. Ogni oggetto
 di questa classe ha un nome che fa da chiave univoca ed una lista di canzoni
 non necessariamente diverse tra loro. \\\hline
 - classe SongWithRating \emph{static} & Classe interna che rappresenta l'id di
 un brano associato ad un voto che l'utente ha assegnato a quel brano. La
 libreria musicale di ogni utente \`e composta da una lista di queste entit\`a.
 
 \\\hline
\caption{Campi dati di MusicLibrary}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + store() & Inserisce nel database per la prima volta la libreria musicale. Se
 esiste gi\`a una libreria per quel dato utente utente lancia
 un'eccezione di tipo \co{IllegalStateException} \\\hline
 + update() & Aggiorna o inserisce i dati della libreria nel datastore.\\\hline
 \# deleteMusicLibrary(in MusicLibrary) \emph{static} & Rimuove completamente
 dal database la libreria data in input. Le cazoni realtive a quella libraria
 vengono per\`o mantenute per non perdere infromazioni importanti. \\\hline
 + toMusicLibrarySummaryDTO(): MusicLibrarySummaryDTO &
 Genera un oggetto \co{MusicLibrarySummaryDTO} contenente le informazioni
 della libreria e quelle essenziali riguardanti le canzoni in essa
 contenute.\\\hline
 + toMusicLibraryDTO(): MusicLibraryDTO &
 Genera un oggetto \co{MusicLibraryDTO} contenente le informazioni
 della libreria e tutte quelle riguardanti le canzoni in essa
 contenute.\\\hline
 + addSong(in Song): boolean & Associa una canzone data in
 input alla libreria aggiungendola in coda. Ritorna \emph{true} se
 l'inserimento ha avuto successo, \emph{false} altriementi.\\\hline 
 + removeSong(in Song): boolean & Rimuove una canzone data in input dalla
 libreria, la canzone rimossa rimane in database anche se non posseduta da alcun
 utente. Ritorna \emph{true} se
 la rimozione ha avuto successo, \emph{false} altriementi.\\\hline 
 + allSongs(): List\textless Song\textgreater & Ritorna la lista ordinata di
 canzoni presenti nel catalogo.\\\hline
 + rateSong(in Song,in int) & Assegna il voto alla canzone dati in
 input. Il voto \`e personale dell'utente che possiede la libreria ed
 \`e unico, quindi sovrascrive la votazione precendete. Oltre ad aggiornare il
 voto del'utente in \co{MusicLibrary} questo metodo aggiorna anche la media
 totale dei voti in \co{Song}. \\\hline 
 - updatePreferredGenre() & Calcola e salva il nome del genere musicale pi\`u
 ricorrente nella libreria. Ha visibilit\`a privata poich\`e deve essere
 utilizzato solo quando necessario all'interno del metodo
 \emph{addSong()}.\\\hline 
 - updatePreferredArtist() & Calcola e salva il nome del artista pi\`u
 ricorrente nella libreria. Ha visibilit\`a privata poich\`e deve essere
 utilizzato solo quando necessario all'interno del metodo
 \emph{addSong()}.\\\hline  
 + addPlaylist(in String): boolean & Aggiunge una nuova playlist vuota
 alla libreria con il nome dato in input.\\\hline 
 + removePlaylist(in String): boolean & Rimuove dalla libreria e
 cancella irreversibilmente la playlist il cui nome \`e dato in input.\\\hline
 - getPlaylist(in String): Playlist & Restituisce la playlist
 appartenete alla libreria richiesta.\\\hline 
 + getPlaylists(): List\textless String\textgreater & Ritorna la lista
 dei nomi di tutte le playlist appartenenti alla libreria.\\\hline 
 + getPlaylistSongs(in String): List\textless Song\textgreater & Ritorna
 la lista di tutte le canzoni appartenenti alla playlist il cui nome \`e
 dato in input.\\\hline 
 + getPlaylistSongNames(in String): List\textless Song\textgreater &
 Ritorna la dei codici delle canzoni apparteneti alla playlist il cui
 nome \`e dato in input.\\\hline 
 + addSongToPlaylist(in String, in String): boolean & Inserisce la
 canzone alla playlist date in input.\\\hline 
 + moveSongInPlaylist(in String,in int,in int) & Sposta nella playlist la
 canzone che si trova nella posizione indicata nel primo parametro int nella
 posizione specificata dal secondo. \\\hline 
 + removeSongFromPlaylist(in String,in String):boolean & Rimuove la
 canzone dalla playlist dati in input.\\\hline 
 + getters() & Tutti gli attributi privati di questa classe hanno i relativi
 metodi \emph{get}.\\\hline 
 + setters() & Tutti gli attributi privati di questa classe hanno i relativi
 metodi \emph{set}. Tutti questi metodi si occupano anche di chiamare
 \co{update()} per aggiornare i dati del Datastore.\\\hline
\caption{Metodi di MusicLibrary}
\end{longtable}

\subsection{Classe Song}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-1.6 Scalabilia\`a
    \item C1QN-1.6.2 Scalabilit\`a massa di utenza
	\item C1FN-1.9 Ricezione ed elaborazione dei brani
	\item C1FN-1.9.1 Controllo di validit`a dei dati
	\item C1FN-1.9.2 Completamento info da database interno
	\item C1QN-1.9.4 Identificazione dati ridondanti
	\item C1FN-1.9.5 Inserimento nel Database
	\item C1FN-1.13 Gestione Database
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.4 Ranking brani
    \item C1FD-1.8 Elaborazione dati utente
    \item C1FO-1.9.3 Completamento info da servizio esterno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente} Contiene le
informazioni relative ad un brano musicale, in particolare ogni canzone \`e
identificata da una chiave univoca composta dal titolo, un separatore di
default, l'artista e l'album disposte nell'ordine titolo-sep-artista-sep-album.
Dei brani condivisi da pi\`u utenti viene salvata una sola copia per ottimizzare
la quantit\`a di spazio utilizzato.\\
La logica di salvataggio delle canzoni implmentata prevede che nei tag estratti
sia presente almeno il titolo altrimenti il brano non verrà mantenuto nel
Datastore. Al primo inserimento di una canzone qesta classe si occupa anche di
reperire informazioni aggiuntive dai servizi esterni Youtube e Last.fm quali link per copertine e video in streaming. \subsubsection*{Relazioni d'uso di altre componenti} Questa classe fa uso degli
oggetti \co{SongDTO} e \co{SongSummaryDTO} del package \emph{shared}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti} Tutte le classi logiche Service presenti nel package
\emph{server} ne fanno uso qual'ora abbiano bisogno di informazioni riguardanti
un brano musicale. Largo uso ne fa la classe \co{MusicLibrary} che gestisce al
suo interno una lista di brani. 
\subsubsection*{Attivit\`a svolte e dati
trattati} Gestisce la logica di persistenza di tutti i dati relativi ad un brano musicale del
sistema NetMus.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - id: String \emph{@Id} & Chiave univoca della canzone, \`e composta dal
 titolo, il separatore di default e l'artista. \\\hline 
 - title: String \emph{@Index} & Titolo del brano.\\\hline 
 - artist: String \emph{@Index} & Nome della band o del cantante autore
 della canzone.\\\hline 
 - genre: String \emph{@Index} & Genere musicale associato alla
 canzone.\\\hline 
 - num\_owners: int \emph{@Index} & Numero di utenti che possiedono la
 canzone nel proprio catalogo.\\\hline 
 - album:String & Album a cui appartiene il brano..\\\hline 
 - album\_cover: String &
 Link all' immagine della copertina dell'album a cui appartiene il
 brano.\\\hline 
 - year: String & Anno di pubblicazione del brano.\\\hline 
 - composer: String & Nome del compositore della canzone.\\\hline
 - track\_number: String & Numero della canzone all'interno dell'album.\\\hline
 - file: String & Nome del file da cui sono state estratte le
 informazioni del brano.\\\hline 
 - rating: double & Media di tutti i voti assegnati dagli utenti a questa
 canzone.\\\hline
 - num\_ratings: int & Numero di voti effettuati su questa canzone. \\\hline
 - youtube\_code: String & Codice del rispettivo video su Youtube.\\\hline
 - SEPARATOR: String \emph{static final default = '-vt.g-'} & Stringa
 di separazione necessaria nella creazione dell'\co{id} del brano.\\\hline
\caption{Campi dati di Song}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + store() & Inserisce nel database per la prima volta la canzone. Se
 esiste gi\`a un brano con lo stesso \co{id} lancia
 un'eccezione di tipo \co{IllegalStateException} \\\hline
 + update() & Aggiorna o inserisce i dati della canzone nel Datastore.\\\hline
 \# deleteSong(in Song) \emph{static} & Rimuove completamente dal
 database la canzone. \\\hline
 + toSongSummaryDTO(): SongSummaryDTO &
 Genera un oggetto \co{SongSummaryDTO} contenente le informazioni
 essenziali del brano.\\\hline
 + toSongDTO(): SongDTO &
 Genera un oggetto \co{SongDTO} contenente tutte le informazioni
 riguardanti la canzone.\\\hline 
 + storeOrUpdateFromDTO(in SongDTO): Song \emph{static} & Recupera le
 informazioni da un oggetto \co{SongDTO} e le salva nel modo pi\`u
 opportuno nel Datastore.\\\hline 
 + changeArtist(in String): Song & Modifica l'attributo \co{artist}
 inserendo, se valido, la stringa in input. Se la modifica trasforma la
 canzone in un brano gi\`a presente nel Datastore viene ritornato il
 brano gi\`a salvato.\\\hline
 + changeTitle(in String): Song & Modifica l'attributo \co{title}
 inserendo, se valido, la stringa in input. Se la modifica trasforma la
 canzone in un brano gi\`a presente nel Datastore viene ritornato il
 brano gi\`a salvato.\\\hline
 + changeAlbum(in String): Song & Modifica l'attributo \co{album}
 inserendo, se valido, la stringa in input. Se la modifica trasforma la
 canzone in un brano gi\`a presente nel Datastore viene ritornato il
 brano gi\`a salvato.\\\hline
 + addRate(in int): double & Aggiunge la votazione data in input
 alla canzone aggiornando nel modo appropriato gli attributi
 \emph{rating} e \emph{num\_ratings}. Questo metodo, poich\'e gli stessi dati
 possono essere acceduti concorrentemente, viene eseguito all'interno di una
 tranzazione. \\\hline
 + changeRate(in int,in int): double & Permette ad ogni utente di modificare
 la propria votazione su questo brano dando in input il voto precendete e
 quello nuovo. Questo metodo, poich\'e gli stessi dati possono essere acceduti
 concorrentemente, viene eseguito all'interno di una tranzazione. \\\hline 
 \# newOwner() & Incrementa il contatore dei possessori di questo brano, ha visibilit\`a package poich\'e la sua modifica deve avvenire solo all'interno della logica di persistenza nei DAO.\\\hline \# deleteOwner() & Decrementa il contatore dei possessori di questo brano, ha visibilit\`a package poich\'e la sua modifica deve avvenire solo
 all'interno della logica di persistenza nei DAO.\\\hline 
 + getters() & Tutti gli attributi privati di questa classe hanno i relativi metodi \emph{get}.\\\hline 
 + setters() & Tutti gli attributi privati di questa classe hanno i relativi
 metodi. Tutti questi metodi si occupano anche di chiamare
 \co{update()} per aggiornare i dati del Datastore. \emph{set}.\\\hline
\caption{Metodi di Song}
\end{longtable}


\newpage
\section{Package server.servlet}

\begin{figure}[!h]
  \centering
  \includegraphics[width=11cm]{img/DP/classes_servlet.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.server.servlet}.}
\end{figure}

\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item Nessuno
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Package del server che contiene le classi utilizzate per interfacciarsi a
servizi esterni, come il login utilizzando l'account Google.
\subsection*{Relazioni d'uso di altre componenti}
Verranno utilizzati i \emph{persistent} appropriati e classi di \emph{utils}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Queste classi vengono usati da \emph{server} per integrare al suo interno
altri servizi esterni.
\subsection*{Attivit\`a svolte e dati trattati}
Gestisce lo scambio di dati con servizi esterni.


\newpage
\subsection{Classe LoginSuperServlet}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\`E una classe astratta che estende \co{HttpServlet} ed ha lo scopo di
implementare il metodo di creazione dell'indirizzo di ritorno del richiedente.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a concretizzata da \co{LoginGoogleServlet}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Crea semplicemente l'URL di Callback per far tornare una risposta HTTP al
client in seguito ad una sua richiesta di login.

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 \# buildCallBackURL(in HttpServletRequest) & Crea l'indirizzo di ritorno del
 richiedente, per la richiesta di login. \\\hline
\caption{Metodi di LoginSuperServlet}
\end{longtable}

\newpage
\subsection{Classe LoginGoogleServlet}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Utilizzata per il login tramite l'account Google.
\subsubsection*{Relazioni d'uso di altre componenti}
Concretizza il \co{LoginSuperServlet} ed implementa il metodo \emph{doGet} il
quale utilizza \co{HttpSerletRequest} e \co{HttpSerletResponse}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Predispone il servizio e reindirizza l'utente al servizio di login di Google.
Google, dopo che l'utente avr\`a effettuato l'accesso, lo reindizzer\`a nuovamente
al nostro programma trasmettendo a \co{LoginGoogleCallbackServlet} tutte le
informazioni del caso.

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ doGet(in HttpServletRequest, in HttpServletResponse) & Crea ed invia una
richiesta al servizio di login Google per fargli mostrare la pagina di login
predefinita per i Google Account. \\\hline
\caption{Metodi di LoginGoogleServlet}
\end{longtable}

\newpage
\subsection{Classe LoginGoogleCallbackServlet}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Utilizzata per il login tramite l'account Google.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Riceve i dati dell'account dell'utente dopo che quest'ultimo ha effettuato
l'accesso tramite il Google account. Se \`e la prima volta che l'utente entra in
NetMus viene creato in automatico un account personale con lo stesso ID del
Google Account. Se esiste gi\`a viene semplicemente autenticata la sessione
corrente. Se esiste gi\`a un utente NetMus con lo stesso ID non potr\`a essere
registrato tale utente Google, e quindi sar\`a reindirizzato alla pagina di
Login.

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ doGet(in HttpServletRequest, in HttpServletResponse) & Gestisce l'arrivo di
una risposta da Google, che porta l'utente loggato con Google Account. Se
questo \`e null, allora non \`e andata a buon fine l'autenticazione google. Se
invece \`e andata a buon fine viene associata all'utente la sessione corrente.
\\\hline
\caption{Metodi di LoginGoogleCallbackServlet}
\end{longtable}

\newpage
\section{Package server.utils} % LASCIARE WARNING

\begin{figure}[!h]
  \centering
  \includegraphics[width=12cm]{img/DP/classes_server_utils.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.server.utils}.}
\end{figure}

\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Contiene le classi che forniscono funzioni di utilit\`a comunemente utilizzate
dalle altre classi del package \emph{server}.
\subsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene utilizzato dalle classi del package \emph{server}.
\subsection*{Attivit\`a svolte e dati trattati}
Varie.

\subsection{Classe AppEngineCache}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.9.3 Completamento info da servizio esterno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe ci permette di utillizare le API \emph{lastfm-java} all'interno la
piattaforma Google App Engine. Tali librerie ci servono per poter fare
interrogazioni alle API di Last.fm in maniera semplice, pi\`u ad alto livello
del doversi implementare una servlet. Queste librerie per\`o necessitano di una
cache che di default \`e la home del client. In GAE, poich\'e non \`e possibile
accedere al file system del client, \`e necessario modificare con questa classe
\co{AppEngineCache} la destinazione di caching delle librerie, andando ad
utilizzare invece una tabella nel DataStore.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa classe viene utilizzata prima di fare operazioni con le API di Last.fm
per andare a modificare la gestione della cache.
\subsubsection*{Attivit\`a svolte e dati trattati}
Utilizza come cache per Last.fm il Google DataStore invece che il file system
del client.
\\\\
Questa classe non andr\`a a dettagliare i singoli campi dati o metodi, poich\'e
viene presa come strumento gi\`a esistente. \`E stata creata e proposta agli
sviluppatori GAE dal creatore delle API per Java di Last.fm, Janni Kovacs.

\subsection{Classe BCrypt}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.2 Registrazione a Netmus
    \item C1FN-1.4.2 Cambio password
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe \`e stata importata nel progetto con lo scopo di fornirci uno
strumento semplice ma efficace per cifrare le password dei nostri utenti, prima
di essere memorizzate nel DataStore. \`E un'implementazione Java dell'algoritmo
di hashing Blowfish, sviluppata da Damien Miller nel anno 2006.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Questa viene utilizzata da \co{LoginServiceImpl} al momento della creazione di
un nuovo utente nel DataStore per cifrare la password, e al momento del login
per controllare che sia corretta la password inserita dall'utente, grazie ad un
comodo metodo di confronto.
 \subsubsection*{Attivit\`a svolte e dati trattati}
Svolge l'attivit\`a di cifratura delle password del sistema Netmus.
\\\\
Non verranno elencati nel dettaglio i metodi ed i campi dati poich\`e questa
classe \`e importata nel progetto e ci offre un servizio black-box.

\subsection{Classe Utils}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1QD-1.5.1 Ottimizzazione della ricerca su YouTube
    \item C1VD-1.5.2 Quote YouTube
    \item C1VD-1.5.3 YouTube Terms of Services
    \item C1FO-1.9.3 Completamento info da servizio esterno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe deve offrire dei metodi statici semplici per avere accesso ai
servizi esterni YouTube e Last.fm. Si occuper\`a di prelevare il codice
del video riproducibile su YouTube, mettendo in ingresso come keywords l'artista
ed il titolo del brano. Dovr\`a in ugual modo andare ad interrogare il database
di Last.fm per poter prelevare la copertina relativa al brano, oppure
informazioni riguardanti artista e album se mancanti nel tag del brano e nel
nostro database interno.
\subsubsection*{Relazioni d'uso di altre componenti}
Questa classe utilizza la classe \co{YouTubeManager} del package
\emph{server.youtube} per utilizzare le API di YouTube, ed utilizza la classe
\co{AppEngineCache} per poi usare le API Java di Last.fm.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vengono utilizzati i suoi metodi nella classe \co{Song} per cercare di
completare le informazioni di un nuovo brano da inserire nel DataStore.
\subsubsection*{Attivit\`a svolte e dati trattati}
Classe di servizio per interrogare servizi esterni, con lo scopo di completare
le informazioni su un brano il pi\`u possibile, in maniera da offrire il
maggior numero di funzionalit\`a per quel brano.

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getYouTubeCode(in String) static & Grazie a YouTubeManager restituisce la
 prima occorrenza di una ricerca su YouTube per pertinenza alla keyword in ingresso
 (autore titolo). Se la ricerca non produce risultati restutuisce stringa vuota.
 \\\hline
  + getCoverImage(in String) static & Questo metodo attiva la cache di Last.fm
  per AppEngine ed esegue una ricerca esterna, con keywords artista e album,
  per recuperare l'url della copertina dell'album relativo ad un brano, in
  formato JPG. \\\hline
  + getSongFromFileName(in String) static & Con questo metodo andremo a provare
  a recuperare informazioni ulteriori di un brano che non ha info nel tag,
  usando come keyword il nome del file stesso. Se verr\`a trovato qualcosa si
  prover\`a a proporlo all'utente. In uscita restituir\`a un SongDTO. \\\hline
\caption{Metodi di Utils}
\end{longtable}

\subsection{Classe ServletUtils}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FO-1.2.1 Pagina login indipendente
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe conterr\`a metodi utili alle servlet per la gestione degli
indirizzzi della applicazione.
\subsubsection*{Relazioni d'uso di altre componenti}
Nessuna.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Usata dal package \emph{Servlet}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funzioni utili alle servlet per la gestione degli URL.

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getBaseUrl(in HttpServletRequest) static & Questo metodo deve tornare
 l'indirizzo di base dell'applicazione, a seconda di dove \`e hostato il
 progetto e da che porta viene acceduto. \\\hline
\caption{Metodi di ServletUtils}
\end{longtable}

\newpage
\section{Package server.youtube} % LASCIARE WARNING
\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1VD-1.5.2 Quote YouTube
    \item C1VD-1.5.3 YouTube Terms of Services
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
\subsection*{Relazioni d'uso di altre componenti}
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsection*{Attivit\`a svolte e dati trattati}

\subsection{Classe YouTubeManager}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1VD-1.5.2 Quote YouTube
    \item C1VD-1.5.3 YouTube Terms of Services
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}

\subsection{Classe YouTubeMedia}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1VD-1.5.2 Quote YouTube
    \item C1VD-1.5.3 YouTube Terms of Services
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}

\subsection{Classe YouTubeVideo}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.9 Ricezione ed elaborazione dei brani
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1VD-1.5.2 Quote YouTube
    \item C1VD-1.5.3 YouTube Terms of Services
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}




\newpage
\section{Package shared}

\begin{figure}[!h]
  \centering
  \includegraphics[width=15cm]{img/DP/classes_shared.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.shared}.}
\end{figure}

\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
  	\item C1QN-2.6 Manutenibilit\`a
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{shared} contiene le classi degli oggetti che vengono
scambiati tra client e server; in particolare sono presenti le classi che
aderiscono al pattern DTO. L'insieme di queste classi rappresenta tutti i
dati contenuti nelle entit\`a del Datastore opportunamente organizzati in modo
da essere raggruppabili in componenti minori e prive di parte logica.
\`E qui contenuta anche la gerarchia delle eccezioni del sistema Netmus
fondamentale nelle comunicazioni asincrone tra client e server.
\subsection*{Relazioni d'uso di altre componenti} Tutte le classi di questo
package implementano l'interfaccia \co{java.io.Serializable} per poter essere
serializzate e quindi inviate attraverso la rete. 
\subsection*{Interfacce con e relazioni d'uso da altre componenti} Viene
utilizzata da gran parte delle classi dei package \emph{client} e \emph{server}
per lo scambio di dati e/o informazioni. 
\subsection*{Attivit\`a svolte e dati trattati}
Le classi di questo package si occupano di inglobare e trasportare
le informazioni attraverso la rete, per le comunicazioni tra server e client,
in particolare i dati relativi alle entit\`a del Datastore ed alle eccezioni.
Vengono qui di seguito descritte pi\`u in dettaglio.

\subsection{Classe UserDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.4 Gestione profilo personale
	\item C1FN-1.4.1 Modifica informazioni personali
	\item C1FN-1.4.2 Cambio password
	\item C1FN-1.4.3 Cancellazione del proprio account
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta la maggior parte dei dati di un utente, pi\`u
precisamente quelli che ci si aspetta che ogni utente abbia inserito.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{UserSummaryDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package \co{shared}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per i dati richiesti di un utente.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - firstName: String & Nome proprio dell'utente.\\\hline
 - lastName: String & Cognome dell'utente.\\\hline
 - gender: char & Sesso, sono validi i valori 'F' (femmina) e 'M'
 (maschio).\\\hline
 - nationality: String & Nazione di provenienza dell'utente.\\\hline
 - aboutMe: String & Informazioni aggiuntive su
 di se inserite dall'utente.\\\hline
 - birthDate: Date & Data di nascita dell'utente. \\\hline
 - registrationDate: Date & Data di registrazione dell'utente.\\\hline
 - lastLogin: Date & Data dell'ultimo accesso a Netmus.\\\hline
 - lastImport: Date & Data dell'ultimo inserimento di brani da parte
 dell'utente.\\\hline
\caption{Campi dati di UserDTO}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{get}.\\\hline
 + setters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{set}.\\\hline
\caption{Metodi di UserDTO}
\end{longtable}


\subsection{Classe UserCompleteDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.4 Gestione profilo personale
    \item C1FN-1.4.1 Modifica informazioni personali
    \item C1FN-1.4.2 Cambio password
    \item C1FN-1.4.3 Cancellazione del proprio account
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta tutti i dati di un utente, a partire da quelli
visualizzati sul profilo fino a quelli interni del sistema. In particolare
contiene la libreria musicale dell'utente. 
\subsubsection*{Relazioni d'uso di
altre componenti} Estende la classe \co{UserDTO} e mantiene al suo interno un campo di tipo
\co{MusicLibraryDTO}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre
componenti} Vedere la descrizione del package \co{shared}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per tutti dati dell'utente.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - musicLibrary: MusicLibraryDTO & Oggetto DTO che rappresenta il
 catalogo multimediale dell'utente.\\\hline
\caption{Campi dati di UserCompleteDTO}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{get}.\\\hline
 + setters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{set}.\\\hline
\caption{Metodi di UserCompleteDTO}
\end{longtable}

\subsection{Classe SongSummaryDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.4 Ranking brani
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta i dati pi\`u comunemente utilizzati di un brano, ovvero
quelli che vengono visualizzati in una playlist all'interno di un profilo.
\subsubsection*{Relazioni d'uso di altre componenti}
Implementa l'interfaccia \co{GenericDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per i dati pi\`u comunemente utilizzati di un brano, come
per esempio titolo ed autore.

\subsection{Classe SongDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.1.4 Visualizza player YouTube
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FD-1.3.1 Cancellazione brano
    \item C1FD-1.3.2 Modifica informazioni brano
    \item C1FO-1.3.4 Ranking brani
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta tutti i dati di un brano, compresi quelli interni del
sistema. 
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{SongSummaryDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Funge da contenitore per tutti dati del brano, dal titolo al numero
identificativo del brano. 

\subsection{Classe LoginDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1FN-1.2 Registrazione
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene e rappresenta i dati di login di un utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Vedere la descrizione del package \co{shared}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package \co{shared}.
\subsubsection*{Attivit\`a svolte e dati trattati}
Trasporta nome utente e password dal client al server per
tutte le procedure legate all'autenticazione.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - user: String & Rappresenta il nome di login unico
dell'utente e nello stesso tempo la sua e-mail (valida).\\\hline
 - password: String & Contiene l'hash della password dell'utente ottenuto
utilizzando l'algoritmo BCrypt.\\\hline
\caption{Campi dati di LoginDTO}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{get}.\\\hline
 + setters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{set}.\\\hline
\caption{Metodi di LoginDTO}
\end{longtable}

\subsection{Classe MusicLibrarySummaryDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FO-1.3.3 Creazione playlist
    \item C1FO-1.3.4 Ranking brani
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene le informazioni relative ad un catalogo multimediali compresa la lista
di canzoni di cui \`e composto. Le canzoni presenti nella lista sono incapsulate
in oggetti di tipo \co{SongSummaryDTO} e contengono solamente le infomrazioni
basilari quali artista e titolo. 
\subsubsection*{Relazioni d'uso di altre
componenti} \co{SongSummaryDTO}. 
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Fa da contenitore per tutti dati di un catalogo multimediale fornendo solo le
informazioni essenziali per le canzoni.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - owner: UserSummaryDTO & Dati essenziali relativi all'utente
 associato a questo catalogo.\\\hline 
 - songs: List\textless SongSummaryDTO\textgreater & Lista delle
 canzoni (dati essenziali) presenti nel catalogo.\\\hline
\caption{Campi dati di MusicLibrarySummaryDTO}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{get}.\\\hline
 + setters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{set}.\\\hline
\caption{Metodi di MusicLibrarySummaryDTO}
\end{longtable}

\subsection{Classe MusicLibraryDTO}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item C1FD-1.3 Personalizzazione del catalogo
    \item C1FO-1.3.3 Creazione playlist
    \item C1FO-1.3.4 Ranking brani
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Contiene le informazioni relative ad un catalogo multimediali compresa la lista
di canzoni di cui \`e composto. Le canzoni presenti nella lista sono incapsulate
in oggetti di tipo \co{SongDTO}.
\subsubsection*{Relazioni d'uso di altre componenti} 
\co{SongDTO}.
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Fa da contenitore per tutti dati di un catalogo multimediale.
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 - owner: UserSummaryDTO & Dati essenziali relativi all'utente
 associato a questo catalogo.\\\hline 
 - songs: List\textless SongDTO\textgreater & Lista delle
 canzoni presenti nel catalogo.\\\hline
\caption{Campi dati di MusicLibraryDTO}
\end{longtable}
\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
 + getters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{get}.\\\hline
 + setters() & Tutti gli attributi privati di questa classe hanno i
relativi metodi \emph{set}.\\\hline
\caption{Metodi di MusicLibraryDTO}
\end{longtable}

\subsection{Classe FieldVerifier}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
    \item C1FN-1.2 Registrazione a Netmus
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}



\newpage
\section{Package shared.exception}

\begin{figure}[!h]
  \centering
  \includegraphics[width=9cm]{img/DP/classes_shared_exception.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del package
\emph{it.unipd.netmus.shared.exception}.}
\end{figure}


\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-2.7 Gestione errori
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
Il package \emph{shared.exception} raccoglie le classi che trattano
le eccezioni che posso essere lanciate dal sistema NetMus. Le classi eccezione
sono opportunamente gerarchizzate. 
\subsection*{Relazioni d'uso di altre componenti}
Tutte le classi qui contenute estendono la classe \co{Exception}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Questo package \`e visibile all'intero sistema e all'occorrenza le classi al suo
interno posso essere utilizzate da qualsiasi altro componente.
\subsection*{Attivit\`a svolte e dati trattati}
Fornisce tutte le possibili eccezioni che possono essere lanciate dal sistema
NetMus.

\subsection{Classe NetMusException}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-2.7 Gestione errori
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Generica eccezione del nostro programma.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{Exception}.
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Rappresenta una generica eccezione usata all'interno del sistema NetMus. Tutte
le altre eccezioni estendono questa.

\subsection{Classe LoginException}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-2.7 Gestione errori
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica un generico errore rilevato durante il tentativo di login.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{NetMusException}.
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna.

\subsection{Classe RegistrationException}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C1QN-2.7 Gestione errori
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Indica un generico errore rilevato durante la registrazione di un nuovo utente.
\subsubsection*{Relazioni d'uso di altre componenti}
Estende la classe \co{NetMusException}.
\subsubsection*{Interfacce con altre componenti}
Vedere la descrizione del package.
\subsubsection*{Attivit\`a svolte e dati trattati}
Nessuna.


\section{Applet di estrazione brani}

\begin{figure}[!h]
  \centering
  \includegraphics[width=9cm]{img/DP/applet.png}
\caption{Diagramma UML delle classi che descrive le dipendenze
fondamentali presenti all'interno del applet di estrazione dati.}
\end{figure}

\subsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
	\item C2QN-4.4 Manutenibilit\`a
	\item C2VN-4.6 Norme legali
\end{itemize}
\subsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
    \item Nessuno
\end{itemize}
\subsection*{Tipo, obiettivo e funzione del componente}
L'applet di estrazione brani verr\`a sviluppata come componente
Java indipendente. In seguito sar\`a compilata ed esportata in un file JAR, il
quale verr\`a inserito nel sistema NetMus per essere caricato dinamicamente
dalla classe \co{AppletBar.java} come elemento HTML di tipo \emph{applet}.\\
Una volta caricata nella Profile View di un utente loggato, richieder\`a
l'accettazione di una firma digitale, per avere l'accesso in lettura/scrittura
sul File System del client. In tal modo potr\`a cominciare a monitorare le
periferiche di archiviazione di massa che verranno collegate da quel momento in
poi.
\subsection*{Relazioni d'uso di altre componenti}
Per entrare in funzione \`e necessario che nel client sia installata una JRE e
che questa sia utilizzabile dal browser, attraverso un plugin adatto.\\
Grazie a delle chiamate JavaScript appropriate, potr\`a chiamare i metodi nativi
(JSNI) appositamente creati e pubblicati nella classe \co{AppletBar.java}.
\subsection*{Interfacce con e relazioni d'uso da altre componenti}
Verr\`a utilizzata dal package \emph{client.applet} tramite dei metodi nativi
JavaScript (JSNI) che andranno ad invocare direttamente dei metodi pubblici
interni  all'applet.
\subsection*{Attivit\`a svolte e dati trattati}
L'applet deve monitorare le periferiche presenti nella macchina client e,
all'inserimento di un nuovo device visibile come periferica di archiviazione di
massa, andr\`a a scansionarlo interamente estraendo tutti i Tag informativi dei
brani Mp3 presenti. Verr\`a creato un file di log interno al device con lo scopo
di tenere traccia, in una scansione futura, dei file che son gi\`a stati
analizzati. Tutti i Tag analizzati verranno tradotti in un elemento XML, infine
spedito alla classe \co{AppletBar.java} sotto forma di stringa.\\

\subsection{Classe NetmusApplet}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
   \item C2FN-1 Recupero delle informazioni
   \item C2FN-1.1 Recupero automatico
   \item C2FN-1.2 Recupero manuale
   \item C2FN-3 Comunicazione con C1
   \item C2FN-3.1 Invio delle informazioni
   \item C2QN-3.2 Utilizzo della connessione
   \item C2QN-4 Utilizzo
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
   \item C2FD-1.4 Informazioni dall'hard disk
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
Questa classe sar\`a di tipo \co{JApplet} e si occuper\`a di avviare l'applet
quando caricata in una pagina Web. Quando viene creata invier\`a una notifica a
GWT, il quale andr\`a ad avviare effettivamente lo scansionamento dell'applet,
passandogli il nome utente e lo stato di attivazione scelto in precedenza
dall'utente. Di default sar\`a attiva ma pu\`o essere disattivata manualmente.
Quando sar\`a disattivata il thread \co{scanner} viene messo a dormire e verr\`a
svegliato in seguito ad una richiesta dell'utente, tramite il metodo
\co{setState} che andr\`a ad invocare un \co{notify()} sull'oggetto di lock su
cui \co{scanner} si \`e addormentato.

\subsubsection*{Relazioni d'uso di altre componenti}
Questa componente utilizzer\`a la classe \co{DeviceScanner} per
avviare, attivare e disattivare la scansione. Comunicher\`a con GWT tramite
invocazione di metodi nativi in \co{AppletBar}.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
La classe verr\`a avviata in automatico, tramite creazione e invocazione del
metodo \co{start()}, da parte della JVM quando caricata nella pagina Web.
I suoi metodi pubblici \co{letsGo} e \co{setState} possono essere invocati
tramite JSNI da GWT.

\subsubsection*{Attivit\`a svolte e dati trattati}
Svolge la funzione di avviare l'applet associandola all'utente e con lo
stato da lui impostato. Non ha un'interfaccia grafica sua, ma verr\`a graficata
in \co{AppletBar} da GWT all'interno di una ``barra di estrazione''.\\
\\

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- is\_active: bool & Stato del thread scanner.\\\hline
- logged\_user: String & Nome dell'utente loggato attuale.\\\hline
- scanner: DeviceScanner & Thread di scansione devices.\\\hline
\# app\_context: AppletContext & Context nel quale \`e inserita
l'applet.\\\hline
\caption{Campi dati di NetmusApplet}
\end{longtable}

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
+ start(): void & Metodo ereditato da \co{JApplet} invocato in automatico quando
viene caricata la classe nel browser.\\\hline
+ letsGO(in String, in boolean): void & Metodo invocato da GWT tramite
JSNI che va a settare il nome utente e fa partire il monitoraggio
del File System da parte di \co{scanner}.\\\hline
+ setState(in boolean): void & Metodo per cambiare lo stato del
monitoraggio dello \co{scanner}.\\\hline
\caption{Metodi di NetmusApplet}
\end{longtable}


\subsection{Classe DeviceScanner}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
   \item C2FN-1 Recupero delle informazioni
   \item C2FN-1.1 Recupero automatico
   \item C2FN-1.2 Recupero manuale
   \item C2FN-1.5 File ignorati
   \item C2FN-3.1 Invio delle informazioni
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
   \item C2FD-1.4 Informazioni dall'hard disk
   \item C2FO-1.6 Indicazioni file ignorati
   \item C2QD-1.7 Ottimizzazione memoria cache
   \item C2VD-4.5 Meno disturbo possibile
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente} La classe
\co{DeviceScanner} sa\`a di tipo \co{Thread} e si occuper\`a di monitorare il
File System nei tipici punti di mount dei dipositivi di archiviazione di massa.
Quando verr\`a creato un oggetto di questo tipo, si dovr\`a individuare il tipo
di sistema operativo della macchina client e quindi sar\`a nota la posizione di
mount per le periferiche. L'azione di monitoraggio partir\`a al momento
dell'invocazione del metodo \co{run()} ereditato da \co{Thread}, il quale
inizializzer\`a l'applet individuando il Sistema Operativo e andr\`a ad avviare
un ciclo infinito temporizzato di monitoraggio. Il monitoraggio consister\`a nel
controllare le periferiche attualmente connesse e confrontare tale valore con
quelle rilevate durante l'inizializzazione o il ciclo precedente. Se aumentato,
perch\`e connesso un nuovo dispositivo, verranno scansionate tutte le cartelle
al suo interno, andando ad estrarre per ogni file Mp3 il proprio Tag, grazie
alle note Java ID3 Tag Library (versione 0.5.4) importate nel progetto. Dopo
aver estratto il singolo Tag verr\`a utilizzata la classe \co{TranslateXML} che
si occuper\`a della creazione del file XML da spedire al server a fine
scansione. Verr\`a inoltre creato un file di log non intrusivo (legato
all'account) nel dispositivo dell'utente, che servir\`a in una futura scansione
per andare ad estrarre solo le informazioni dei nuovi file Mp3 e scartare quelli
gi\`a scansionati. Se un utente vorr\`a estrarre nuovamente anche i file gi\`a
scansionati in precedenza potr\`a avviare tale procedura da GWT con un click di
un bottone presente dopo la scansione d'inserimento. Dovranno essere previste
possibili scansioni avviate manualmente dall'utente in varie parti del File
System. Alla fine di una scansione verr\`a spedito il file XML prodotto tramite
un'istruzione JavaScript verso GWT.

\subsubsection*{Relazioni d'uso di altre componenti}
Questa classe utilizza \co{TranslateXML} per creare il file XML e, per
comunicare con l'applicazione principale, invoca metodi nativi pubblicati da
AppletBar nello stesso contesto della pagina Web.

\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
Viene creata, avviata e fermata in \co{NetmusApplet}.

\subsubsection*{Attivit\`a svolte e dati trattati}
Svolge la funzione di estrarre i Tag dagli Mp3 presenti nei dispositivi che
vengono collegati alla macchina durante la sua esecuzione. Tali Tag vengono
per\`o elaborati dalla classe \co{TranslateXML} che dovr\`a preparare il file
XML che \co{scanner} dovr\`a infine spedire all'applicazione principale.\\
\\

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Attributo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- is\_active: bool & Stato del thread, settato da \co{NetmusApplet}.\\\hline
- user: String & Nome dell'utente loggato attuale.\\\hline
- fs: FileSystemView & Oggetto per l'accesso al File System.\\\hline
- linux\_path: String & Punto di mount per Linux.\\\hline
- mac\_path: String & Punto di mount per MacOS.\\\hline
- default\_path: String & Punto di mount del OS rilevato.\\\hline
- devices: List\textless File\textgreater & Device rilevati in punto di
mount.\\\hline
- num\_devices: int & Numero di device connessi alla macchina.\\\hline
\# app\_context: AppletContext & Context nel quale \`e inserita
l'applet.\\\hline
\caption{Campi dati di DeviceScanner}
\end{longtable}

\begin{longtable}{|p{0.4\textwidth}|p{0.4\textwidth}|}
\hline
\rowcolor{orange} \bo{Metodo} & \bo{Descrizione} \\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
- initialize(): void & Metodo per memorizzare lo stato iniziale
dell'applet.\\\hline
- relativePath(in String, in String): String & Restituisce il path
relativo, dato un path assouluto e il path della root del device.\\\hline
- pathUnix(in String): String & Trasforma il path in ingresso in
formato UNIX, slash invece che backslash.\\\hline
- prepare(in String): String & Prepara la stringa per essere spedita
via XML, gestendo eventuali apici singoli che potrebbero creare errori
durante la spedizione tramite JavaScript.\\\hline
- scanMedia(in File, in PrintWriter, in TranslateXML, in List\textless
String\textgreater, in String, in int, in int): int & Metodo ricorsivo
che va a scansionare tutte le cartelle del dispositivo ricorsivamente ed elabora
tutti i file Mp3 rilevati, scartando quelli presenti nel log.\\\hline
- countMedia(in File, in PrintWriter, in TranslateXML, in List\textless
String\textgreater, in String, in int): int & Metodo ricorsivo che
conta tutti i file Mp3 nuovi presenti nel dispositivo.\\\hline
- readLog(in File): List\textless String\textgreater & Crea una lista
con tutti i path degli Mp3 gi\`a scansionati presenti nel file di log.\\\hline
- getTag(in File): AbstractMP3Tag & Metodo per gestire l'estrazione dei
Tag Mp3 in maniera corretta, cercando di dare compatibilit\`a con tutti
i formati di Tag Mp3 presenti in commercio.\\\hline
- listenFileSystem(): void & Metodo che esegue il monitoraggio continuo
del punto di mount del Sistema Operativo in uso, e che gestisce la
scansione, la scrittura del file di log e l'invio dei dati
all'applicazione principale.\\\hline
+ run(): void & Metodo ereditato da \co{Thread} che, gestendo i permessi per
poter compiere operazioni nel FileSystem del client, invoca i metodi \co{initialize()} e
\co{listenFileSystem()}.\\\hline
\caption{Metodi di DeviceScanner}
\end{longtable}


\subsection{Classe TranslateXML}
\subsubsection*{Requisiti obbligatori soddisfatti}
\begin{itemize}
   \item C2FN-1 Recupero delle informazioni
   \item C2FN-1.5 File ignorati
   \item C2FN-3 Comunicazione con C1
   \item C2FN-3.1 Invio delle informazioni
   \item C2QN-3.2 Utilizzo della connessione
\end{itemize}
\subsubsection*{Requisiti desiderabili e opzionali soddisfatti}
\begin{itemize}
   \item C2QD-1.7 Ottimizzazione memoria cache
\end{itemize}
\subsubsection*{Tipo, obiettivo e funzione del componente}
\subsubsection*{Relazioni d'uso di altre componenti}
\subsubsection*{Interfacce con e relazioni d'uso da altre componenti}
\subsubsection*{Attivit\`a svolte e dati trattati}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

                                 %INIZIO TRACCIAMENTI%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Tracciamento componenti progettazione di dettaglio 1 - requisiti
obbligatori}
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|l|}
\hline
\rowcolor{orange}                         
\sca{Componente} & \sca{Codice}\\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
client &  C1FN-1\\
& C1QN-2.6\\ \hline
client.Netmus  &  C1FN-1 \\
& C1VN-1.12 \\\hline 
client.ClientFactory  &  C1FN-1 \\
& C1QN-2.6 \\\hline 
client.ClientFactoryImpl  & C1QN-2.6 \\
& C1QN-2.3\\\hline 
client.mvp  &  C1QN-2.6 \\\hline 
client.mvp.NetmusActivityMapper  &  C1QN-2\\
& C1QN-2.6 \\\hline 
client.mvp.NetmusPlaceHistoryMapper  &  C1QN-2\\
& C1QN-2.6 \\\hline 
client.event  &  C1FN-1.1 \\
& C1FN-1.1.1\\
& C1FN-1.9 \\\hline
client.event.DeviceScannedEvent  &  C1FN-1.1 \\
& C1FN-1.1.1\\
& C1FN-1.9\\\hline 
client.event.DeviceScannedEventHandler  &  C1FN-1.1 \\
& C1FN-1.1.1\\ 
& C1FN-1.9\\\hline
client.activity  &  C1QN-1.6.2 \\
& C1QN-2.6 \\\hline 
client.activity.LoginActivity  &  C1FN-1.2\\
& C1QN-1.6.2 \\\hline 
client.activity.ProfileActivity  &  C1FN-1.1.3\\
& C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\
& C1QN-1.6.2\\\hline
client.place  &  C1QN-1.6.2\\
& C1QN-2 \\
& C1VN-2.5\\
& C1QN-2.6\\\hline 
client.place.LoginPlace  &  C1QN-1.6.2\\
& C1QN-2 \\
& C1VN-2.5\\\hline 
client.place.ProfilePlace  &  C1QN-1.6.2\\
& C1QN-2\\
& C1VN-2.5\\\hline
client.service  &  C1FN-1\\
& C1VN-1.12\\
& C1VN-1.11\\
& C1QN-2.6 \\\hline 
client.service.LoginService  &  C1FN-1.2 \\\hline 
client.service.UsersService  &  C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\\hline 
client.ui  &  C1FN-1.1\\
& C1QN-2.3\\
& C1QD-2.4 Supporto multi-lingua\\\hline
client.ui.LoginView  &  C1FN-1.1\\
& C1FN-1.2\\
& C1QN-2\\
& C1QN-2.3\\
& C1VN-2.5\\\hline 
client.ui.ProfileView  & C1FN-1.1\\
& C1FN-1.1.2\\
& C1FN-1.1.3\\
& C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\
& C1QN-2\\
& C1QN-2.3\\
& C1VN-2.5\\\hline 
client.applet  &  C1FN-1.9\\
& C2FN-3\\
& C2QN-4.4\\
& C2VN-4.6\\\hline 
client.applet.AppletConstants  &  C1FN-1.9 \\\hline 
client.applet.TranslateDTOXML  &  C1FN-1.9\\
& C1FN-1.9.5\\
& C2FN-3\\\hline 
client.applet.AppletBar  &  C1FN-1.9\\
& C1FN-1.9.1\\
& C1QN-2\\
& C2FN-1.2\\
& C2FN-3\\\hline 
client.applet.AppletBarView  &  C1FN-1.1.2\\
& C1QN-2\\
& C1QN-2.3\\
& C1VN-2.5\\
& C2FN-1.2\\
& C2QN-4\\\hline 
client.applet.AppletBarConnector  &  C1FN-1.9  \\\hline 
shared  &  C1QN-2.6 \\\hline 
shared.LoginDTO  &  C1FN-1.2 \\\hline 
shared.UserDTO  & C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\\hline  
shared.UserCompleteDTO  & C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\\hline 
shared.FieldVerifier  & C1FN-1.2 \\\hline 
shared.exception  &  C1QN-2.7 \\\hline 
shared.exception.NetMusException  &  C1QN-2.7 \\\hline 
shared.exception.LoginException  &  C1QN-2.7\\
& C1FN-1.2 \\\hline 
shared.exception.RegistrationException  &  C1QN-2.7\\ 
& C1FN-1.2\\\hline 
server  &  C1FN-1\\
& C1VN-1.11\\
& C1VN-1.12\\
& C1QN-2.6\\\hline  
server.LoginHelper  &  C1FN-1.2\\\hline 
server.SongsServiceImpl  &  C1QN-1.6\\\hline 
server.LoginServiceImpl  &  C1FN-1.2\\
& C1QN-1.6\\\hline 
server.UserServiceImpl  &  C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\
& C1QN-1.6\\\hline 
server.LibraryServiceImpl  &  C1QN-1.6 \\
& C1FN-1.9\\
& C1FN-1.9.1\\\hline 
server.utils  &  C1QN-2.6 \\\hline  
server.utils.Utils  & C1FN-1.9\\\hline  
server.utils.AppEngineCache  &  C1FN-1.9\\\hline
server.utils.BCrypt  &  C1FN-1.2 \\
& C1FN-1.4.2\\\hline
server.youtube  &  C1FN-1.9\\\hline
server.youtube.YouTubeManager  &  C1FN-1.9 \\\hline
server.youtube.YouTubeMedia  &  C1FN-1.9 \\\hline
server.youtube.YouTubeVideo  &  C1FN-1.9 \\\hline
server.persistent  &  C1FN-1 \\
& C1QN-1.6\\
& C1QN-1.6.2\\
& C1FN-1.9.1\\
& C1QN-1.9.6\\
& C1VN-1.11\\
& C1VN-1.12\\
& C1FN-1.13\\
& C1VN-1.13.1\\
& C1QN-2.6\\\hline 
server.persistent.UserAccount  &  C1FN-1.2\\
& C1FN-1.4\\
& C1FN-1.4.1\\
& C1FN-1.4.2\\
& C1FN-1.4.3\\
& C1QN-1.6\\
& C1QN-1.6.2\\ 
& C1FN-1.9.1\\
& C1FN-1.13\\\hline 
server.persistent.MusicLibrary  & C1QN-1.6\\
& C1QN-1.6.2\\
& C1FN-1.9.1\\\
& C1FN-1.9.5\\
& C1FN-1.13\\\hline 
server.persistent.Song  & C1QN-1.6\\
& C1QN-1.6.2\\
& C1FN-1.9\\
& C1FN-1.9.1\\
& C1FN-1.9.2\\
& C1QN-1.9.4\\
& C1FN-1.9.5\\
& C1FN-1.13\\\hline 
server.persistent.ODF  &  C1QN-1.6\\
& C1QN-1.6.2\\
& C1QN-1.9.6\\
& C1FN-1.13 \\
& C1VN-1.13.1\\\hline 
applet  &  C2QN-4.4\\
& C2VN-4.6 \\\hline
applet.DeviceScanner  &  C2FN-1\\
& C2FN-1.1\\
& C2FN-1.2\\
& C2FN-1.5\\\hline
applet.NetmusApplet  & C2FN-1 \\
& C2FN-1.1 \\
& C2FN-1.2 \\
& C2FN-3.1 \\
& C2FN-3\\
& C2QN-3.2\\
& C2QN-4\\\hline
applet.TranslateXML  &  C2FN-1.5 \\
& C2FN-3\\
& C2FN-3.1\\
& C2QN-3.2\\\hline
\caption{Tabella di tracciamento tra le componenti individuate durante la
progettazione di dettaglio 1 ed i requisiti obbligatori}
\end{longtable}
\end{footnotesize}

\section{Tracciamento componenti progettazione di dettaglio 2 - requisiti
desiderabili e opzionali}
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|l|}
\hline
\rowcolor{orange}                         
\sca{Componente} & \sca{Codice}\\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
client.ClientFactoryImpl  & C1QO-2.1\\\hline 
client.activity.LoginActivity  & C1FO-1.2.1 \\\hline 
client.activity.ProfileActivity & C1FD-1.1.4\\
& C1FD-1.3 \\
& C1FD-1.3.1\\
& C1FD-1.3.2\\
& C1FO-1.3.3\\
& C1FO-1.3.4\\
& C1FD-1.7\\
& C1FD-1.7.1\\\hline  
client.service.LoginService  & C1FO-1.2.1\\\hline 
client.service.UsersService  &  C1FD-1.3 \\
& C1FD-1.7 \\
& C1FD-1.7.1\\\hline 
client.service.SongsService  &  C1FD-1.1.4\\
& C1FD-1.3\\
& C1FD-1.3.1\\ 
& C1FD-1.3.2\\
& C1FO-1.3.4\\\hline 
client.service.LibraryService  &  C1FD-1.3 \\
& C1FO-1.3.3\\
& C1FO-1.3.4\\
& C1FO-1.8.1\\\hline 
client.ui  &  C1QD-1.6.1 \\
& C1QO-2.1\\\hline 
client.ui.LoginView  &  C1QD-1.6.1\\
& C1FO-1.2.1\\
& C1QO-2.1\\\hline 
client.ui.ProfileView  &  C1FD-1.1.4\\
& C1FD-1.3\\
& C1FD-1.3.1\\ 
& C1FD-1.3.2\\
& C1FO-1.3.3\\
& C1FO-1.3.4\\
& C1FD-1.4.4\\
& C1QD-1.6.1\\
& C1FD-1.7\\
& C1FD-1.7.1\\
& C1FO-1.8.1\\
& C1QO-2.1\\\hline 
client.ui.MyConstants  &  C1QO-2.1 \\
& C1QD-2.4 \\\hline  
client.applet.AppletConstants  &  C1QD-2.4\\\hline 
shared.SongSummaryDTO  &  C1FD-1.1.4\\
& C1FD-1.3\\
& C1FD-1.3.1\\
& C1FD-1.3.2\\
& C1FO-1.3.4\\\hline
shared.SongDTO  &  C1FD-1.1.4\\
& C1FD-1.3\\
& C1FD-1.3.1\\
& C1FD-1.3.2\\
& C1FO-1.3.4\\\hline 
shared.MusicLibraryDTO  &  C1FD-1.3\\
& C1FO-1.3.3\\
& C1FO-1.3.4\\\hline 
shared.UserDTO  &  C1FD-1.3 \\\hline  
shared.UserCompleteDTO  &  C1FD-1.3 \\\hline 
shared.MusicLibrarySummaryDTO  &  C1FD-1.3\\
& C1FO-1.3.3\\
& C1FO-1.3.4\\\hline  
server.LoginHelper  &  C1FO-1.2.1 \\\hline 
server.SongsServiceImpl  &  C1FD-1.1.4\\
& C1FD-1.3\\
& C1QD-1.5.1\\
& C1FD-1.3.1\\
& C1FD-1.3.2\\
& C1FO-1.3.4\\\hline 
server.LoginServiceImpl  &  C1FO-1.2.1\\\hline 
server.UserServiceImpl  &  C1FD-1.3 \\
& C1FD-1.7\\
& C1FD-1.7.1\\\hline 
server.LibraryServiceImpl  &  C1FD-1.3\\
& C1FO-1.3.3\\
& C1FO-1.3.4\\
& C1FD-1.8\\
& C1FO-1.8.1\\
& C1FO-1.9.3\\\hline  
server.utils.Utils  & C1QD-1.5.1\\
& C1VD-1.5.2\\
& C1VD-1.5.3\\
& C1FO-1.9.3\\\hline 
server.utils.ServletUtils  &  C1FO-1.2.1 \\\hline  
server.utils.AppEngineCache  &  C1FO-1.9.3\\\hline
server.youtube  &  C1FD-1.1.4 \\\hline
server.youtube.YouTubeManager  &  C1FD-1.1.4 \\
& C1VD-1.5.2\\
& C1VD-1.5.3\\\hline
server.youtube.YouTubeMedia  &  C1FD-1.1.4 \\
& C1VD-1.5.2\\
& C1VD-1.5.3\\\hline
server.youtube.YouTubeVideo  &  C1FD-1.1.4 \\
& C1VD-1.5.2\\
& C1VD-1.5.3\\\hline
server.servlet  &  C1FO-1.2.1 \\\hline 
server.servlet.LoginSuperServlet  &  C1FO-1.2.1 \\\hline 
server.servlet.LoginGoogleServlet  &  C1FO-1.2.1 \\\hline 
server.servlet.LoginGoogleCallbackServlet  &  C1FO-1.2.1 \\\hline  
server.persistent.UserAccount  &  C1FD-1.3\\
& C1FD-1.7\\
& C1FD-1.7.1\\\hline 
server.persistent.MusicLibrary  &  C1FD-1.3 \\
& C1FO-1.3.3\\
& C1FO-1.3.4\\
& C1FD-1.8\\
& C1FO-1.8.1\\\hline 
server.persistent.Song  & C1FD-1.1.4 \\
& C1FD-1.3\\
& C1FD-1.3.1\\
& C1FD-1.3.2\\
& C1FO-1.3.4\\
& C1FD-1.8\\
& C1FO-1.9.3\\\hline 
applet.DeviceScanner  &  C2FD-1.4\\
& C2FO-1.6\\
& C2QD-1.7\\
& C2VD-4.5\\\hline
applet.NetmusApplet  &  C2FD-1.4 \\
& C2FD-1.4\\\hline
applet.TranslateXML  &  C2QD-1.7\\\hline
\caption{Tabella di tracciamento tra le componenti individuate durante la
progettazione di dettaglio 2 ed i requisiti desiderabili o opzionali}
\end{longtable}
\end{footnotesize}


\section{Tracciamento requisiti - componenti progettazione di dettaglio}
\begin{footnotesize}
\centering
\begin{longtable}[!h]{|l|l|}
\hline
\rowcolor{orange}                         
\sca{Componente} & \sca{Codice}\\
\hline
\endhead
\hline
\multicolumn{2}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1FN-1 Web Application Netmus & Ccl0 \\   
& Ccl1\\
& Ccl2\\
& Cclse0\\
& Cse0\\
& Csepe0\\\hline
C1FN-1.1 Grafica simile ad iTunes & Cclui0\\
& Cclui1\\
& Cclui2\\
& Cclev0\\
& Cclev1\\
& Cclev2\\\hline
C1FN-1.1.1 Brani elencati opportunamente & Cclui2\\
& Cclac2\\
& Cclse4\\
& Cse6\\
& Csh5\\
& Csh9\\
& Csepe2\\
& Cclev0\\
& Cclev1\\
& Cclev2\\\hline  
C1FN-1.1.2 Menu laterali & Cclui2\\  
& Cclap4\\\hline 
C1FN-1.1.3 Visualiz. info dettagliate dei brani & Cclui2 \\
& Cclac2  \\\hline  
C1FD-1.1.4 Visualizza player YouTube & Cclui2 \\
& Cclac2\\
& Cclse3\\
& Cse3\\
& Csh2\\
& Csh3\\
& Csepe3\\
& Cseyo0\\
& Cseyo1\\
& Cseyo2\\
& Cseyo3\\\hline
C1FN-1.2 Registrazione a Netmus & Cclui1\\
& Cclac1\\
& Cclse1\\
& Cse4\\
& Cse2\\
& Csh4\\
& Csh7\\
& Cseut5\\
& Csepe1\\\hline
C1FO-1.2.1 Pagina login indipendente & Cclui1\\
& Cclac1\\
& Cclse1\\
& Cse4\\
& Cse2\\
& Csese0\\
& Csese1\\
& Csese2\\
& Csese3\\
& Cseut3\\\hline
C1FD-1.3 Personalizzazione del catalogo & Cclui2\\
& Cclac2\\
& Cclse2\\
& Cclse3\\
& Cclse4\\
& Cse3\\
& Csh2\\
& Csh3\\
& Cse5\\
& Csh7\\
& Csh8\\
& Cse6\\
& Csh5\\
& Csh9\\
& Csepe1\\
& Csepe2\\
& Csepe3\\\hline 
C1FD-1.3.1 Cancellazione brano & Cclui2\\
& Cclac2\\
& Cclse3\\
& Cse3\\
& Csh2\\
& Csh3\\
& Csepe3\\\hline  
C1FD-1.3.2 Modifica informazioni brano & Cclui2\\
& Cclac2\\
& Cclse3\\
& Cse3\\
& Csh2\\
& Csh3\\
& Csepe3\\\hline   
C1FO-1.3.3 Creazione playlist & Cclui2\\
& Cclac2\\
& Cclse4\\
& Cse6\\
& Csh5\\
& Csh9\\
& Csepe2\\\hline  
C1FO-1.3.4 Ranking brani & Cclui2\\
& Cclac2\\
& Cclse3\\
& Cse3\\
& Csh2\\
& Csh3\\
& Csepe3\\
& Cclse4\\
& Cse6\\
& Csh5\\
& Csh9\\
& Csepe2  \\\hline             
C1FN-1.4 Gestione profilo personale & Cclui2\\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csh7\\
& Csh8\\
& Csepe1\\\hline 
C1FN-1.4.1 Modifica informazioni personali & Cclui2\\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csh7\\
& Csh8\\
& Csepe1\\\hline  
C1FN-1.4.2 Cambio password & Cclui2 \\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csh7\\
& Csh8\\
& Csepe1\\
& Cseut5\\\hline  
C1FN-1.4.3 Cancellazione del proprio account & Cclui2\\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csh7\\
& Csh8\\
& Csepe1\\\hline  
C1FD-1.4.4 Pubblicazione & Cclui2\\
& Cclac2\\\hline 
C1QD-1.5.1 Ottimizzazione della ricerca su YouTube & Cseut2\\
& Cse3\\\hline 
C1VD-1.5.2 Quote YouTube & Cseut2\\
& Cseyo1\\
& Cseyo2\\
& Cseyo3\\\hline 
C1VD-1.5.3 YouTube Terms of Services & Cseut2\\
& Cseyo1\\
& Cseyo2\\
& Cseyo3\\\hline  
C1QN-1.6 Scalabilit\`a & Csepe0\\
& Csepe1\\
& Csepe2\\
& Csepe3\\
& Csepe4\\
& Cse3\\
& Cse4\\
& Cse5\\
& Cse6\\\hline   
C1QD-1.6.1 Scalabilit\`a interfaccia grafica  & Cclui0\\ 
& Cclui1\\
& Cclui2\\
& Cclui3\\
& Cclap4\\\hline 
C1QN-1.6.2 Scalabilit\`a massa di utenza & Cclac0\\
& Cclac1\\
& Cclac2\\
& Cclpl0\\
& Cclpl1\\
& Cclpl2\\
& Csepe0\\
& Csepe1\\
& Csepe2\\
& Csepe3\\
& Csepe4\\\hline  
C1FD-1.7 Interazione con altri utenti & Cclui2\\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csepe1\\\hline     
C1FD-1.7.1 Visualizzazione altri profili & Cclui2\\
& Cclac2\\
& Cclse2\\
& Csh7\\
& Cse5\\
& Csepe1\\\hline  
C1FD-1.8 Elaborazione dati utente & Cse6\\
& Csepe2\\
& Csepe3\\\hline   
C1FO-1.8.1 Esportazione PDF & Cclui2\\
& Cclac2\\
& Cclse4\\
& Cse6\\
& Csepe2  \\\hline  
C1FN-1.9 Ricezione ed elaborazione dei brani & Cse6\\
& Csh5\\
& Csh9\\
& Csepe3\\
& Cseut2\\
& Cseut4\\
& Cseyo0\\
& Cseyo1\\
& Cseyo2\\
& Cseyo3\\
& Cclap0\\
& Cclap1\\
& Cclap2\\
& Cclap3\\
& Cclap5\\
& Cclev0\\
& Cclev1\\
& Cclev2\\\hline  
C1FN-1.9.1 Controllo di validit`a dei dati & Cse6\\
& Csepe0\\
& Csepe1\\
& Csepe2\\
& Csepe3\\
& Cclap3\\\hline 
C1FN-1.9.2 Completamento info da database interno & Csepe3 \\\hline   
C1FO-1.9.3 Completamento info da servizio esterno & Cse6\\
& Cseut2\\
& Cseut4\\
& Csepe3\\\hline  
C1QN-1.9.4 Identificazione dati ridondanti & Csepe3\\\hline                                                                                       
C1FN-1.9.5 Inserimento nel Database & Cclap2\\
& Csepe3\\
& Csepe2\\\hline  
C1QN-1.9.6 Gestione concorrenza & Csepe0\\
& Csepe4\\\hline    
C1VN-1.11 Deve utilizzare il cloud computing & Cclse0\\
& Cse0\\
& Csepe0\\\hline    
C1VN-1.12 Deve utilizzare tecnologie GAE e GWT & Ccl1\\
& Cclse0\\
& Cse0\\
& Csepe0\\\hline                                 
C1FN-1.13 Gestione Database & Csepe0\\
& Csepe1\\
& Csepe2\\
& Csepe3\\
& Csepe4\\\hline   
C1VN-1.13.1 Deve utilizzare Google Data Store & Csepe0\\
& Csepe4\\\hline      
C1QN-2 Utilizzo & Cclui0 \\
& Cclui1\\
& Cclui2\\
& Cclpl0\\
& Cclpl1\\
& Cclpl2\\
& Cclap4\\
& Cclap3\\
& Cclmv1\\
& Cclmv2\\\hline  
C1QO-2.1 Accessibilit\`a & Cclui0\\
& Cclui1\\
& Cclui2\\
& Cclui3\\
& Cclui5\\
& Ccl3\\\hline 
C1QN-2.3 Portabilit\`a & Cclui0\\
& Cclui1\\
& Cclui2\\
& Cclui3\\
& Cclap4\\
& Ccl2\\\hline   
C1QD-2.4 Supporto multilingua & Cclui5\\    
& Cclap1\\
& Cclui0\\\hline                
C1VN-2.5 Semplicit\`a di utilizzo & Cclui1\\
& Cclui2\\
& Cclpl0\\
& Cclpl1\\
& Cclpl2\\
& Cclap4\\\hline
C1QN-2.6 Manutenibilit\`a & Ccl0\\
& Ccl2\\
& Ccl3\\
& Clmv0\\
& Cclac0\\
& Cclpl0\\
& Cclui0\\
& Cclse0\\
& Csh0\\
& Cse0\\
& Csepe0\\
& Cclmv0\\
& Cclmv1\\
& Cclmv2\\
& Cseut0\\\hline                    
C1QN-2.7 Gestione errori  & Cshex0\\
& Cshex1\\
& Cshex2\\
& Cshex4\\\hline     
C2FN-1 Recupero delle informazioni & C2ap1 \\
& C2ap2\\\hline  
C2FN-1.1 Recupero automatico &  C2ap1 \\
& C2ap2\\\hline
C2FN-1.2 Recupero manuale &  C2ap1\\
&  C2ap2 \\
&  Cclap3\\
&  Cclap4\\\hline  
C2FD-1.4 Informazioni dall'hard disk & C2ap1 \\
&  C2ap2\\\hline  
C2FN-1.5 File ignorati &  C2ap1\\    
&  C2ap3  \\\hline
C2FO-1.6 Indicazioni file ignorati &  C2ap1\\\hline 
C2QD-1.7 Ottimizzazione memoria cache &  C2ap1\\
&  C2ap3\\\hline
C2FN-3 Comunicazione con C1 &  C2ap2\\
&  C2ap3\\
&  Cclap0\\
&  Cclap2\\
&  Cclap3\\\hline      
C2FN-3.1 Invio delle informazioni &  C2ap2\\
&  C2ap3\\\hline
C2QN-3.2 Utilizzo della connessione &  C2ap2\\
&  C2ap3\\\hline   
C2QN-4 Utilizzo &  C2ap2\\
&  Cclap4 \\\hline  
C2QD-4.1 Portabilit\`a &  Cclap4\\\hline   
C2QD-4.2 Semplicit\`a di utilizzo  &  Cclap4\\\hline  
C2QD-4.3 Supporto multi-lingua &  Cclap1\\\hline  
C2QN-4.4 Manutenibilit\`a &  Cclap0\\
&  C2ap0\\\hline 
C2VD-4.5 Meno disturbo possibile  &  Cclap4 \\
&  C2ap1 \\\hline                          
C2VN-4.6 Norme legali &  Cclap0\\
&  C2ap0\\\hline   
\caption{Tabella di tracciamento tra i requisiti e le componenti individuate
durante progettazione di dettaglio}
\end{longtable}
\end{footnotesize}

\section{Requisiti non tracciati}
I seguenti requisiti non sono associati ad alcuna componenete all'interno del
sistema.\\ 
I requisiti C1VN-2.2, C2VN-4.7, C1QN-3.1, C1QD-3.1.1 non sono presenti nel
tracciamento poich\'e soddisfatti al di fuori del software: il manuale utente
bilingue sar\`a in versione pdf stampabile su carta ed il software, sia la
componente di persistenza e visualizzazione sia quella di recupero delle
informazioni sono open source fin dall'inizio della scrittura del codice.\\
I requisiti C1FD-1.5 e C1FO-1.7.2 richiedono uno studio aggiuntivo rispetto alla
progettazione fatta finora e rappresentano funzionalit\`a ritenute secondo noi
non fondamentali, ne \`e prevista la progettazione e l'implementazione in futuro
durante la fase di manutenzione nel ciclo di vita del software.\\
I requisiti C1FD-1.10, C2FD-2 e C2FO-1.3 sono stati valutati attentamente ed
\`e stata individuata un'incongruenza con l'effettivo funzionamento scelto per
la componente di recupero delle infromazionni. Questi requisiti non saranno
quindi soddisfatti entro un periodo certo, ma rimangono validi per uno sviluppo
futuro.
\begin{footnotesize}
\begin{longtable}[!h]{|l|}
\hline
\rowcolor{orange}                         
\sca{Requisiti non tracciati}\\
\hline
\endhead
\hline
\multicolumn{1}{|c|}{\textit{continua alla pagina successiva}}\\
\hline
\endfoot
\endlastfoot
C1FD-1.5 Riproduzione tracce in streaming \\\hline 
C1FO-1.7.2 Lasciare commenti su profilo \\\hline
C1FD-1.10 Invio nuove informazioni a C2 \\\hline
C1VN-2.2 Open source\\\hline
C1QN-3.1 Manuale utente  \\\hline
C1QD-3.1.1 Manuale utente inglese \\\hline  
C2FO-1.3 Informazioni senza connessione \\\hline            
C2FD-2 Aggiornamento e completamento informazioni \\\hline
C2VN-4.7 Open source\\\hline
\caption{Tabella dei requisiti che non sono stati tracciati con componenti
durante la progettazione di dettaglio}
\centering
\end{longtable}
\end{footnotesize}

\appendix\chapter{Codice Sorgente}
\thispagestyle{fancy} %  header e footer in CHAPTER PAGE

\chapter{Tracciamento componenti - requisiti}
\thispagestyle{fancy} %  header e footer in CHAPTER PAGE



\listoftables
\addcontentsline{toc}{chapter}{Indice Tabelle}
\listoffigures
\addcontentsline{toc}{chapter}{Indice Figure}
\end{document}
